var __defProp=Object.defineProperty,__defProps=Object.defineProperties,__getOwnPropDescs=Object.getOwnPropertyDescriptors,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp=(e,t,a)=>t in e?__defProp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,__spreadValues=(e,t)=>{for(var a in t||(t={}))__hasOwnProp.call(t,a)&&__defNormalProp(e,a,t[a]);if(__getOwnPropSymbols)for(var a of __getOwnPropSymbols(t))__propIsEnum.call(t,a)&&__defNormalProp(e,a,t[a]);return e},__spreadProps=(e,t)=>__defProps(e,__getOwnPropDescs(t)),__objRest=(e,t)=>{var a={};for(var o in e)__hasOwnProp.call(e,o)&&t.indexOf(o)<0&&(a[o]=e[o]);if(null!=e&&__getOwnPropSymbols)for(var o of __getOwnPropSymbols(e))t.indexOf(o)<0&&__propIsEnum.call(e,o)&&(a[o]=e[o]);return a};if("undefined"==typeof Promise||Promise.prototype.finally||(Promise.prototype.finally=function(e){const t=this.constructor;return this.then((a=>t.resolve(e()).then((()=>a))),(a=>t.resolve(e()).then((()=>{throw a}))))}),"undefined"!=typeof uni&&uni&&uni.requireGlobal){const e=uni.requireGlobal();ArrayBuffer=e.ArrayBuffer,Int8Array=e.Int8Array,Uint8Array=e.Uint8Array,Uint8ClampedArray=e.Uint8ClampedArray,Int16Array=e.Int16Array,Uint16Array=e.Uint16Array,Int32Array=e.Int32Array,Uint32Array=e.Uint32Array,Float32Array=e.Float32Array,Float64Array=e.Float64Array,BigInt64Array=e.BigInt64Array,BigUint64Array=e.BigUint64Array}uni.restoreGlobal&&uni.restoreGlobal(Vue,weex,plus,setTimeout,clearTimeout,setInterval,clearInterval),function(shared,vue){"use strict";const ON_SHOW="onShow",ON_LOAD="onLoad",ON_PAGE_SCROLL="onPageScroll",ON_REACH_BOTTOM="onReachBottom",ON_SHARE_APP_MESSAGE="onShareAppMessage";function isDebugMode(){return"string"==typeof __channelId__&&__channelId__}function jsonStringifyReplacer(e,t){return"Function"===shared.toRawType(t)?"function() { [native code] }":t}function normalizeLog(e,t,a){if(isDebugMode())return a.push(t.replace("at ","uni-app:///")),console[e].apply(console,a);return a.map((function(e){const t=shared.toTypeString(e).toLowerCase();if(-1!==["[object object]","[object array]","[object module]"].indexOf(t))try{e="---BEGIN:JSON---"+JSON.stringify(e,jsonStringifyReplacer)+"---END:JSON---"}catch(a){e=t}else if(null===e)e="---NULL---";else if(void 0===e)e="---UNDEFINED---";else{const t=shared.toRawType(e).toUpperCase();e="NUMBER"===t||"BOOLEAN"===t?"---BEGIN:"+t+"---"+e+"---END:"+t+"---":String(e)}return e})).join("---COMMA---")+" "+t}function formatAppLog(e,t,...a){const o=normalizeLog(e,t,a);o&&console[e](o)}const createHook=e=>(t,a=vue.getCurrentInstance())=>{!vue.isInSSRComponentSetup&&vue.injectHook(e,t,a)},onShow=createHook(ON_SHOW),onLoad=createHook(ON_LOAD),onPageScroll=createHook(ON_PAGE_SCROLL),onReachBottom=createHook(ON_REACH_BOTTOM),onShareAppMessage=createHook(ON_SHARE_APP_MESSAGE);var _export_sfc=(e,t)=>{const a=e.__vccOpts||e;for(const[o,s]of t)a[o]=s;return a};const _sfc_main$q={__name:"swiper",props:{banner:Array},setup(e){const t=vue.ref(0),a=e=>{t.value=e.detail.current};return(o,s)=>(vue.openBlock(),vue.createElementBlock("view",{class:"Rotation-view"},[vue.createElementVNode("view",{class:"swiper-top"},[vue.createElementVNode("view",{class:""},[vue.createElementVNode("swiper",{class:"swiper",autoplay:!0,circular:!0,interval:"2000",duration:"1000",onChange:a},[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(e.banner,((e,t)=>(vue.openBlock(),vue.createElementBlock("swiper-item",{key:t,class:"swiper-item",onClick:t=>{return a=e.goods_id,void(""==e.video_url?wx.navigateTo({url:`/pages/product-details/detail?goods_id=${a}`}):wx.navigateTo({url:`/pages/short-video/video?goods_id=${a}`}));var a}},[vue.createElementVNode("image",{src:e.banner_cover,mode:"aspectFill"},null,8,["src"])],8,["onClick"])))),128))],32)]),vue.createElementVNode("view",{class:"instruct-view"},[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(e.banner,((e,a)=>(vue.openBlock(),vue.createElementBlock("view",{key:a,class:vue.normalizeClass(["instruct",{active:a==t.value}])},null,2)))),128))])])]))}};var Swiper=_export_sfc(_sfc_main$q,[["__scopeId","data-v-18e10c47"]]);const _sfc_main$p={__name:"flash-sale",props:{seckill:Array},setup:e=>(t,a)=>(vue.openBlock(),vue.createElementBlock("view",{class:"flash-view"},[vue.createElementVNode("view",{class:"count-down"}," 每日秒杀 "),vue.createElementVNode("view",{class:"flex-view"},[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(e.seckill,((e,t)=>(vue.openBlock(),vue.createElementBlock("view",{onClick:t=>{return a=e.goods_id,void(""==e.video_url?wx.navigateTo({url:`/pages/product-details/detail?goods_id=${a}`}):wx.navigateTo({url:`/pages/short-video/video?goods_id=${a}`}));var a},class:"commodity",key:t},[vue.createElementVNode("image",{src:e.cover,mode:"aspectFill"},null,8,["src"]),vue.createElementVNode("view",{class:""},[vue.createElementVNode("text",{class:"overflow"},vue.toDisplayString(e.title),1),vue.createElementVNode("text",{style:{color:"#e9445a"}},"￥"+vue.toDisplayString(e.price_spike),1),vue.createElementVNode("text",null,"￥"+vue.toDisplayString(e.ori_price),1)])],8,["onClick"])))),128))])]))};var Flash=_export_sfc(_sfc_main$p,[["__scopeId","data-v-d4a4f500"]]);const _sfc_main$o={__name:"Card-goods",props:{card:Array},setup:e=>(t,a)=>(vue.openBlock(),vue.createElementBlock("view",{class:"card-view"},[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(e.card,((e,t)=>(vue.openBlock(),vue.createElementBlock("view",{onClick:t=>{return a=e._id,void(""==e.video_url?wx.navigateTo({url:`/pages/product-details/detail?goods_id=${a}`}):wx.navigateTo({url:`/pages/short-video/video?goods_id=${a}`}));var a},class:"Card-stream",key:t},[vue.createElementVNode("view",{class:"Card-image"},[vue.createElementVNode("image",{src:e.goods_cover,mode:"aspectFill"},null,8,["src"])]),vue.createElementVNode("view",{class:"Card-title overflow"},vue.toDisplayString(e.goods_title),1),vue.createElementVNode("view",{class:"Card-price"},[vue.createElementVNode("text",null,"￥"+vue.toDisplayString(e.goods_price),1),vue.createElementVNode("text",null,"已售"+vue.toDisplayString(e.sold),1)])],8,["onClick"])))),128))]))};var Card=_export_sfc(_sfc_main$o,[["__scopeId","data-v-70e179d3"]]);const _sfc_main$n={};function _sfc_render(e,t){return vue.openBlock(),vue.createElementBlock("view",{class:"loading"})}var Loading=_export_sfc(_sfc_main$n,[["render",_sfc_render],["__scopeId","data-v-0e4679b0"]]);const _sfc_main$m={__name:"index",setup(e){const t=wx.cloud.database(),a=vue.reactive({s_height:0,s_top:0,s_left:0,cus_height:0}),{s_height:o,s_top:s,s_left:n,cus_height:r}=vue.toRefs(a);vue.onMounted((()=>{const e=wx.getMenuButtonBoundingClientRect();a.s_height=e.height,a.s_top=e.top,a.s_left=e.left-30,a.cus_height=e.height+e.top+5,m()}));const i=vue.reactive({banner:[],seckill:[],card:[]}),{banner:l,seckill:c,card:u}=vue.toRefs(i);let d={goods_cover:!0,goods_price:!0,goods_title:!0,sold:!0,video_url:!0};const m=async()=>{const e=await t.collection("banner").where({}).get(),a=await t.collection("seckill").field({seckill_time:!1}).get(),o=await t.collection("goodsInfo").where({shelves:!0}).limit(10).field(d).orderBy("sold","desc").get();Promise.all([e,a,o]).then((e=>{i.banner=e[0].data,i.seckill=e[1].data,i.card=e[2].data})).catch((e=>{formatAppLog("log","at pages/index/index.vue:70",e)}))};let v=vue.ref(!1),h=vue.ref(0);onReachBottom((async()=>{v.value=!0,h.value++;let e=10*h.value;const a=await t.collection("goodsInfo").where({shelves:!0}).limit(10).skip(e).field(d).orderBy("sold","desc").get();i.card=[...i.card,...a.data],v.value=!1}));const g=()=>{wx.navigateTo({url:"/pages/search-view/search"})};return(e,t)=>(vue.openBlock(),vue.createElementBlock(vue.Fragment,null,[vue.createElementVNode("view",{class:"search-back",style:vue.normalizeStyle({height:vue.unref(r)+"px"})},[vue.createElementVNode("view",{style:vue.normalizeStyle({height:vue.unref(s)+"px"}),class:""},null,4),vue.createElementVNode("view",{onClick:g,class:"search-input",style:vue.normalizeStyle({height:vue.unref(o)+"px",width:vue.unref(n)+"px"})},[vue.createElementVNode("image",{src:"/static/sousuo.png",mode:"widthFix"}),vue.createElementVNode("input",{type:"text",style:vue.normalizeStyle({height:vue.unref(o)+"px"}),placeholder:"请输入搜索的商品",disabled:"true"},null,4)],4)],4),vue.createElementVNode("view",{class:"",style:vue.normalizeStyle({height:vue.unref(r)+"px"})},null,4),vue.createVNode(Swiper,{style:{height:"340rpx"},banner:vue.unref(l)},null,8,["banner"]),vue.createVNode(Flash,{seckill:vue.unref(c)},null,8,["seckill"]),vue.createVNode(Card,{card:vue.unref(u)},null,8,["card"]),vue.createElementVNode("view",{class:"loading-hei"},[vue.unref(v)?(vue.openBlock(),vue.createBlock(Loading,{key:0})):vue.createCommentVNode("",!0)])],64))}},_sfc_main$l={__name:"sort-view",setup(e){const t=wx.cloud.database(),a=t.command;let o=vue.ref(!1),s=vue.ref(0);vue.onMounted((()=>{!async function(){const e=await t.collection("goods_sort").where({quantity:a.gt(0)}).get(),o=await t.collection("goodsInfo").where({category:e.data[0].sort_name}).field(l).limit(10).get();formatAppLog("log","at pages/sort-view/sort-view.vue:46",o),n.sort_list=e.data,n.sort_goods=o.data}()}));const n=vue.reactive({sort_list:[],sort_goods:[]}),{sort_list:r,sort_goods:i}=vue.toRefs(n);let l={goods_cover:!0,goods_price:!0,goods_title:!0};let c=vue.ref(0);onReachBottom((async()=>{o.value=!0,c.value++;let e=10*c.value;const a=await t.collection("goodsInfo").where({category:n.sort_list[s.value].sort_name}).field(l).limit(10).skip(e).get();n.sort_goods=[...n.sort_goods,...a.data],o.value=!1}));return(e,a)=>(vue.openBlock(),vue.createElementBlock("view",{class:"sort-view"},[vue.createElementVNode("view",{class:"sort-left"},[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(vue.unref(r),((e,a)=>(vue.openBlock(),vue.createElementBlock("text",{class:vue.normalizeClass({"Select-style":a==vue.unref(s)}),onClick:o=>(async(e,a)=>{c.value=0,s.value=e;const o=await t.collection("goodsInfo").where({category:a}).field(l).limit(10).get();n.sort_goods=o.data})(a,e.sort_name),key:a},vue.toDisplayString(e.sort_name),11,["onClick"])))),128))]),vue.createElementVNode("view",{class:"sort-right"},[vue.unref(r).length>0?(vue.openBlock(),vue.createElementBlock("view",{key:0,class:"Title"},vue.toDisplayString(vue.unref(r)[vue.unref(s)].sort_name),1)):vue.createCommentVNode("",!0),(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(vue.unref(i),((e,t)=>(vue.openBlock(),vue.createElementBlock("view",{onClick:t=>{return a=e._id,void wx.navigateTo({url:"/pages/product-details/detail?goods_id="+a});var a},class:"Commodity",key:t},[vue.createElementVNode("view",{class:"Com-image"},[vue.createElementVNode("image",{src:e.goods_cover,mode:"aspectFill"},null,8,["src"])]),vue.createElementVNode("view",{class:"Com-price"},[vue.createElementVNode("text",{class:"overflow"},vue.toDisplayString(e.goods_title),1),vue.createElementVNode("text",null,"￥"+vue.toDisplayString(e.goods_price),1)])],8,["onClick"])))),128)),vue.createElementVNode("view",{class:"loading-hei"},[vue.unref(o)?(vue.openBlock(),vue.createBlock(Loading,{key:0})):vue.createCommentVNode("",!0)])])]))}};var PagesSortViewSortView=_export_sfc(_sfc_main$l,[["__scopeId","data-v-36d74ee9"]]);const _sfc_main$k={__name:"shopping-cart",setup(e){const t=wx.cloud.database();onShow((()=>{!async function(){const e=await t.collection("shop_cart").get();a.cart_data=e.data}()}));const a=vue.reactive({cart_data:[]}),{cart_data:o}=vue.toRefs(a);let s=vue.ref("管理");const n=()=>{"管理"==s.value?s.value="完成":s.value="管理"};function r(e,t){a.cart_data[e].select=!a.cart_data[e].select}const i=vue.computed((()=>a.cart_data.filter((e=>e.select)).reduce(((e,t)=>(parseFloat(e+=t.goods_price*t.buy_amount).toFixed(10),e)),0))),l=vue.computed((()=>a.cart_data.every((e=>e.select)))),c=()=>{a.cart_data.forEach((e=>e.select=!1))},u=()=>{a.cart_data.forEach((e=>e.select=!0))};return(e,d)=>(vue.openBlock(),vue.createElementBlock(vue.Fragment,null,[vue.createElementVNode("view",{class:"Manage",onClick:n},vue.toDisplayString(vue.unref(s)),1),(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(vue.unref(o),((e,o)=>(vue.openBlock(),vue.createElementBlock("view",{class:"SH-view",key:o},[vue.createElementVNode("view",{class:"SH-icon"},[e.select?(vue.openBlock(),vue.createElementBlock("icon",{key:0,onClick:t=>r(o,e.select),type:"success",color:"#ea445a"},null,8,["onClick"])):(vue.openBlock(),vue.createElementBlock("icon",{key:1,onClick:t=>r(o,e.select),type:"circle"},null,8,["onClick"]))]),vue.createElementVNode("view",{class:"SH-img"},[vue.createElementVNode("image",{src:e.goods_image,mode:"aspectFill"},null,8,["src"])]),vue.createElementVNode("view",{class:"SH-right"},[vue.createElementVNode("view",{class:"overflow"},vue.toDisplayString(e.goods_title),1),e.specs.length>0?(vue.openBlock(),vue.createElementBlock("view",{key:0,class:"SH-zhankai"},[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(e.specs,((e,t)=>(vue.openBlock(),vue.createElementBlock("text",{key:t},vue.toDisplayString(e.att_val),1)))),128))])):(vue.openBlock(),vue.createElementBlock("view",{key:1,class:"SH-zhankai",style:{"background-color":"initial"}})),vue.createElementVNode("view",{class:"SH-price"},[vue.createElementVNode("view",{class:""}," ￥"+vue.toDisplayString(e.goods_price),1),vue.createElementVNode("view",{class:"SH-amount"},[vue.createElementVNode("image",{onClick:s=>((e,o)=>{a.cart_data[e].buy_amount--,a.cart_data[e].subtotal=parseFloat((a.cart_data[e].goods_price*a.cart_data[e].buy_amount).toFixed(1)),t.collection("shop_cart").doc(o).update({data:{buy_amount:a.cart_data[e].buy_amount,subtotal:a.cart_data[e].subtotal}})})(o,e._id),class:vue.normalizeClass({prevent_style:1==e.buy_amount}),src:"/static/detail/jianshao.png",mode:"aspectFit"},null,10,["onClick"]),vue.createElementVNode("text",null,vue.toDisplayString(e.buy_amount),1),vue.createElementVNode("image",{onClick:s=>((e,o)=>{a.cart_data[e].buy_amount++,a.cart_data[e].subtotal=parseFloat((a.cart_data[e].goods_price*a.cart_data[e].buy_amount).toFixed(1)),t.collection("shop_cart").doc(o).update({data:{buy_amount:a.cart_data[e].buy_amount,subtotal:a.cart_data[e].subtotal}})})(o,e._id),src:"/static/detail/tianjia.png",mode:"aspectFit"},null,8,["onClick"])])])])])))),128)),0==vue.unref(o).length?(vue.openBlock(),vue.createElementBlock("view",{key:0,class:"Tips"}," 你还没有添加商品到购物车哦 ")):vue.createCommentVNode("",!0),vue.createElementVNode("view",{class:"",style:{height:"200rpx"}}),vue.createElementVNode("view",{class:"SH-bottom"},[vue.unref(l)?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:0},[vue.createElementVNode("icon",{type:"success",color:"#ea445a",onClick:c}),vue.createElementVNode("text",{class:"space",onClick:c},"全选")],64)):(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:1},[vue.createElementVNode("icon",{type:"circle",onClick:u}),vue.createElementVNode("text",{class:"space",onClick:u},"全选")],64)),vue.createElementVNode("text",{class:"cut-apart"}),vue.createElementVNode("text",{class:"space"},"合计:"),vue.createElementVNode("text",{class:"SH-total"},"￥"+vue.toDisplayString(vue.unref(i)),1),vue.createElementVNode("text",{onClick:d[0]||(d[0]=e=>(e=>{if("管理"==e){const e=a.cart_data.filter((e=>e.select)),t=JSON.stringify(e);wx.navigateTo({url:`/pages/pay-view/pay?type=cart&order=${t}`})}else a.cart_data.forEach((async(e,o)=>{e.select&&(await t.collection("shop_cart").doc(e._id).remove(),a.cart_data.splice(a.cart_data.findIndex((t=>t._id==e._id)),1))}))})(vue.unref(s))),class:vue.normalizeClass([{prevent_btn:vue.unref(i)<=0},"SH-settle"])},vue.toDisplayString("管理"==vue.unref(s)?"结算":"删除"),3)])],64))}};let login_user=vue.reactive({show:!1,response:"none"}),comment_show=vue.reactive({show:!1,num:1,goods_id:""}),sku_popup=vue.reactive({show:!1,judge:""}),show=vue.ref(!1),modify=vue.reactive({data:{},id:""}),newAddress=vue.reactive({data:[]}),eav_index=vue.ref("-1");const db$2=wx.cloud.database();class Public{constructor(){}login(){return new Promise(((e,t)=>{wx.getUserProfile({desc:"获取用户信息",success:async t=>{const a=await db$2.collection("user_info").get();if(a.data.length>0){const e=a.data[0];wx.setStorageSync("user_info",{avatarUrl:e.avatarUrl,nickName:e.nickName,openid:e._openid})}else{await db$2.collection("user_info").add({data:{avatarUrl:t.userInfo.avatarUrl,nickName:t.userInfo.nickName,watch_num:1,pay:!1}});const e=(await db$2.collection("user_info").get()).data[0];wx.setStorageSync("user_info",{avatarUrl:e.avatarUrl,nickName:e.nickName,openid:e._openid})}e("success")},fail:e=>{t(e)}})}))}toast(e,t="none"){wx.showToast({title:e,icon:t,mask:!0,duration:800})}upLoadImgorVideo(e=1,t="image"){return new Promise(((a,o)=>{wx.chooseMedia({count:e,mediaType:[t],sourceType:["album"]}).then((e=>{a(e.tempFiles)})).catch((e=>{o(e)}))}))}async uploadCloud(e){const t="."+e.split(".")[1];let a=`${Date.now()}-${Math.floor(1e5*Math.random(0,1))}${t}`;return new Promise(((t,o)=>{wx.cloud.uploadFile({cloudPath:"media/"+a,filePath:e,success:async e=>{const a=await wx.cloud.getTempFileURL({fileList:[e.fileID]});t(a.fileList[0].tempFileURL)},fail:e=>{o()(e)}})}))}async allUpload(e,t){return new Promise(((a,o)=>{let s=[];e.forEach((async o=>{const n=await this.uploadCloud(o.image);s.push({[t]:n}),s.length==e.length&&a(s)}))}))}previewImg(e,t){wx.previewImage({current:e,urls:t})}}const _sfc_main$j={__name:"login-view",setup(e){const t=async()=>{try{await(new Public).login(),login_user.show=!1,login_user.response="success"}catch(e){(new Public).toast("登录失败")}};return(e,a)=>vue.unref(login_user).show?(vue.openBlock(),vue.createElementBlock("view",{key:0,class:"login-view"},[vue.createElementVNode("view",{class:"login-button"},[vue.createElementVNode("button",{type:"primary",onClick:t},"登录"),vue.createElementVNode("button",{onClick:a[0]||(a[0]=e=>vue.unref(login_user).show=!1)},"取消")])])):vue.createCommentVNode("",!0)}};var Login=_export_sfc(_sfc_main$j,[["__scopeId","data-v-6f269715"]]);const _sfc_main$i={__name:"my-page",setup(e){const t=vue.reactive({whole:[{index:0,name:"查看全部订单",icon:"/static/detail/xiangyou-jiantou.svg",query:{}}],list:[{index:1,name:"待付款",icon:"/static/detail/daifukuan.svg",query:{pay_success:"not_pay"}},{index:2,name:"待发货",icon:"/static/detail/daifahuo.svg",query:{pay_success:"success",deliver:"stay"}},{index:3,name:"待收获",icon:"/static/detail/daishouhuo.svg",query:{pay_success:"success",deliver:"already"}},{index:4,name:"待评价",icon:"/static/detail/daipingjia.svg",query:{pay_success:"success",deliver:"rece_goods",evaluate:!1}}]});onShow((()=>{n()}));const a=vue.reactive({userInfo:{},exist:!1}),{userInfo:o,exist:s}=vue.toRefs(a);function n(){const e=wx.getStorageSync("user_info");e?(a.exist=!0,a.userInfo=e):a.exist=!1}const r=()=>{login_user.show=!0};vue.watch((()=>login_user.response),(e=>{n()}));const i=(e,t)=>{if(a.exist){let a=JSON.stringify({index:e,query:t});wx.navigateTo({url:"/pages/all-orders/order?obj="+a})}else login_user.show=!0},l=()=>{a.exist?wx.navigateTo({url:"/pages/re-address/address"}):login_user.show=!0},c=()=>{a.exist?wx.navigateTo({url:"/pages/my-collection/collection"}):login_user.show=!0};return(e,a)=>(vue.openBlock(),vue.createElementBlock(vue.Fragment,null,[vue.createElementVNode("view",{class:"my-page"},[vue.unref(s)?(vue.openBlock(),vue.createElementBlock("view",{key:0,class:"my-name"},[vue.createElementVNode("image",{src:vue.unref(o).avatarUrl,mode:"aspectFit"},null,8,["src"]),vue.createElementVNode("text",null,vue.toDisplayString(vue.unref(o).nickName),1)])):(vue.openBlock(),vue.createElementBlock("view",{key:1,class:"my-name",onClick:r},[vue.createElementVNode("image",{src:"/static/detail/weidenglu.svg",mode:"aspectFit"}),vue.createElementVNode("text",null,"点击登录")])),vue.createElementVNode("image",{class:"shuibo-img",src:"https://qita-1252107261.cos.ap-chengdu.myqcloud.com/boliang",mode:"scaleToFill"})]),vue.createElementVNode("view",{class:"my-order"},[vue.createElementVNode("view",{class:"my-order-title more"},[vue.createElementVNode("view",{class:""}," 我的订单 "),(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(t.whole,((e,t)=>(vue.openBlock(),vue.createElementBlock("view",{onClick:t=>i(e.index,e.query),class:"more",key:t},[vue.createElementVNode("text",null,vue.toDisplayString(e.name),1),vue.createElementVNode("image",{src:e.icon,mode:"aspectFit"},null,8,["src"])],8,["onClick"])))),128))]),vue.createElementVNode("view",{class:"order-state"},[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(t.list,((e,t)=>(vue.openBlock(),vue.createElementBlock("view",{onClick:t=>i(e.index,e.query),class:"",key:t},[vue.createElementVNode("image",{src:e.icon,mode:"aspectFit"},null,8,["src"]),vue.createElementVNode("text",null,vue.toDisplayString(e.name),1)],8,["onClick"])))),128))])]),vue.createElementVNode("view",{class:"my-other"},[vue.createElementVNode("view",{class:"",onClick:c},[vue.createElementVNode("image",{src:"/static/detail/wodeshoucang.svg",mode:"aspectFit"}),vue.createElementVNode("text",null,"我的收藏"),vue.createElementVNode("image",{class:"my-other-deta",src:"/static/detail/xiangyou-jiantou.svg",mode:"aspectFit"})]),vue.createElementVNode("view",{class:"",onClick:l},[vue.createElementVNode("image",{src:"/static/detail/shouhuodizhi.svg",mode:"aspectFit"}),vue.createElementVNode("text",null,"收货地址"),vue.createElementVNode("image",{class:"my-other-deta",src:"/static/detail/xiangyou-jiantou.svg",mode:"aspectFit"})]),vue.createElementVNode("view",{class:""},[vue.createElementVNode("image",{src:"/static/detail/yijianfankui.svg",mode:"aspectFit"}),vue.createElementVNode("text",null,"意见反馈"),vue.createElementVNode("image",{class:"my-other-deta",src:"/static/detail/xiangyou-jiantou.svg",mode:"aspectFit"})])]),vue.createVNode(Login)],64))}};var PagesMyPageMyPage=_export_sfc(_sfc_main$i,[["__scopeId","data-v-020293db"]]);const _sfc_main$h={__name:"search",setup(e){const t=wx.cloud.database(),a=t.command,o=vue.ref(""),s=vue.ref(!0);let n=vue.ref([]),r=vue.ref(0);vue.watch(o,(()=>{if(""==o.value){const e=wx.getStorageSync("search_key");u.value=e,s.value=!0,n.value=[]}}));const i=async()=>{if(o.value.trim()){r.value=0;let e=wx.getStorageSync("search_key")||[];e.unshift(o.value),wx.setStorageSync("search_key",e);const t=await l();n.value=t.data}},l=async(e=0)=>{let n=a.or([{category:t.RegExp({regexp:o.value,options:"i"})},{goods_title:t.RegExp({regexp:o.value,options:"i"})}]);const r=await t.collection("goodsInfo").where(n).limit(10).skip(e).get();return s.value=!1,r};let c=vue.ref(!1);onReachBottom((async()=>{c.value=!0,r.value++;let e=10*r.value;const t=await l(e);n.value=[...n.value,...t.data],c.value=!1}));const u=vue.ref([]);vue.onMounted((()=>{let e=wx.getStorageSync("search_key"),t=[...new Set(e)];u.value=t}));const d=()=>{wx.removeStorageSync("search_key"),u.value=[]};return(e,t)=>(vue.openBlock(),vue.createElementBlock(vue.Fragment,null,[vue.createElementVNode("view",{class:"search-mar"},[vue.createElementVNode("view",{class:"search-input"},[vue.createElementVNode("image",{src:"/static/sousuo.png",mode:"aspectFill"}),vue.withDirectives(vue.createElementVNode("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>o.value=e),focus:!0,"confirm-type":"search",onConfirm:i},null,544),[[vue.vModelText,o.value]])]),vue.createElementVNode("view",{class:"",onClick:i}," 搜索 ")]),u.value.length>0&&s.value?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:0},[vue.createElementVNode("view",{class:"history"},[vue.createElementVNode("text",null,"历史记录"),vue.createElementVNode("image",{onClick:d,src:"/static/detail/shanchu.svg",mode:"aspectFill"})]),vue.createElementVNode("view",{class:"history-text"},[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(u.value,((e,t)=>(vue.openBlock(),vue.createElementBlock("text",{onClick:t=>(async e=>{r.value=0,o.value=e;const t=await l();n.value=t.data})(e),key:t},vue.toDisplayString(e),9,["onClick"])))),128))])],64)):vue.createCommentVNode("",!0),vue.createVNode(Card,{card:vue.unref(n)},null,8,["card"]),vue.createElementVNode("view",{class:"loading-hei"},[vue.unref(c)?(vue.openBlock(),vue.createBlock(Loading,{key:0})):vue.createCommentVNode("",!0)]),0==s.value&&0==vue.unref(n).length?(vue.openBlock(),vue.createElementBlock("view",{key:1,class:"Tips"}," 没有搜索结果 ")):vue.createCommentVNode("",!0)],64))}};var PagesSearchViewSearch=_export_sfc(_sfc_main$h,[["__scopeId","data-v-36afa2dd"]]),hookCallback,some;
//! moment.js
//! version : 2.29.4
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
function hooks(){return hookCallback.apply(null,arguments)}function setHookCallback(e){hookCallback=e}function isArray(e){return e instanceof Array||"[object Array]"===Object.prototype.toString.call(e)}function isObject(e){return null!=e&&"[object Object]"===Object.prototype.toString.call(e)}function hasOwnProp(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function isObjectEmpty(e){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(e).length;var t;for(t in e)if(hasOwnProp(e,t))return!1;return!0}function isUndefined(e){return void 0===e}function isNumber(e){return"number"==typeof e||"[object Number]"===Object.prototype.toString.call(e)}function isDate(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function map(e,t){var a,o=[],s=e.length;for(a=0;a<s;++a)o.push(t(e[a],a));return o}function extend(e,t){for(var a in t)hasOwnProp(t,a)&&(e[a]=t[a]);return hasOwnProp(t,"toString")&&(e.toString=t.toString),hasOwnProp(t,"valueOf")&&(e.valueOf=t.valueOf),e}function createUTC(e,t,a,o){return createLocalOrUTC(e,t,a,o,!0).utc()}function defaultParsingFlags(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function getParsingFlags(e){return null==e._pf&&(e._pf=defaultParsingFlags()),e._pf}function isValid(e){if(null==e._isValid){var t=getParsingFlags(e),a=some.call(t.parsedDateParts,(function(e){return null!=e})),o=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidEra&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&a);if(e._strict&&(o=o&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour),null!=Object.isFrozen&&Object.isFrozen(e))return o;e._isValid=o}return e._isValid}function createInvalid(e){var t=createUTC(NaN);return null!=e?extend(getParsingFlags(t),e):getParsingFlags(t).userInvalidated=!0,t}some=Array.prototype.some?Array.prototype.some:function(e){var t,a=Object(this),o=a.length>>>0;for(t=0;t<o;t++)if(t in a&&e.call(this,a[t],t,a))return!0;return!1};var momentProperties=hooks.momentProperties=[],updateInProgress=!1;function copyConfig(e,t){var a,o,s,n=momentProperties.length;if(isUndefined(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),isUndefined(t._i)||(e._i=t._i),isUndefined(t._f)||(e._f=t._f),isUndefined(t._l)||(e._l=t._l),isUndefined(t._strict)||(e._strict=t._strict),isUndefined(t._tzm)||(e._tzm=t._tzm),isUndefined(t._isUTC)||(e._isUTC=t._isUTC),isUndefined(t._offset)||(e._offset=t._offset),isUndefined(t._pf)||(e._pf=getParsingFlags(t)),isUndefined(t._locale)||(e._locale=t._locale),n>0)for(a=0;a<n;a++)isUndefined(s=t[o=momentProperties[a]])||(e[o]=s);return e}function Moment(e){copyConfig(this,e),this._d=new Date(null!=e._d?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===updateInProgress&&(updateInProgress=!0,hooks.updateOffset(this),updateInProgress=!1)}function isMoment(e){return e instanceof Moment||null!=e&&null!=e._isAMomentObject}function warn(e){!1===hooks.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function deprecate(e,t){var a=!0;return extend((function(){if(null!=hooks.deprecationHandler&&hooks.deprecationHandler(null,e),a){var o,s,n,r=[],i=arguments.length;for(s=0;s<i;s++){if(o="","object"==typeof arguments[s]){for(n in o+="\n["+s+"] ",arguments[0])hasOwnProp(arguments[0],n)&&(o+=n+": "+arguments[0][n]+", ");o=o.slice(0,-2)}else o=arguments[s];r.push(o)}warn(e+"\nArguments: "+Array.prototype.slice.call(r).join("")+"\n"+(new Error).stack),a=!1}return t.apply(this,arguments)}),t)}var deprecations={},keys;function deprecateSimple(e,t){null!=hooks.deprecationHandler&&hooks.deprecationHandler(e,t),deprecations[e]||(warn(t),deprecations[e]=!0)}function isFunction(e){return"undefined"!=typeof Function&&e instanceof Function||"[object Function]"===Object.prototype.toString.call(e)}function set(e){var t,a;for(a in e)hasOwnProp(e,a)&&(isFunction(t=e[a])?this[a]=t:this["_"+a]=t);this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function mergeConfigs(e,t){var a,o=extend({},e);for(a in t)hasOwnProp(t,a)&&(isObject(e[a])&&isObject(t[a])?(o[a]={},extend(o[a],e[a]),extend(o[a],t[a])):null!=t[a]?o[a]=t[a]:delete o[a]);for(a in e)hasOwnProp(e,a)&&!hasOwnProp(t,a)&&isObject(e[a])&&(o[a]=extend({},o[a]));return o}function Locale(e){null!=e&&this.set(e)}hooks.suppressDeprecationWarnings=!1,hooks.deprecationHandler=null,keys=Object.keys?Object.keys:function(e){var t,a=[];for(t in e)hasOwnProp(e,t)&&a.push(t);return a};var defaultCalendar={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function calendar(e,t,a){var o=this._calendar[e]||this._calendar.sameElse;return isFunction(o)?o.call(t,a):o}function zeroFill(e,t,a){var o=""+Math.abs(e),s=t-o.length;return(e>=0?a?"+":"":"-")+Math.pow(10,Math.max(0,s)).toString().substr(1)+o}var formattingTokens=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,localFormattingTokens=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,formatFunctions={},formatTokenFunctions={};function addFormatToken(e,t,a,o){var s=o;"string"==typeof o&&(s=function(){return this[o]()}),e&&(formatTokenFunctions[e]=s),t&&(formatTokenFunctions[t[0]]=function(){return zeroFill(s.apply(this,arguments),t[1],t[2])}),a&&(formatTokenFunctions[a]=function(){return this.localeData().ordinal(s.apply(this,arguments),e)})}function removeFormattingTokens(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function makeFormatFunction(e){var t,a,o=e.match(formattingTokens);for(t=0,a=o.length;t<a;t++)formatTokenFunctions[o[t]]?o[t]=formatTokenFunctions[o[t]]:o[t]=removeFormattingTokens(o[t]);return function(t){var s,n="";for(s=0;s<a;s++)n+=isFunction(o[s])?o[s].call(t,e):o[s];return n}}function formatMoment(e,t){return e.isValid()?(t=expandFormat(t,e.localeData()),formatFunctions[t]=formatFunctions[t]||makeFormatFunction(t),formatFunctions[t](e)):e.localeData().invalidDate()}function expandFormat(e,t){var a=5;function o(e){return t.longDateFormat(e)||e}for(localFormattingTokens.lastIndex=0;a>=0&&localFormattingTokens.test(e);)e=e.replace(localFormattingTokens,o),localFormattingTokens.lastIndex=0,a-=1;return e}var defaultLongDateFormat={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function longDateFormat(e){var t=this._longDateFormat[e],a=this._longDateFormat[e.toUpperCase()];return t||!a?t:(this._longDateFormat[e]=a.match(formattingTokens).map((function(e){return"MMMM"===e||"MM"===e||"DD"===e||"dddd"===e?e.slice(1):e})).join(""),this._longDateFormat[e])}var defaultInvalidDate="Invalid date";function invalidDate(){return this._invalidDate}var defaultOrdinal="%d",defaultDayOfMonthOrdinalParse=/\d{1,2}/;function ordinal(e){return this._ordinal.replace("%d",e)}var defaultRelativeTime={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function relativeTime(e,t,a,o){var s=this._relativeTime[a];return isFunction(s)?s(e,t,a,o):s.replace(/%d/i,e)}function pastFuture(e,t){var a=this._relativeTime[e>0?"future":"past"];return isFunction(a)?a(t):a.replace(/%s/i,t)}var aliases={};function addUnitAlias(e,t){var a=e.toLowerCase();aliases[a]=aliases[a+"s"]=aliases[t]=e}function normalizeUnits(e){return"string"==typeof e?aliases[e]||aliases[e.toLowerCase()]:void 0}function normalizeObjectUnits(e){var t,a,o={};for(a in e)hasOwnProp(e,a)&&(t=normalizeUnits(a))&&(o[t]=e[a]);return o}var priorities={};function addUnitPriority(e,t){priorities[e]=t}function getPrioritizedUnits(e){var t,a=[];for(t in e)hasOwnProp(e,t)&&a.push({unit:t,priority:priorities[t]});return a.sort((function(e,t){return e.priority-t.priority})),a}function isLeapYear(e){return e%4==0&&e%100!=0||e%400==0}function absFloor(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function toInt(e){var t=+e,a=0;return 0!==t&&isFinite(t)&&(a=absFloor(t)),a}function makeGetSet(e,t){return function(a){return null!=a?(set$1(this,e,a),hooks.updateOffset(this,t),this):get(this,e)}}function get(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function set$1(e,t,a){e.isValid()&&!isNaN(a)&&("FullYear"===t&&isLeapYear(e.year())&&1===e.month()&&29===e.date()?(a=toInt(a),e._d["set"+(e._isUTC?"UTC":"")+t](a,e.month(),daysInMonth(a,e.month()))):e._d["set"+(e._isUTC?"UTC":"")+t](a))}function stringGet(e){return isFunction(this[e=normalizeUnits(e)])?this[e]():this}function stringSet(e,t){if("object"==typeof e){var a,o=getPrioritizedUnits(e=normalizeObjectUnits(e)),s=o.length;for(a=0;a<s;a++)this[o[a].unit](e[o[a].unit])}else if(isFunction(this[e=normalizeUnits(e)]))return this[e](t);return this}var match1=/\d/,match2=/\d\d/,match3=/\d{3}/,match4=/\d{4}/,match6=/[+-]?\d{6}/,match1to2=/\d\d?/,match3to4=/\d\d\d\d?/,match5to6=/\d\d\d\d\d\d?/,match1to3=/\d{1,3}/,match1to4=/\d{1,4}/,match1to6=/[+-]?\d{1,6}/,matchUnsigned=/\d+/,matchSigned=/[+-]?\d+/,matchOffset=/Z|[+-]\d\d:?\d\d/gi,matchShortOffset=/Z|[+-]\d\d(?::?\d\d)?/gi,matchTimestamp=/[+-]?\d+(\.\d{1,3})?/,matchWord=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,regexes;function addRegexToken(e,t,a){regexes[e]=isFunction(t)?t:function(e,o){return e&&a?a:t}}function getParseRegexForToken(e,t){return hasOwnProp(regexes,e)?regexes[e](t._strict,t._locale):new RegExp(unescapeFormat(e))}function unescapeFormat(e){return regexEscape(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,(function(e,t,a,o,s){return t||a||o||s})))}function regexEscape(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}regexes={};var tokens={};function addParseToken(e,t){var a,o,s=t;for("string"==typeof e&&(e=[e]),isNumber(t)&&(s=function(e,a){a[t]=toInt(e)}),o=e.length,a=0;a<o;a++)tokens[e[a]]=s}function addWeekParseToken(e,t){addParseToken(e,(function(e,a,o,s){o._w=o._w||{},t(e,o._w,o,s)}))}function addTimeToArrayFromToken(e,t,a){null!=t&&hasOwnProp(tokens,e)&&tokens[e](t,a._a,a,e)}var YEAR=0,MONTH=1,DATE=2,HOUR=3,MINUTE=4,SECOND=5,MILLISECOND=6,WEEK=7,WEEKDAY=8,indexOf;function mod(e,t){return(e%t+t)%t}function daysInMonth(e,t){if(isNaN(e)||isNaN(t))return NaN;var a=mod(t,12);return e+=(t-a)/12,1===a?isLeapYear(e)?29:28:31-a%7%2}indexOf=Array.prototype.indexOf?Array.prototype.indexOf:function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1},addFormatToken("M",["MM",2],"Mo",(function(){return this.month()+1})),addFormatToken("MMM",0,0,(function(e){return this.localeData().monthsShort(this,e)})),addFormatToken("MMMM",0,0,(function(e){return this.localeData().months(this,e)})),addUnitAlias("month","M"),addUnitPriority("month",8),addRegexToken("M",match1to2),addRegexToken("MM",match1to2,match2),addRegexToken("MMM",(function(e,t){return t.monthsShortRegex(e)})),addRegexToken("MMMM",(function(e,t){return t.monthsRegex(e)})),addParseToken(["M","MM"],(function(e,t){t[MONTH]=toInt(e)-1})),addParseToken(["MMM","MMMM"],(function(e,t,a,o){var s=a._locale.monthsParse(e,o,a._strict);null!=s?t[MONTH]=s:getParsingFlags(a).invalidMonth=e}));var defaultLocaleMonths="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),defaultLocaleMonthsShort="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),MONTHS_IN_FORMAT=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,defaultMonthsShortRegex=matchWord,defaultMonthsRegex=matchWord;function localeMonths(e,t){return e?isArray(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||MONTHS_IN_FORMAT).test(t)?"format":"standalone"][e.month()]:isArray(this._months)?this._months:this._months.standalone}function localeMonthsShort(e,t){return e?isArray(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[MONTHS_IN_FORMAT.test(t)?"format":"standalone"][e.month()]:isArray(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function handleStrictParse(e,t,a){var o,s,n,r=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],o=0;o<12;++o)n=createUTC([2e3,o]),this._shortMonthsParse[o]=this.monthsShort(n,"").toLocaleLowerCase(),this._longMonthsParse[o]=this.months(n,"").toLocaleLowerCase();return a?"MMM"===t?-1!==(s=indexOf.call(this._shortMonthsParse,r))?s:null:-1!==(s=indexOf.call(this._longMonthsParse,r))?s:null:"MMM"===t?-1!==(s=indexOf.call(this._shortMonthsParse,r))||-1!==(s=indexOf.call(this._longMonthsParse,r))?s:null:-1!==(s=indexOf.call(this._longMonthsParse,r))||-1!==(s=indexOf.call(this._shortMonthsParse,r))?s:null}function localeMonthsParse(e,t,a){var o,s,n;if(this._monthsParseExact)return handleStrictParse.call(this,e,t,a);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),o=0;o<12;o++){if(s=createUTC([2e3,o]),a&&!this._longMonthsParse[o]&&(this._longMonthsParse[o]=new RegExp("^"+this.months(s,"").replace(".","")+"$","i"),this._shortMonthsParse[o]=new RegExp("^"+this.monthsShort(s,"").replace(".","")+"$","i")),a||this._monthsParse[o]||(n="^"+this.months(s,"")+"|^"+this.monthsShort(s,""),this._monthsParse[o]=new RegExp(n.replace(".",""),"i")),a&&"MMMM"===t&&this._longMonthsParse[o].test(e))return o;if(a&&"MMM"===t&&this._shortMonthsParse[o].test(e))return o;if(!a&&this._monthsParse[o].test(e))return o}}function setMonth(e,t){var a;if(!e.isValid())return e;if("string"==typeof t)if(/^\d+$/.test(t))t=toInt(t);else if(!isNumber(t=e.localeData().monthsParse(t)))return e;return a=Math.min(e.date(),daysInMonth(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,a),e}function getSetMonth(e){return null!=e?(setMonth(this,e),hooks.updateOffset(this,!0),this):get(this,"Month")}function getDaysInMonth(){return daysInMonth(this.year(),this.month())}function monthsShortRegex(e){return this._monthsParseExact?(hasOwnProp(this,"_monthsRegex")||computeMonthsParse.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(hasOwnProp(this,"_monthsShortRegex")||(this._monthsShortRegex=defaultMonthsShortRegex),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)}function monthsRegex(e){return this._monthsParseExact?(hasOwnProp(this,"_monthsRegex")||computeMonthsParse.call(this),e?this._monthsStrictRegex:this._monthsRegex):(hasOwnProp(this,"_monthsRegex")||(this._monthsRegex=defaultMonthsRegex),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)}function computeMonthsParse(){function e(e,t){return t.length-e.length}var t,a,o=[],s=[],n=[];for(t=0;t<12;t++)a=createUTC([2e3,t]),o.push(this.monthsShort(a,"")),s.push(this.months(a,"")),n.push(this.months(a,"")),n.push(this.monthsShort(a,""));for(o.sort(e),s.sort(e),n.sort(e),t=0;t<12;t++)o[t]=regexEscape(o[t]),s[t]=regexEscape(s[t]);for(t=0;t<24;t++)n[t]=regexEscape(n[t]);this._monthsRegex=new RegExp("^("+n.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+o.join("|")+")","i")}function daysInYear(e){return isLeapYear(e)?366:365}addFormatToken("Y",0,0,(function(){var e=this.year();return e<=9999?zeroFill(e,4):"+"+e})),addFormatToken(0,["YY",2],0,(function(){return this.year()%100})),addFormatToken(0,["YYYY",4],0,"year"),addFormatToken(0,["YYYYY",5],0,"year"),addFormatToken(0,["YYYYYY",6,!0],0,"year"),addUnitAlias("year","y"),addUnitPriority("year",1),addRegexToken("Y",matchSigned),addRegexToken("YY",match1to2,match2),addRegexToken("YYYY",match1to4,match4),addRegexToken("YYYYY",match1to6,match6),addRegexToken("YYYYYY",match1to6,match6),addParseToken(["YYYYY","YYYYYY"],YEAR),addParseToken("YYYY",(function(e,t){t[YEAR]=2===e.length?hooks.parseTwoDigitYear(e):toInt(e)})),addParseToken("YY",(function(e,t){t[YEAR]=hooks.parseTwoDigitYear(e)})),addParseToken("Y",(function(e,t){t[YEAR]=parseInt(e,10)})),hooks.parseTwoDigitYear=function(e){return toInt(e)+(toInt(e)>68?1900:2e3)};var getSetYear=makeGetSet("FullYear",!0);function getIsLeapYear(){return isLeapYear(this.year())}function createDate(e,t,a,o,s,n,r){var i;return e<100&&e>=0?(i=new Date(e+400,t,a,o,s,n,r),isFinite(i.getFullYear())&&i.setFullYear(e)):i=new Date(e,t,a,o,s,n,r),i}function createUTCDate(e){var t,a;return e<100&&e>=0?((a=Array.prototype.slice.call(arguments))[0]=e+400,t=new Date(Date.UTC.apply(null,a)),isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e)):t=new Date(Date.UTC.apply(null,arguments)),t}function firstWeekOffset(e,t,a){var o=7+t-a;return-((7+createUTCDate(e,0,o).getUTCDay()-t)%7)+o-1}function dayOfYearFromWeeks(e,t,a,o,s){var n,r,i=1+7*(t-1)+(7+a-o)%7+firstWeekOffset(e,o,s);return i<=0?r=daysInYear(n=e-1)+i:i>daysInYear(e)?(n=e+1,r=i-daysInYear(e)):(n=e,r=i),{year:n,dayOfYear:r}}function weekOfYear(e,t,a){var o,s,n=firstWeekOffset(e.year(),t,a),r=Math.floor((e.dayOfYear()-n-1)/7)+1;return r<1?o=r+weeksInYear(s=e.year()-1,t,a):r>weeksInYear(e.year(),t,a)?(o=r-weeksInYear(e.year(),t,a),s=e.year()+1):(s=e.year(),o=r),{week:o,year:s}}function weeksInYear(e,t,a){var o=firstWeekOffset(e,t,a),s=firstWeekOffset(e+1,t,a);return(daysInYear(e)-o+s)/7}function localeWeek(e){return weekOfYear(e,this._week.dow,this._week.doy).week}addFormatToken("w",["ww",2],"wo","week"),addFormatToken("W",["WW",2],"Wo","isoWeek"),addUnitAlias("week","w"),addUnitAlias("isoWeek","W"),addUnitPriority("week",5),addUnitPriority("isoWeek",5),addRegexToken("w",match1to2),addRegexToken("ww",match1to2,match2),addRegexToken("W",match1to2),addRegexToken("WW",match1to2,match2),addWeekParseToken(["w","ww","W","WW"],(function(e,t,a,o){t[o.substr(0,1)]=toInt(e)}));var defaultLocaleWeek={dow:0,doy:6};function localeFirstDayOfWeek(){return this._week.dow}function localeFirstDayOfYear(){return this._week.doy}function getSetWeek(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")}function getSetISOWeek(e){var t=weekOfYear(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")}function parseWeekday(e,t){return"string"!=typeof e?e:isNaN(e)?"number"==typeof(e=t.weekdaysParse(e))?e:null:parseInt(e,10)}function parseIsoWeekday(e,t){return"string"==typeof e?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}function shiftWeekdays(e,t){return e.slice(t,7).concat(e.slice(0,t))}addFormatToken("d",0,"do","day"),addFormatToken("dd",0,0,(function(e){return this.localeData().weekdaysMin(this,e)})),addFormatToken("ddd",0,0,(function(e){return this.localeData().weekdaysShort(this,e)})),addFormatToken("dddd",0,0,(function(e){return this.localeData().weekdays(this,e)})),addFormatToken("e",0,0,"weekday"),addFormatToken("E",0,0,"isoWeekday"),addUnitAlias("day","d"),addUnitAlias("weekday","e"),addUnitAlias("isoWeekday","E"),addUnitPriority("day",11),addUnitPriority("weekday",11),addUnitPriority("isoWeekday",11),addRegexToken("d",match1to2),addRegexToken("e",match1to2),addRegexToken("E",match1to2),addRegexToken("dd",(function(e,t){return t.weekdaysMinRegex(e)})),addRegexToken("ddd",(function(e,t){return t.weekdaysShortRegex(e)})),addRegexToken("dddd",(function(e,t){return t.weekdaysRegex(e)})),addWeekParseToken(["dd","ddd","dddd"],(function(e,t,a,o){var s=a._locale.weekdaysParse(e,o,a._strict);null!=s?t.d=s:getParsingFlags(a).invalidWeekday=e})),addWeekParseToken(["d","e","E"],(function(e,t,a,o){t[o]=toInt(e)}));var defaultLocaleWeekdays="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),defaultLocaleWeekdaysShort="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),defaultLocaleWeekdaysMin="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),defaultWeekdaysRegex=matchWord,defaultWeekdaysShortRegex=matchWord,defaultWeekdaysMinRegex=matchWord;function localeWeekdays(e,t){var a=isArray(this._weekdays)?this._weekdays:this._weekdays[e&&!0!==e&&this._weekdays.isFormat.test(t)?"format":"standalone"];return!0===e?shiftWeekdays(a,this._week.dow):e?a[e.day()]:a}function localeWeekdaysShort(e){return!0===e?shiftWeekdays(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort}function localeWeekdaysMin(e){return!0===e?shiftWeekdays(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin}function handleStrictParse$1(e,t,a){var o,s,n,r=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],o=0;o<7;++o)n=createUTC([2e3,1]).day(o),this._minWeekdaysParse[o]=this.weekdaysMin(n,"").toLocaleLowerCase(),this._shortWeekdaysParse[o]=this.weekdaysShort(n,"").toLocaleLowerCase(),this._weekdaysParse[o]=this.weekdays(n,"").toLocaleLowerCase();return a?"dddd"===t?-1!==(s=indexOf.call(this._weekdaysParse,r))?s:null:"ddd"===t?-1!==(s=indexOf.call(this._shortWeekdaysParse,r))?s:null:-1!==(s=indexOf.call(this._minWeekdaysParse,r))?s:null:"dddd"===t?-1!==(s=indexOf.call(this._weekdaysParse,r))||-1!==(s=indexOf.call(this._shortWeekdaysParse,r))||-1!==(s=indexOf.call(this._minWeekdaysParse,r))?s:null:"ddd"===t?-1!==(s=indexOf.call(this._shortWeekdaysParse,r))||-1!==(s=indexOf.call(this._weekdaysParse,r))||-1!==(s=indexOf.call(this._minWeekdaysParse,r))?s:null:-1!==(s=indexOf.call(this._minWeekdaysParse,r))||-1!==(s=indexOf.call(this._weekdaysParse,r))||-1!==(s=indexOf.call(this._shortWeekdaysParse,r))?s:null}function localeWeekdaysParse(e,t,a){var o,s,n;if(this._weekdaysParseExact)return handleStrictParse$1.call(this,e,t,a);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),o=0;o<7;o++){if(s=createUTC([2e3,1]).day(o),a&&!this._fullWeekdaysParse[o]&&(this._fullWeekdaysParse[o]=new RegExp("^"+this.weekdays(s,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[o]=new RegExp("^"+this.weekdaysShort(s,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[o]=new RegExp("^"+this.weekdaysMin(s,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[o]||(n="^"+this.weekdays(s,"")+"|^"+this.weekdaysShort(s,"")+"|^"+this.weekdaysMin(s,""),this._weekdaysParse[o]=new RegExp(n.replace(".",""),"i")),a&&"dddd"===t&&this._fullWeekdaysParse[o].test(e))return o;if(a&&"ddd"===t&&this._shortWeekdaysParse[o].test(e))return o;if(a&&"dd"===t&&this._minWeekdaysParse[o].test(e))return o;if(!a&&this._weekdaysParse[o].test(e))return o}}function getSetDayOfWeek(e){if(!this.isValid())return null!=e?this:NaN;var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=parseWeekday(e,this.localeData()),this.add(e-t,"d")):t}function getSetLocaleDayOfWeek(e){if(!this.isValid())return null!=e?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")}function getSetISODayOfWeek(e){if(!this.isValid())return null!=e?this:NaN;if(null!=e){var t=parseIsoWeekday(e,this.localeData());return this.day(this.day()%7?t:t-7)}return this.day()||7}function weekdaysRegex(e){return this._weekdaysParseExact?(hasOwnProp(this,"_weekdaysRegex")||computeWeekdaysParse.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(hasOwnProp(this,"_weekdaysRegex")||(this._weekdaysRegex=defaultWeekdaysRegex),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)}function weekdaysShortRegex(e){return this._weekdaysParseExact?(hasOwnProp(this,"_weekdaysRegex")||computeWeekdaysParse.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(hasOwnProp(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=defaultWeekdaysShortRegex),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function weekdaysMinRegex(e){return this._weekdaysParseExact?(hasOwnProp(this,"_weekdaysRegex")||computeWeekdaysParse.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(hasOwnProp(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=defaultWeekdaysMinRegex),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function computeWeekdaysParse(){function e(e,t){return t.length-e.length}var t,a,o,s,n,r=[],i=[],l=[],c=[];for(t=0;t<7;t++)a=createUTC([2e3,1]).day(t),o=regexEscape(this.weekdaysMin(a,"")),s=regexEscape(this.weekdaysShort(a,"")),n=regexEscape(this.weekdays(a,"")),r.push(o),i.push(s),l.push(n),c.push(o),c.push(s),c.push(n);r.sort(e),i.sort(e),l.sort(e),c.sort(e),this._weekdaysRegex=new RegExp("^("+c.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+i.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+r.join("|")+")","i")}function hFormat(){return this.hours()%12||12}function kFormat(){return this.hours()||24}function meridiem(e,t){addFormatToken(e,0,0,(function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)}))}function matchMeridiem(e,t){return t._meridiemParse}function localeIsPM(e){return"p"===(e+"").toLowerCase().charAt(0)}addFormatToken("H",["HH",2],0,"hour"),addFormatToken("h",["hh",2],0,hFormat),addFormatToken("k",["kk",2],0,kFormat),addFormatToken("hmm",0,0,(function(){return""+hFormat.apply(this)+zeroFill(this.minutes(),2)})),addFormatToken("hmmss",0,0,(function(){return""+hFormat.apply(this)+zeroFill(this.minutes(),2)+zeroFill(this.seconds(),2)})),addFormatToken("Hmm",0,0,(function(){return""+this.hours()+zeroFill(this.minutes(),2)})),addFormatToken("Hmmss",0,0,(function(){return""+this.hours()+zeroFill(this.minutes(),2)+zeroFill(this.seconds(),2)})),meridiem("a",!0),meridiem("A",!1),addUnitAlias("hour","h"),addUnitPriority("hour",13),addRegexToken("a",matchMeridiem),addRegexToken("A",matchMeridiem),addRegexToken("H",match1to2),addRegexToken("h",match1to2),addRegexToken("k",match1to2),addRegexToken("HH",match1to2,match2),addRegexToken("hh",match1to2,match2),addRegexToken("kk",match1to2,match2),addRegexToken("hmm",match3to4),addRegexToken("hmmss",match5to6),addRegexToken("Hmm",match3to4),addRegexToken("Hmmss",match5to6),addParseToken(["H","HH"],HOUR),addParseToken(["k","kk"],(function(e,t,a){var o=toInt(e);t[HOUR]=24===o?0:o})),addParseToken(["a","A"],(function(e,t,a){a._isPm=a._locale.isPM(e),a._meridiem=e})),addParseToken(["h","hh"],(function(e,t,a){t[HOUR]=toInt(e),getParsingFlags(a).bigHour=!0})),addParseToken("hmm",(function(e,t,a){var o=e.length-2;t[HOUR]=toInt(e.substr(0,o)),t[MINUTE]=toInt(e.substr(o)),getParsingFlags(a).bigHour=!0})),addParseToken("hmmss",(function(e,t,a){var o=e.length-4,s=e.length-2;t[HOUR]=toInt(e.substr(0,o)),t[MINUTE]=toInt(e.substr(o,2)),t[SECOND]=toInt(e.substr(s)),getParsingFlags(a).bigHour=!0})),addParseToken("Hmm",(function(e,t,a){var o=e.length-2;t[HOUR]=toInt(e.substr(0,o)),t[MINUTE]=toInt(e.substr(o))})),addParseToken("Hmmss",(function(e,t,a){var o=e.length-4,s=e.length-2;t[HOUR]=toInt(e.substr(0,o)),t[MINUTE]=toInt(e.substr(o,2)),t[SECOND]=toInt(e.substr(s))}));var defaultLocaleMeridiemParse=/[ap]\.?m?\.?/i,getSetHour=makeGetSet("Hours",!0);function localeMeridiem(e,t,a){return e>11?a?"pm":"PM":a?"am":"AM"}var baseConfig={calendar:defaultCalendar,longDateFormat:defaultLongDateFormat,invalidDate:defaultInvalidDate,ordinal:defaultOrdinal,dayOfMonthOrdinalParse:defaultDayOfMonthOrdinalParse,relativeTime:defaultRelativeTime,months:defaultLocaleMonths,monthsShort:defaultLocaleMonthsShort,week:defaultLocaleWeek,weekdays:defaultLocaleWeekdays,weekdaysMin:defaultLocaleWeekdaysMin,weekdaysShort:defaultLocaleWeekdaysShort,meridiemParse:defaultLocaleMeridiemParse},locales={},localeFamilies={},globalLocale;function commonPrefix(e,t){var a,o=Math.min(e.length,t.length);for(a=0;a<o;a+=1)if(e[a]!==t[a])return a;return o}function normalizeLocale(e){return e?e.toLowerCase().replace("_","-"):e}function chooseLocale(e){for(var t,a,o,s,n=0;n<e.length;){for(t=(s=normalizeLocale(e[n]).split("-")).length,a=(a=normalizeLocale(e[n+1]))?a.split("-"):null;t>0;){if(o=loadLocale(s.slice(0,t).join("-")))return o;if(a&&a.length>=t&&commonPrefix(s,a)>=t-1)break;t--}n++}return globalLocale}function isLocaleNameSane(e){return null!=e.match("^[^/\\\\]*$")}function loadLocale(e){var t=null;if(void 0===locales[e]&&"undefined"!=typeof module&&module&&module.exports&&isLocaleNameSane(e))try{t=globalLocale._abbr,require("./locale/"+e),getSetGlobalLocale(t)}catch(a){locales[e]=null}return locales[e]}function getSetGlobalLocale(e,t){var a;return e&&((a=isUndefined(t)?getLocale(e):defineLocale(e,t))?globalLocale=a:"undefined"!=typeof console&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),globalLocale._abbr}function defineLocale(e,t){if(null!==t){var a,o=baseConfig;if(t.abbr=e,null!=locales[e])deprecateSimple("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),o=locales[e]._config;else if(null!=t.parentLocale)if(null!=locales[t.parentLocale])o=locales[t.parentLocale]._config;else{if(null==(a=loadLocale(t.parentLocale)))return localeFamilies[t.parentLocale]||(localeFamilies[t.parentLocale]=[]),localeFamilies[t.parentLocale].push({name:e,config:t}),null;o=a._config}return locales[e]=new Locale(mergeConfigs(o,t)),localeFamilies[e]&&localeFamilies[e].forEach((function(e){defineLocale(e.name,e.config)})),getSetGlobalLocale(e),locales[e]}return delete locales[e],null}function updateLocale(e,t){if(null!=t){var a,o,s=baseConfig;null!=locales[e]&&null!=locales[e].parentLocale?locales[e].set(mergeConfigs(locales[e]._config,t)):(null!=(o=loadLocale(e))&&(s=o._config),t=mergeConfigs(s,t),null==o&&(t.abbr=e),(a=new Locale(t)).parentLocale=locales[e],locales[e]=a),getSetGlobalLocale(e)}else null!=locales[e]&&(null!=locales[e].parentLocale?(locales[e]=locales[e].parentLocale,e===getSetGlobalLocale()&&getSetGlobalLocale(e)):null!=locales[e]&&delete locales[e]);return locales[e]}function getLocale(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return globalLocale;if(!isArray(e)){if(t=loadLocale(e))return t;e=[e]}return chooseLocale(e)}function listLocales(){return keys(locales)}function checkOverflow(e){var t,a=e._a;return a&&-2===getParsingFlags(e).overflow&&(t=a[MONTH]<0||a[MONTH]>11?MONTH:a[DATE]<1||a[DATE]>daysInMonth(a[YEAR],a[MONTH])?DATE:a[HOUR]<0||a[HOUR]>24||24===a[HOUR]&&(0!==a[MINUTE]||0!==a[SECOND]||0!==a[MILLISECOND])?HOUR:a[MINUTE]<0||a[MINUTE]>59?MINUTE:a[SECOND]<0||a[SECOND]>59?SECOND:a[MILLISECOND]<0||a[MILLISECOND]>999?MILLISECOND:-1,getParsingFlags(e)._overflowDayOfYear&&(t<YEAR||t>DATE)&&(t=DATE),getParsingFlags(e)._overflowWeeks&&-1===t&&(t=WEEK),getParsingFlags(e)._overflowWeekday&&-1===t&&(t=WEEKDAY),getParsingFlags(e).overflow=t),e}var extendedIsoRegex=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,basicIsoRegex=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,tzRegex=/Z|[+-]\d\d(?::?\d\d)?/,isoDates=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],isoTimes=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],aspNetJsonRegex=/^\/?Date\((-?\d+)/i,rfc2822=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,obsOffsets={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function configFromISO(e){var t,a,o,s,n,r,i=e._i,l=extendedIsoRegex.exec(i)||basicIsoRegex.exec(i),c=isoDates.length,u=isoTimes.length;if(l){for(getParsingFlags(e).iso=!0,t=0,a=c;t<a;t++)if(isoDates[t][1].exec(l[1])){s=isoDates[t][0],o=!1!==isoDates[t][2];break}if(null==s)return void(e._isValid=!1);if(l[3]){for(t=0,a=u;t<a;t++)if(isoTimes[t][1].exec(l[3])){n=(l[2]||" ")+isoTimes[t][0];break}if(null==n)return void(e._isValid=!1)}if(!o&&null!=n)return void(e._isValid=!1);if(l[4]){if(!tzRegex.exec(l[4]))return void(e._isValid=!1);r="Z"}e._f=s+(n||"")+(r||""),configFromStringAndFormat(e)}else e._isValid=!1}function extractFromRFC2822Strings(e,t,a,o,s,n){var r=[untruncateYear(e),defaultLocaleMonthsShort.indexOf(t),parseInt(a,10),parseInt(o,10),parseInt(s,10)];return n&&r.push(parseInt(n,10)),r}function untruncateYear(e){var t=parseInt(e,10);return t<=49?2e3+t:t<=999?1900+t:t}function preprocessRFC2822(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function checkWeekday(e,t,a){if(e&&defaultLocaleWeekdaysShort.indexOf(e)!==new Date(t[0],t[1],t[2]).getDay())return getParsingFlags(a).weekdayMismatch=!0,a._isValid=!1,!1;return!0}function calculateOffset(e,t,a){if(e)return obsOffsets[e];if(t)return 0;var o=parseInt(a,10),s=o%100;return 60*((o-s)/100)+s}function configFromRFC2822(e){var t,a=rfc2822.exec(preprocessRFC2822(e._i));if(a){if(t=extractFromRFC2822Strings(a[4],a[3],a[2],a[5],a[6],a[7]),!checkWeekday(a[1],t,e))return;e._a=t,e._tzm=calculateOffset(a[8],a[9],a[10]),e._d=createUTCDate.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),getParsingFlags(e).rfc2822=!0}else e._isValid=!1}function configFromString(e){var t=aspNetJsonRegex.exec(e._i);null===t?(configFromISO(e),!1===e._isValid&&(delete e._isValid,configFromRFC2822(e),!1===e._isValid&&(delete e._isValid,e._strict?e._isValid=!1:hooks.createFromInputFallback(e)))):e._d=new Date(+t[1])}function defaults(e,t,a){return null!=e?e:null!=t?t:a}function currentDateArray(e){var t=new Date(hooks.now());return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function configFromArray(e){var t,a,o,s,n,r=[];if(!e._d){for(o=currentDateArray(e),e._w&&null==e._a[DATE]&&null==e._a[MONTH]&&dayOfYearFromWeekInfo(e),null!=e._dayOfYear&&(n=defaults(e._a[YEAR],o[YEAR]),(e._dayOfYear>daysInYear(n)||0===e._dayOfYear)&&(getParsingFlags(e)._overflowDayOfYear=!0),a=createUTCDate(n,0,e._dayOfYear),e._a[MONTH]=a.getUTCMonth(),e._a[DATE]=a.getUTCDate()),t=0;t<3&&null==e._a[t];++t)e._a[t]=r[t]=o[t];for(;t<7;t++)e._a[t]=r[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[HOUR]&&0===e._a[MINUTE]&&0===e._a[SECOND]&&0===e._a[MILLISECOND]&&(e._nextDay=!0,e._a[HOUR]=0),e._d=(e._useUTC?createUTCDate:createDate).apply(null,r),s=e._useUTC?e._d.getUTCDay():e._d.getDay(),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[HOUR]=24),e._w&&void 0!==e._w.d&&e._w.d!==s&&(getParsingFlags(e).weekdayMismatch=!0)}}function dayOfYearFromWeekInfo(e){var t,a,o,s,n,r,i,l,c;null!=(t=e._w).GG||null!=t.W||null!=t.E?(n=1,r=4,a=defaults(t.GG,e._a[YEAR],weekOfYear(createLocal(),1,4).year),o=defaults(t.W,1),((s=defaults(t.E,1))<1||s>7)&&(l=!0)):(n=e._locale._week.dow,r=e._locale._week.doy,c=weekOfYear(createLocal(),n,r),a=defaults(t.gg,e._a[YEAR],c.year),o=defaults(t.w,c.week),null!=t.d?((s=t.d)<0||s>6)&&(l=!0):null!=t.e?(s=t.e+n,(t.e<0||t.e>6)&&(l=!0)):s=n),o<1||o>weeksInYear(a,n,r)?getParsingFlags(e)._overflowWeeks=!0:null!=l?getParsingFlags(e)._overflowWeekday=!0:(i=dayOfYearFromWeeks(a,o,s,n,r),e._a[YEAR]=i.year,e._dayOfYear=i.dayOfYear)}function configFromStringAndFormat(e){if(e._f!==hooks.ISO_8601)if(e._f!==hooks.RFC_2822){e._a=[],getParsingFlags(e).empty=!0;var t,a,o,s,n,r,i,l=""+e._i,c=l.length,u=0;for(i=(o=expandFormat(e._f,e._locale).match(formattingTokens)||[]).length,t=0;t<i;t++)s=o[t],(a=(l.match(getParseRegexForToken(s,e))||[])[0])&&((n=l.substr(0,l.indexOf(a))).length>0&&getParsingFlags(e).unusedInput.push(n),l=l.slice(l.indexOf(a)+a.length),u+=a.length),formatTokenFunctions[s]?(a?getParsingFlags(e).empty=!1:getParsingFlags(e).unusedTokens.push(s),addTimeToArrayFromToken(s,a,e)):e._strict&&!a&&getParsingFlags(e).unusedTokens.push(s);getParsingFlags(e).charsLeftOver=c-u,l.length>0&&getParsingFlags(e).unusedInput.push(l),e._a[HOUR]<=12&&!0===getParsingFlags(e).bigHour&&e._a[HOUR]>0&&(getParsingFlags(e).bigHour=void 0),getParsingFlags(e).parsedDateParts=e._a.slice(0),getParsingFlags(e).meridiem=e._meridiem,e._a[HOUR]=meridiemFixWrap(e._locale,e._a[HOUR],e._meridiem),null!==(r=getParsingFlags(e).era)&&(e._a[YEAR]=e._locale.erasConvertYear(r,e._a[YEAR])),configFromArray(e),checkOverflow(e)}else configFromRFC2822(e);else configFromISO(e)}function meridiemFixWrap(e,t,a){var o;return null==a?t:null!=e.meridiemHour?e.meridiemHour(t,a):null!=e.isPM?((o=e.isPM(a))&&t<12&&(t+=12),o||12!==t||(t=0),t):t}function configFromStringAndArray(e){var t,a,o,s,n,r,i=!1,l=e._f.length;if(0===l)return getParsingFlags(e).invalidFormat=!0,void(e._d=new Date(NaN));for(s=0;s<l;s++)n=0,r=!1,t=copyConfig({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[s],configFromStringAndFormat(t),isValid(t)&&(r=!0),n+=getParsingFlags(t).charsLeftOver,n+=10*getParsingFlags(t).unusedTokens.length,getParsingFlags(t).score=n,i?n<o&&(o=n,a=t):(null==o||n<o||r)&&(o=n,a=t,r&&(i=!0));extend(e,a||t)}function configFromObject(e){if(!e._d){var t=normalizeObjectUnits(e._i),a=void 0===t.day?t.date:t.day;e._a=map([t.year,t.month,a,t.hour,t.minute,t.second,t.millisecond],(function(e){return e&&parseInt(e,10)})),configFromArray(e)}}function createFromConfig(e){var t=new Moment(checkOverflow(prepareConfig(e)));return t._nextDay&&(t.add(1,"d"),t._nextDay=void 0),t}function prepareConfig(e){var t=e._i,a=e._f;return e._locale=e._locale||getLocale(e._l),null===t||void 0===a&&""===t?createInvalid({nullInput:!0}):("string"==typeof t&&(e._i=t=e._locale.preparse(t)),isMoment(t)?new Moment(checkOverflow(t)):(isDate(t)?e._d=t:isArray(a)?configFromStringAndArray(e):a?configFromStringAndFormat(e):configFromInput(e),isValid(e)||(e._d=null),e))}function configFromInput(e){var t=e._i;isUndefined(t)?e._d=new Date(hooks.now()):isDate(t)?e._d=new Date(t.valueOf()):"string"==typeof t?configFromString(e):isArray(t)?(e._a=map(t.slice(0),(function(e){return parseInt(e,10)})),configFromArray(e)):isObject(t)?configFromObject(e):isNumber(t)?e._d=new Date(t):hooks.createFromInputFallback(e)}function createLocalOrUTC(e,t,a,o,s){var n={};return!0!==t&&!1!==t||(o=t,t=void 0),!0!==a&&!1!==a||(o=a,a=void 0),(isObject(e)&&isObjectEmpty(e)||isArray(e)&&0===e.length)&&(e=void 0),n._isAMomentObject=!0,n._useUTC=n._isUTC=s,n._l=a,n._i=e,n._f=t,n._strict=o,createFromConfig(n)}function createLocal(e,t,a,o){return createLocalOrUTC(e,t,a,o,!1)}hooks.createFromInputFallback=deprecate("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",(function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))})),hooks.ISO_8601=function(){},hooks.RFC_2822=function(){};var prototypeMin=deprecate("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var e=createLocal.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:createInvalid()})),prototypeMax=deprecate("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var e=createLocal.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:createInvalid()}));function pickBy(e,t){var a,o;if(1===t.length&&isArray(t[0])&&(t=t[0]),!t.length)return createLocal();for(a=t[0],o=1;o<t.length;++o)t[o].isValid()&&!t[o][e](a)||(a=t[o]);return a}function min(){var e=[].slice.call(arguments,0);return pickBy("isBefore",e)}function max(){var e=[].slice.call(arguments,0);return pickBy("isAfter",e)}var now=function(){return Date.now?Date.now():+new Date},ordering=["year","quarter","month","week","day","hour","minute","second","millisecond"];function isDurationValid(e){var t,a,o=!1,s=ordering.length;for(t in e)if(hasOwnProp(e,t)&&(-1===indexOf.call(ordering,t)||null!=e[t]&&isNaN(e[t])))return!1;for(a=0;a<s;++a)if(e[ordering[a]]){if(o)return!1;parseFloat(e[ordering[a]])!==toInt(e[ordering[a]])&&(o=!0)}return!0}function isValid$1(){return this._isValid}function createInvalid$1(){return createDuration(NaN)}function Duration(e){var t=normalizeObjectUnits(e),a=t.year||0,o=t.quarter||0,s=t.month||0,n=t.week||t.isoWeek||0,r=t.day||0,i=t.hour||0,l=t.minute||0,c=t.second||0,u=t.millisecond||0;this._isValid=isDurationValid(t),this._milliseconds=+u+1e3*c+6e4*l+1e3*i*60*60,this._days=+r+7*n,this._months=+s+3*o+12*a,this._data={},this._locale=getLocale(),this._bubble()}function isDuration(e){return e instanceof Duration}function absRound(e){return e<0?-1*Math.round(-1*e):Math.round(e)}function compareArrays(e,t,a){var o,s=Math.min(e.length,t.length),n=Math.abs(e.length-t.length),r=0;for(o=0;o<s;o++)(a&&e[o]!==t[o]||!a&&toInt(e[o])!==toInt(t[o]))&&r++;return r+n}function offset(e,t){addFormatToken(e,0,0,(function(){var e=this.utcOffset(),a="+";return e<0&&(e=-e,a="-"),a+zeroFill(~~(e/60),2)+t+zeroFill(~~e%60,2)}))}offset("Z",":"),offset("ZZ",""),addRegexToken("Z",matchShortOffset),addRegexToken("ZZ",matchShortOffset),addParseToken(["Z","ZZ"],(function(e,t,a){a._useUTC=!0,a._tzm=offsetFromString(matchShortOffset,e)}));var chunkOffset=/([\+\-]|\d\d)/gi;function offsetFromString(e,t){var a,o,s=(t||"").match(e);return null===s?null:0===(o=60*(a=((s[s.length-1]||[])+"").match(chunkOffset)||["-",0,0])[1]+toInt(a[2]))?0:"+"===a[0]?o:-o}function cloneWithOffset(e,t){var a,o;return t._isUTC?(a=t.clone(),o=(isMoment(e)||isDate(e)?e.valueOf():createLocal(e).valueOf())-a.valueOf(),a._d.setTime(a._d.valueOf()+o),hooks.updateOffset(a,!1),a):createLocal(e).local()}function getDateOffset(e){return-Math.round(e._d.getTimezoneOffset())}function getSetOffset(e,t,a){var o,s=this._offset||0;if(!this.isValid())return null!=e?this:NaN;if(null!=e){if("string"==typeof e){if(null===(e=offsetFromString(matchShortOffset,e)))return this}else Math.abs(e)<16&&!a&&(e*=60);return!this._isUTC&&t&&(o=getDateOffset(this)),this._offset=e,this._isUTC=!0,null!=o&&this.add(o,"m"),s!==e&&(!t||this._changeInProgress?addSubtract(this,createDuration(e-s,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,hooks.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?s:getDateOffset(this)}function getSetZone(e,t){return null!=e?("string"!=typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}function setOffsetToUTC(e){return this.utcOffset(0,e)}function setOffsetToLocal(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(getDateOffset(this),"m")),this}function setOffsetToParsedOffset(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"==typeof this._i){var e=offsetFromString(matchOffset,this._i);null!=e?this.utcOffset(e):this.utcOffset(0,!0)}return this}function hasAlignedHourOffset(e){return!!this.isValid()&&(e=e?createLocal(e).utcOffset():0,(this.utcOffset()-e)%60==0)}function isDaylightSavingTime(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function isDaylightSavingTimeShifted(){if(!isUndefined(this._isDSTShifted))return this._isDSTShifted;var e,t={};return copyConfig(t,this),(t=prepareConfig(t))._a?(e=t._isUTC?createUTC(t._a):createLocal(t._a),this._isDSTShifted=this.isValid()&&compareArrays(t._a,e.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function isLocal(){return!!this.isValid()&&!this._isUTC}function isUtcOffset(){return!!this.isValid()&&this._isUTC}function isUtc(){return!!this.isValid()&&(this._isUTC&&0===this._offset)}hooks.updateOffset=function(){};var aspNetRegex=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,isoRegex=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function createDuration(e,t){var a,o,s,n=e,r=null;return isDuration(e)?n={ms:e._milliseconds,d:e._days,M:e._months}:isNumber(e)||!isNaN(+e)?(n={},t?n[t]=+e:n.milliseconds=+e):(r=aspNetRegex.exec(e))?(a="-"===r[1]?-1:1,n={y:0,d:toInt(r[DATE])*a,h:toInt(r[HOUR])*a,m:toInt(r[MINUTE])*a,s:toInt(r[SECOND])*a,ms:toInt(absRound(1e3*r[MILLISECOND]))*a}):(r=isoRegex.exec(e))?(a="-"===r[1]?-1:1,n={y:parseIso(r[2],a),M:parseIso(r[3],a),w:parseIso(r[4],a),d:parseIso(r[5],a),h:parseIso(r[6],a),m:parseIso(r[7],a),s:parseIso(r[8],a)}):null==n?n={}:"object"==typeof n&&("from"in n||"to"in n)&&(s=momentsDifference(createLocal(n.from),createLocal(n.to)),(n={}).ms=s.milliseconds,n.M=s.months),o=new Duration(n),isDuration(e)&&hasOwnProp(e,"_locale")&&(o._locale=e._locale),isDuration(e)&&hasOwnProp(e,"_isValid")&&(o._isValid=e._isValid),o}function parseIso(e,t){var a=e&&parseFloat(e.replace(",","."));return(isNaN(a)?0:a)*t}function positiveMomentsDifference(e,t){var a={};return a.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(a.months,"M").isAfter(t)&&--a.months,a.milliseconds=+t-+e.clone().add(a.months,"M"),a}function momentsDifference(e,t){var a;return e.isValid()&&t.isValid()?(t=cloneWithOffset(t,e),e.isBefore(t)?a=positiveMomentsDifference(e,t):((a=positiveMomentsDifference(t,e)).milliseconds=-a.milliseconds,a.months=-a.months),a):{milliseconds:0,months:0}}function createAdder(e,t){return function(a,o){var s;return null===o||isNaN(+o)||(deprecateSimple(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),s=a,a=o,o=s),addSubtract(this,createDuration(a,o),e),this}}function addSubtract(e,t,a,o){var s=t._milliseconds,n=absRound(t._days),r=absRound(t._months);e.isValid()&&(o=null==o||o,r&&setMonth(e,get(e,"Month")+r*a),n&&set$1(e,"Date",get(e,"Date")+n*a),s&&e._d.setTime(e._d.valueOf()+s*a),o&&hooks.updateOffset(e,n||r))}createDuration.fn=Duration.prototype,createDuration.invalid=createInvalid$1;var add=createAdder(1,"add"),subtract=createAdder(-1,"subtract");function isString(e){return"string"==typeof e||e instanceof String}function isMomentInput(e){return isMoment(e)||isDate(e)||isString(e)||isNumber(e)||isNumberOrStringArray(e)||isMomentInputObject(e)||null==e}function isMomentInputObject(e){var t,a=isObject(e)&&!isObjectEmpty(e),o=!1,s=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],n=s.length;for(t=0;t<n;t+=1)o=o||hasOwnProp(e,s[t]);return a&&o}function isNumberOrStringArray(e){var t=isArray(e),a=!1;return t&&(a=0===e.filter((function(t){return!isNumber(t)&&isString(e)})).length),t&&a}function isCalendarSpec(e){var t,a=isObject(e)&&!isObjectEmpty(e),o=!1,s=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"];for(t=0;t<s.length;t+=1)o=o||hasOwnProp(e,s[t]);return a&&o}function getCalendarFormat(e,t){var a=e.diff(t,"days",!0);return a<-6?"sameElse":a<-1?"lastWeek":a<0?"lastDay":a<1?"sameDay":a<2?"nextDay":a<7?"nextWeek":"sameElse"}function calendar$1(e,t){1===arguments.length&&(arguments[0]?isMomentInput(arguments[0])?(e=arguments[0],t=void 0):isCalendarSpec(arguments[0])&&(t=arguments[0],e=void 0):(e=void 0,t=void 0));var a=e||createLocal(),o=cloneWithOffset(a,this).startOf("day"),s=hooks.calendarFormat(this,o)||"sameElse",n=t&&(isFunction(t[s])?t[s].call(this,a):t[s]);return this.format(n||this.localeData().calendar(s,this,createLocal(a)))}function clone(){return new Moment(this)}function isAfter(e,t){var a=isMoment(e)?e:createLocal(e);return!(!this.isValid()||!a.isValid())&&("millisecond"===(t=normalizeUnits(t)||"millisecond")?this.valueOf()>a.valueOf():a.valueOf()<this.clone().startOf(t).valueOf())}function isBefore(e,t){var a=isMoment(e)?e:createLocal(e);return!(!this.isValid()||!a.isValid())&&("millisecond"===(t=normalizeUnits(t)||"millisecond")?this.valueOf()<a.valueOf():this.clone().endOf(t).valueOf()<a.valueOf())}function isBetween(e,t,a,o){var s=isMoment(e)?e:createLocal(e),n=isMoment(t)?t:createLocal(t);return!!(this.isValid()&&s.isValid()&&n.isValid())&&(("("===(o=o||"()")[0]?this.isAfter(s,a):!this.isBefore(s,a))&&(")"===o[1]?this.isBefore(n,a):!this.isAfter(n,a)))}function isSame(e,t){var a,o=isMoment(e)?e:createLocal(e);return!(!this.isValid()||!o.isValid())&&("millisecond"===(t=normalizeUnits(t)||"millisecond")?this.valueOf()===o.valueOf():(a=o.valueOf(),this.clone().startOf(t).valueOf()<=a&&a<=this.clone().endOf(t).valueOf()))}function isSameOrAfter(e,t){return this.isSame(e,t)||this.isAfter(e,t)}function isSameOrBefore(e,t){return this.isSame(e,t)||this.isBefore(e,t)}function diff(e,t,a){var o,s,n;if(!this.isValid())return NaN;if(!(o=cloneWithOffset(e,this)).isValid())return NaN;switch(s=6e4*(o.utcOffset()-this.utcOffset()),t=normalizeUnits(t)){case"year":n=monthDiff(this,o)/12;break;case"month":n=monthDiff(this,o);break;case"quarter":n=monthDiff(this,o)/3;break;case"second":n=(this-o)/1e3;break;case"minute":n=(this-o)/6e4;break;case"hour":n=(this-o)/36e5;break;case"day":n=(this-o-s)/864e5;break;case"week":n=(this-o-s)/6048e5;break;default:n=this-o}return a?n:absFloor(n)}function monthDiff(e,t){if(e.date()<t.date())return-monthDiff(t,e);var a=12*(t.year()-e.year())+(t.month()-e.month()),o=e.clone().add(a,"months");return-(a+(t-o<0?(t-o)/(o-e.clone().add(a-1,"months")):(t-o)/(e.clone().add(a+1,"months")-o)))||0}function toString(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function toISOString(e){if(!this.isValid())return null;var t=!0!==e,a=t?this.clone().utc():this;return a.year()<0||a.year()>9999?formatMoment(a,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):isFunction(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",formatMoment(a,"Z")):formatMoment(a,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function inspect(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e,t,a,o="moment",s="";return this.isLocal()||(o=0===this.utcOffset()?"moment.utc":"moment.parseZone",s="Z"),e="["+o+'("]',t=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY","-MM-DD[T]HH:mm:ss.SSS",a=s+'[")]',this.format(e+t+"-MM-DD[T]HH:mm:ss.SSS"+a)}function format(e){e||(e=this.isUtc()?hooks.defaultFormatUtc:hooks.defaultFormat);var t=formatMoment(this,e);return this.localeData().postformat(t)}function from(e,t){return this.isValid()&&(isMoment(e)&&e.isValid()||createLocal(e).isValid())?createDuration({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function fromNow(e){return this.from(createLocal(),e)}function to(e,t){return this.isValid()&&(isMoment(e)&&e.isValid()||createLocal(e).isValid())?createDuration({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function toNow(e){return this.to(createLocal(),e)}function locale(e){var t;return void 0===e?this._locale._abbr:(null!=(t=getLocale(e))&&(this._locale=t),this)}hooks.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",hooks.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var lang=deprecate("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",(function(e){return void 0===e?this.localeData():this.locale(e)}));function localeData(){return this._locale}var MS_PER_SECOND=1e3,MS_PER_MINUTE=60*MS_PER_SECOND,MS_PER_HOUR=60*MS_PER_MINUTE,MS_PER_400_YEARS=3506328*MS_PER_HOUR;function mod$1(e,t){return(e%t+t)%t}function localStartOfDate(e,t,a){return e<100&&e>=0?new Date(e+400,t,a)-MS_PER_400_YEARS:new Date(e,t,a).valueOf()}function utcStartOfDate(e,t,a){return e<100&&e>=0?Date.UTC(e+400,t,a)-MS_PER_400_YEARS:Date.UTC(e,t,a)}function startOf(e){var t,a;if(void 0===(e=normalizeUnits(e))||"millisecond"===e||!this.isValid())return this;switch(a=this._isUTC?utcStartOfDate:localStartOfDate,e){case"year":t=a(this.year(),0,1);break;case"quarter":t=a(this.year(),this.month()-this.month()%3,1);break;case"month":t=a(this.year(),this.month(),1);break;case"week":t=a(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":t=a(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":t=a(this.year(),this.month(),this.date());break;case"hour":t=this._d.valueOf(),t-=mod$1(t+(this._isUTC?0:this.utcOffset()*MS_PER_MINUTE),MS_PER_HOUR);break;case"minute":t=this._d.valueOf(),t-=mod$1(t,MS_PER_MINUTE);break;case"second":t=this._d.valueOf(),t-=mod$1(t,MS_PER_SECOND)}return this._d.setTime(t),hooks.updateOffset(this,!0),this}function endOf(e){var t,a;if(void 0===(e=normalizeUnits(e))||"millisecond"===e||!this.isValid())return this;switch(a=this._isUTC?utcStartOfDate:localStartOfDate,e){case"year":t=a(this.year()+1,0,1)-1;break;case"quarter":t=a(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":t=a(this.year(),this.month()+1,1)-1;break;case"week":t=a(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":t=a(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":t=a(this.year(),this.month(),this.date()+1)-1;break;case"hour":t=this._d.valueOf(),t+=MS_PER_HOUR-mod$1(t+(this._isUTC?0:this.utcOffset()*MS_PER_MINUTE),MS_PER_HOUR)-1;break;case"minute":t=this._d.valueOf(),t+=MS_PER_MINUTE-mod$1(t,MS_PER_MINUTE)-1;break;case"second":t=this._d.valueOf(),t+=MS_PER_SECOND-mod$1(t,MS_PER_SECOND)-1}return this._d.setTime(t),hooks.updateOffset(this,!0),this}function valueOf(){return this._d.valueOf()-6e4*(this._offset||0)}function unix(){return Math.floor(this.valueOf()/1e3)}function toDate(){return new Date(this.valueOf())}function toArray(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function toObject(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function toJSON(){return this.isValid()?this.toISOString():null}function isValid$2(){return isValid(this)}function parsingFlags(){return extend({},getParsingFlags(this))}function invalidAt(){return getParsingFlags(this).overflow}function creationData(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}function localeEras(e,t){var a,o,s,n=this._eras||getLocale("en")._eras;for(a=0,o=n.length;a<o;++a){if("string"==typeof n[a].since)s=hooks(n[a].since).startOf("day"),n[a].since=s.valueOf();switch(typeof n[a].until){case"undefined":n[a].until=1/0;break;case"string":s=hooks(n[a].until).startOf("day").valueOf(),n[a].until=s.valueOf()}}return n}function localeErasParse(e,t,a){var o,s,n,r,i,l=this.eras();for(e=e.toUpperCase(),o=0,s=l.length;o<s;++o)if(n=l[o].name.toUpperCase(),r=l[o].abbr.toUpperCase(),i=l[o].narrow.toUpperCase(),a)switch(t){case"N":case"NN":case"NNN":if(r===e)return l[o];break;case"NNNN":if(n===e)return l[o];break;case"NNNNN":if(i===e)return l[o]}else if([n,r,i].indexOf(e)>=0)return l[o]}function localeErasConvertYear(e,t){var a=e.since<=e.until?1:-1;return void 0===t?hooks(e.since).year():hooks(e.since).year()+(t-e.offset)*a}function getEraName(){var e,t,a,o=this.localeData().eras();for(e=0,t=o.length;e<t;++e){if(a=this.clone().startOf("day").valueOf(),o[e].since<=a&&a<=o[e].until)return o[e].name;if(o[e].until<=a&&a<=o[e].since)return o[e].name}return""}function getEraNarrow(){var e,t,a,o=this.localeData().eras();for(e=0,t=o.length;e<t;++e){if(a=this.clone().startOf("day").valueOf(),o[e].since<=a&&a<=o[e].until)return o[e].narrow;if(o[e].until<=a&&a<=o[e].since)return o[e].narrow}return""}function getEraAbbr(){var e,t,a,o=this.localeData().eras();for(e=0,t=o.length;e<t;++e){if(a=this.clone().startOf("day").valueOf(),o[e].since<=a&&a<=o[e].until)return o[e].abbr;if(o[e].until<=a&&a<=o[e].since)return o[e].abbr}return""}function getEraYear(){var e,t,a,o,s=this.localeData().eras();for(e=0,t=s.length;e<t;++e)if(a=s[e].since<=s[e].until?1:-1,o=this.clone().startOf("day").valueOf(),s[e].since<=o&&o<=s[e].until||s[e].until<=o&&o<=s[e].since)return(this.year()-hooks(s[e].since).year())*a+s[e].offset;return this.year()}function erasNameRegex(e){return hasOwnProp(this,"_erasNameRegex")||computeErasParse.call(this),e?this._erasNameRegex:this._erasRegex}function erasAbbrRegex(e){return hasOwnProp(this,"_erasAbbrRegex")||computeErasParse.call(this),e?this._erasAbbrRegex:this._erasRegex}function erasNarrowRegex(e){return hasOwnProp(this,"_erasNarrowRegex")||computeErasParse.call(this),e?this._erasNarrowRegex:this._erasRegex}function matchEraAbbr(e,t){return t.erasAbbrRegex(e)}function matchEraName(e,t){return t.erasNameRegex(e)}function matchEraNarrow(e,t){return t.erasNarrowRegex(e)}function matchEraYearOrdinal(e,t){return t._eraYearOrdinalRegex||matchUnsigned}function computeErasParse(){var e,t,a=[],o=[],s=[],n=[],r=this.eras();for(e=0,t=r.length;e<t;++e)o.push(regexEscape(r[e].name)),a.push(regexEscape(r[e].abbr)),s.push(regexEscape(r[e].narrow)),n.push(regexEscape(r[e].name)),n.push(regexEscape(r[e].abbr)),n.push(regexEscape(r[e].narrow));this._erasRegex=new RegExp("^("+n.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+o.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+a.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+s.join("|")+")","i")}function addWeekYearFormatToken(e,t){addFormatToken(0,[e,e.length],0,t)}function getSetWeekYear(e){return getSetWeekYearHelper.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function getSetISOWeekYear(e){return getSetWeekYearHelper.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function getISOWeeksInYear(){return weeksInYear(this.year(),1,4)}function getISOWeeksInISOWeekYear(){return weeksInYear(this.isoWeekYear(),1,4)}function getWeeksInYear(){var e=this.localeData()._week;return weeksInYear(this.year(),e.dow,e.doy)}function getWeeksInWeekYear(){var e=this.localeData()._week;return weeksInYear(this.weekYear(),e.dow,e.doy)}function getSetWeekYearHelper(e,t,a,o,s){var n;return null==e?weekOfYear(this,o,s).year:(t>(n=weeksInYear(e,o,s))&&(t=n),setWeekAll.call(this,e,t,a,o,s))}function setWeekAll(e,t,a,o,s){var n=dayOfYearFromWeeks(e,t,a,o,s),r=createUTCDate(n.year,0,n.dayOfYear);return this.year(r.getUTCFullYear()),this.month(r.getUTCMonth()),this.date(r.getUTCDate()),this}function getSetQuarter(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)}addFormatToken("N",0,0,"eraAbbr"),addFormatToken("NN",0,0,"eraAbbr"),addFormatToken("NNN",0,0,"eraAbbr"),addFormatToken("NNNN",0,0,"eraName"),addFormatToken("NNNNN",0,0,"eraNarrow"),addFormatToken("y",["y",1],"yo","eraYear"),addFormatToken("y",["yy",2],0,"eraYear"),addFormatToken("y",["yyy",3],0,"eraYear"),addFormatToken("y",["yyyy",4],0,"eraYear"),addRegexToken("N",matchEraAbbr),addRegexToken("NN",matchEraAbbr),addRegexToken("NNN",matchEraAbbr),addRegexToken("NNNN",matchEraName),addRegexToken("NNNNN",matchEraNarrow),addParseToken(["N","NN","NNN","NNNN","NNNNN"],(function(e,t,a,o){var s=a._locale.erasParse(e,o,a._strict);s?getParsingFlags(a).era=s:getParsingFlags(a).invalidEra=e})),addRegexToken("y",matchUnsigned),addRegexToken("yy",matchUnsigned),addRegexToken("yyy",matchUnsigned),addRegexToken("yyyy",matchUnsigned),addRegexToken("yo",matchEraYearOrdinal),addParseToken(["y","yy","yyy","yyyy"],YEAR),addParseToken(["yo"],(function(e,t,a,o){var s;a._locale._eraYearOrdinalRegex&&(s=e.match(a._locale._eraYearOrdinalRegex)),a._locale.eraYearOrdinalParse?t[YEAR]=a._locale.eraYearOrdinalParse(e,s):t[YEAR]=parseInt(e,10)})),addFormatToken(0,["gg",2],0,(function(){return this.weekYear()%100})),addFormatToken(0,["GG",2],0,(function(){return this.isoWeekYear()%100})),addWeekYearFormatToken("gggg","weekYear"),addWeekYearFormatToken("ggggg","weekYear"),addWeekYearFormatToken("GGGG","isoWeekYear"),addWeekYearFormatToken("GGGGG","isoWeekYear"),addUnitAlias("weekYear","gg"),addUnitAlias("isoWeekYear","GG"),addUnitPriority("weekYear",1),addUnitPriority("isoWeekYear",1),addRegexToken("G",matchSigned),addRegexToken("g",matchSigned),addRegexToken("GG",match1to2,match2),addRegexToken("gg",match1to2,match2),addRegexToken("GGGG",match1to4,match4),addRegexToken("gggg",match1to4,match4),addRegexToken("GGGGG",match1to6,match6),addRegexToken("ggggg",match1to6,match6),addWeekParseToken(["gggg","ggggg","GGGG","GGGGG"],(function(e,t,a,o){t[o.substr(0,2)]=toInt(e)})),addWeekParseToken(["gg","GG"],(function(e,t,a,o){t[o]=hooks.parseTwoDigitYear(e)})),addFormatToken("Q",0,"Qo","quarter"),addUnitAlias("quarter","Q"),addUnitPriority("quarter",7),addRegexToken("Q",match1),addParseToken("Q",(function(e,t){t[MONTH]=3*(toInt(e)-1)})),addFormatToken("D",["DD",2],"Do","date"),addUnitAlias("date","D"),addUnitPriority("date",9),addRegexToken("D",match1to2),addRegexToken("DD",match1to2,match2),addRegexToken("Do",(function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient})),addParseToken(["D","DD"],DATE),addParseToken("Do",(function(e,t){t[DATE]=toInt(e.match(match1to2)[0])}));var getSetDayOfMonth=makeGetSet("Date",!0);function getSetDayOfYear(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")}addFormatToken("DDD",["DDDD",3],"DDDo","dayOfYear"),addUnitAlias("dayOfYear","DDD"),addUnitPriority("dayOfYear",4),addRegexToken("DDD",match1to3),addRegexToken("DDDD",match3),addParseToken(["DDD","DDDD"],(function(e,t,a){a._dayOfYear=toInt(e)})),addFormatToken("m",["mm",2],0,"minute"),addUnitAlias("minute","m"),addUnitPriority("minute",14),addRegexToken("m",match1to2),addRegexToken("mm",match1to2,match2),addParseToken(["m","mm"],MINUTE);var getSetMinute=makeGetSet("Minutes",!1);addFormatToken("s",["ss",2],0,"second"),addUnitAlias("second","s"),addUnitPriority("second",15),addRegexToken("s",match1to2),addRegexToken("ss",match1to2,match2),addParseToken(["s","ss"],SECOND);var getSetSecond=makeGetSet("Seconds",!1),token,getSetMillisecond;for(addFormatToken("S",0,0,(function(){return~~(this.millisecond()/100)})),addFormatToken(0,["SS",2],0,(function(){return~~(this.millisecond()/10)})),addFormatToken(0,["SSS",3],0,"millisecond"),addFormatToken(0,["SSSS",4],0,(function(){return 10*this.millisecond()})),addFormatToken(0,["SSSSS",5],0,(function(){return 100*this.millisecond()})),addFormatToken(0,["SSSSSS",6],0,(function(){return 1e3*this.millisecond()})),addFormatToken(0,["SSSSSSS",7],0,(function(){return 1e4*this.millisecond()})),addFormatToken(0,["SSSSSSSS",8],0,(function(){return 1e5*this.millisecond()})),addFormatToken(0,["SSSSSSSSS",9],0,(function(){return 1e6*this.millisecond()})),addUnitAlias("millisecond","ms"),addUnitPriority("millisecond",16),addRegexToken("S",match1to3,match1),addRegexToken("SS",match1to3,match2),addRegexToken("SSS",match1to3,match3),token="SSSS";token.length<=9;token+="S")addRegexToken(token,matchUnsigned);function parseMs(e,t){t[MILLISECOND]=toInt(1e3*("0."+e))}for(token="S";token.length<=9;token+="S")addParseToken(token,parseMs);function getZoneAbbr(){return this._isUTC?"UTC":""}function getZoneName(){return this._isUTC?"Coordinated Universal Time":""}getSetMillisecond=makeGetSet("Milliseconds",!1),addFormatToken("z",0,0,"zoneAbbr"),addFormatToken("zz",0,0,"zoneName");var proto=Moment.prototype;function createUnix(e){return createLocal(1e3*e)}function createInZone(){return createLocal.apply(null,arguments).parseZone()}function preParsePostFormat(e){return e}proto.add=add,proto.calendar=calendar$1,proto.clone=clone,proto.diff=diff,proto.endOf=endOf,proto.format=format,proto.from=from,proto.fromNow=fromNow,proto.to=to,proto.toNow=toNow,proto.get=stringGet,proto.invalidAt=invalidAt,proto.isAfter=isAfter,proto.isBefore=isBefore,proto.isBetween=isBetween,proto.isSame=isSame,proto.isSameOrAfter=isSameOrAfter,proto.isSameOrBefore=isSameOrBefore,proto.isValid=isValid$2,proto.lang=lang,proto.locale=locale,proto.localeData=localeData,proto.max=prototypeMax,proto.min=prototypeMin,proto.parsingFlags=parsingFlags,proto.set=stringSet,proto.startOf=startOf,proto.subtract=subtract,proto.toArray=toArray,proto.toObject=toObject,proto.toDate=toDate,proto.toISOString=toISOString,proto.inspect=inspect,"undefined"!=typeof Symbol&&null!=Symbol.for&&(proto[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),proto.toJSON=toJSON,proto.toString=toString,proto.unix=unix,proto.valueOf=valueOf,proto.creationData=creationData,proto.eraName=getEraName,proto.eraNarrow=getEraNarrow,proto.eraAbbr=getEraAbbr,proto.eraYear=getEraYear,proto.year=getSetYear,proto.isLeapYear=getIsLeapYear,proto.weekYear=getSetWeekYear,proto.isoWeekYear=getSetISOWeekYear,proto.quarter=proto.quarters=getSetQuarter,proto.month=getSetMonth,proto.daysInMonth=getDaysInMonth,proto.week=proto.weeks=getSetWeek,proto.isoWeek=proto.isoWeeks=getSetISOWeek,proto.weeksInYear=getWeeksInYear,proto.weeksInWeekYear=getWeeksInWeekYear,proto.isoWeeksInYear=getISOWeeksInYear,proto.isoWeeksInISOWeekYear=getISOWeeksInISOWeekYear,proto.date=getSetDayOfMonth,proto.day=proto.days=getSetDayOfWeek,proto.weekday=getSetLocaleDayOfWeek,proto.isoWeekday=getSetISODayOfWeek,proto.dayOfYear=getSetDayOfYear,proto.hour=proto.hours=getSetHour,proto.minute=proto.minutes=getSetMinute,proto.second=proto.seconds=getSetSecond,proto.millisecond=proto.milliseconds=getSetMillisecond,proto.utcOffset=getSetOffset,proto.utc=setOffsetToUTC,proto.local=setOffsetToLocal,proto.parseZone=setOffsetToParsedOffset,proto.hasAlignedHourOffset=hasAlignedHourOffset,proto.isDST=isDaylightSavingTime,proto.isLocal=isLocal,proto.isUtcOffset=isUtcOffset,proto.isUtc=isUtc,proto.isUTC=isUtc,proto.zoneAbbr=getZoneAbbr,proto.zoneName=getZoneName,proto.dates=deprecate("dates accessor is deprecated. Use date instead.",getSetDayOfMonth),proto.months=deprecate("months accessor is deprecated. Use month instead",getSetMonth),proto.years=deprecate("years accessor is deprecated. Use year instead",getSetYear),proto.zone=deprecate("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",getSetZone),proto.isDSTShifted=deprecate("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",isDaylightSavingTimeShifted);var proto$1=Locale.prototype;function get$1(e,t,a,o){var s=getLocale(),n=createUTC().set(o,t);return s[a](n,e)}function listMonthsImpl(e,t,a){if(isNumber(e)&&(t=e,e=void 0),e=e||"",null!=t)return get$1(e,t,a,"month");var o,s=[];for(o=0;o<12;o++)s[o]=get$1(e,o,a,"month");return s}function listWeekdaysImpl(e,t,a,o){"boolean"==typeof e?(isNumber(t)&&(a=t,t=void 0),t=t||""):(a=t=e,e=!1,isNumber(t)&&(a=t,t=void 0),t=t||"");var s,n=getLocale(),r=e?n._week.dow:0,i=[];if(null!=a)return get$1(t,(a+r)%7,o,"day");for(s=0;s<7;s++)i[s]=get$1(t,(s+r)%7,o,"day");return i}function listMonths(e,t){return listMonthsImpl(e,t,"months")}function listMonthsShort(e,t){return listMonthsImpl(e,t,"monthsShort")}function listWeekdays(e,t,a){return listWeekdaysImpl(e,t,a,"weekdays")}function listWeekdaysShort(e,t,a){return listWeekdaysImpl(e,t,a,"weekdaysShort")}function listWeekdaysMin(e,t,a){return listWeekdaysImpl(e,t,a,"weekdaysMin")}proto$1.calendar=calendar,proto$1.longDateFormat=longDateFormat,proto$1.invalidDate=invalidDate,proto$1.ordinal=ordinal,proto$1.preparse=preParsePostFormat,proto$1.postformat=preParsePostFormat,proto$1.relativeTime=relativeTime,proto$1.pastFuture=pastFuture,proto$1.set=set,proto$1.eras=localeEras,proto$1.erasParse=localeErasParse,proto$1.erasConvertYear=localeErasConvertYear,proto$1.erasAbbrRegex=erasAbbrRegex,proto$1.erasNameRegex=erasNameRegex,proto$1.erasNarrowRegex=erasNarrowRegex,proto$1.months=localeMonths,proto$1.monthsShort=localeMonthsShort,proto$1.monthsParse=localeMonthsParse,proto$1.monthsRegex=monthsRegex,proto$1.monthsShortRegex=monthsShortRegex,proto$1.week=localeWeek,proto$1.firstDayOfYear=localeFirstDayOfYear,proto$1.firstDayOfWeek=localeFirstDayOfWeek,proto$1.weekdays=localeWeekdays,proto$1.weekdaysMin=localeWeekdaysMin,proto$1.weekdaysShort=localeWeekdaysShort,proto$1.weekdaysParse=localeWeekdaysParse,proto$1.weekdaysRegex=weekdaysRegex,proto$1.weekdaysShortRegex=weekdaysShortRegex,proto$1.weekdaysMinRegex=weekdaysMinRegex,proto$1.isPM=localeIsPM,proto$1.meridiem=localeMeridiem,getSetGlobalLocale("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10;return e+(1===toInt(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")}}),hooks.lang=deprecate("moment.lang is deprecated. Use moment.locale instead.",getSetGlobalLocale),hooks.langData=deprecate("moment.langData is deprecated. Use moment.localeData instead.",getLocale);var mathAbs=Math.abs;function abs(){var e=this._data;return this._milliseconds=mathAbs(this._milliseconds),this._days=mathAbs(this._days),this._months=mathAbs(this._months),e.milliseconds=mathAbs(e.milliseconds),e.seconds=mathAbs(e.seconds),e.minutes=mathAbs(e.minutes),e.hours=mathAbs(e.hours),e.months=mathAbs(e.months),e.years=mathAbs(e.years),this}function addSubtract$1(e,t,a,o){var s=createDuration(t,a);return e._milliseconds+=o*s._milliseconds,e._days+=o*s._days,e._months+=o*s._months,e._bubble()}function add$1(e,t){return addSubtract$1(this,e,t,1)}function subtract$1(e,t){return addSubtract$1(this,e,t,-1)}function absCeil(e){return e<0?Math.floor(e):Math.ceil(e)}function bubble(){var e,t,a,o,s,n=this._milliseconds,r=this._days,i=this._months,l=this._data;return n>=0&&r>=0&&i>=0||n<=0&&r<=0&&i<=0||(n+=864e5*absCeil(monthsToDays(i)+r),r=0,i=0),l.milliseconds=n%1e3,e=absFloor(n/1e3),l.seconds=e%60,t=absFloor(e/60),l.minutes=t%60,a=absFloor(t/60),l.hours=a%24,r+=absFloor(a/24),i+=s=absFloor(daysToMonths(r)),r-=absCeil(monthsToDays(s)),o=absFloor(i/12),i%=12,l.days=r,l.months=i,l.years=o,this}function daysToMonths(e){return 4800*e/146097}function monthsToDays(e){return 146097*e/4800}function as(e){if(!this.isValid())return NaN;var t,a,o=this._milliseconds;if("month"===(e=normalizeUnits(e))||"quarter"===e||"year"===e)switch(t=this._days+o/864e5,a=this._months+daysToMonths(t),e){case"month":return a;case"quarter":return a/3;case"year":return a/12}else switch(t=this._days+Math.round(monthsToDays(this._months)),e){case"week":return t/7+o/6048e5;case"day":return t+o/864e5;case"hour":return 24*t+o/36e5;case"minute":return 1440*t+o/6e4;case"second":return 86400*t+o/1e3;case"millisecond":return Math.floor(864e5*t)+o;default:throw new Error("Unknown unit "+e)}}function valueOf$1(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*toInt(this._months/12):NaN}function makeAs(e){return function(){return this.as(e)}}var asMilliseconds=makeAs("ms"),asSeconds=makeAs("s"),asMinutes=makeAs("m"),asHours=makeAs("h"),asDays=makeAs("d"),asWeeks=makeAs("w"),asMonths=makeAs("M"),asQuarters=makeAs("Q"),asYears=makeAs("y");function clone$1(){return createDuration(this)}function get$2(e){return e=normalizeUnits(e),this.isValid()?this[e+"s"]():NaN}function makeGetter(e){return function(){return this.isValid()?this._data[e]:NaN}}var milliseconds=makeGetter("milliseconds"),seconds=makeGetter("seconds"),minutes=makeGetter("minutes"),hours=makeGetter("hours"),days=makeGetter("days"),months=makeGetter("months"),years=makeGetter("years");function weeks(){return absFloor(this.days()/7)}var round=Math.round,thresholds={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function substituteTimeAgo(e,t,a,o,s){return s.relativeTime(t||1,!!a,e,o)}function relativeTime$1(e,t,a,o){var s=createDuration(e).abs(),n=round(s.as("s")),r=round(s.as("m")),i=round(s.as("h")),l=round(s.as("d")),c=round(s.as("M")),u=round(s.as("w")),d=round(s.as("y")),m=n<=a.ss&&["s",n]||n<a.s&&["ss",n]||r<=1&&["m"]||r<a.m&&["mm",r]||i<=1&&["h"]||i<a.h&&["hh",i]||l<=1&&["d"]||l<a.d&&["dd",l];return null!=a.w&&(m=m||u<=1&&["w"]||u<a.w&&["ww",u]),(m=m||c<=1&&["M"]||c<a.M&&["MM",c]||d<=1&&["y"]||["yy",d])[2]=t,m[3]=+e>0,m[4]=o,substituteTimeAgo.apply(null,m)}function getSetRelativeTimeRounding(e){return void 0===e?round:"function"==typeof e&&(round=e,!0)}function getSetRelativeTimeThreshold(e,t){return void 0!==thresholds[e]&&(void 0===t?thresholds[e]:(thresholds[e]=t,"s"===e&&(thresholds.ss=t-1),!0))}function humanize(e,t){if(!this.isValid())return this.localeData().invalidDate();var a,o,s=!1,n=thresholds;return"object"==typeof e&&(t=e,e=!1),"boolean"==typeof e&&(s=e),"object"==typeof t&&(n=Object.assign({},thresholds,t),null!=t.s&&null==t.ss&&(n.ss=t.s-1)),o=relativeTime$1(this,!s,n,a=this.localeData()),s&&(o=a.pastFuture(+this,o)),a.postformat(o)}var abs$1=Math.abs;function sign(e){return(e>0)-(e<0)||+e}function toISOString$1(){if(!this.isValid())return this.localeData().invalidDate();var e,t,a,o,s,n,r,i,l=abs$1(this._milliseconds)/1e3,c=abs$1(this._days),u=abs$1(this._months),d=this.asSeconds();return d?(e=absFloor(l/60),t=absFloor(e/60),l%=60,e%=60,a=absFloor(u/12),u%=12,o=l?l.toFixed(3).replace(/\.?0+$/,""):"",s=d<0?"-":"",n=sign(this._months)!==sign(d)?"-":"",r=sign(this._days)!==sign(d)?"-":"",i=sign(this._milliseconds)!==sign(d)?"-":"",s+"P"+(a?n+a+"Y":"")+(u?n+u+"M":"")+(c?r+c+"D":"")+(t||e||l?"T":"")+(t?i+t+"H":"")+(e?i+e+"M":"")+(l?i+o+"S":"")):"P0D"}var proto$2=Duration.prototype;proto$2.isValid=isValid$1,proto$2.abs=abs,proto$2.add=add$1,proto$2.subtract=subtract$1,proto$2.as=as,proto$2.asMilliseconds=asMilliseconds,proto$2.asSeconds=asSeconds,proto$2.asMinutes=asMinutes,proto$2.asHours=asHours,proto$2.asDays=asDays,proto$2.asWeeks=asWeeks,proto$2.asMonths=asMonths,proto$2.asQuarters=asQuarters,proto$2.asYears=asYears,proto$2.valueOf=valueOf$1,proto$2._bubble=bubble,proto$2.clone=clone$1,proto$2.get=get$2,proto$2.milliseconds=milliseconds,proto$2.seconds=seconds,proto$2.minutes=minutes,proto$2.hours=hours,proto$2.days=days,proto$2.weeks=weeks,proto$2.months=months,proto$2.years=years,proto$2.humanize=humanize,proto$2.toISOString=toISOString$1,proto$2.toString=toISOString$1,proto$2.toJSON=toISOString$1,proto$2.locale=locale,proto$2.localeData=localeData,proto$2.toIsoString=deprecate("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",toISOString$1),proto$2.lang=lang,addFormatToken("X",0,0,"unix"),addFormatToken("x",0,0,"valueOf"),addRegexToken("x",matchSigned),addRegexToken("X",matchTimestamp),addParseToken("X",(function(e,t,a){a._d=new Date(1e3*parseFloat(e))})),addParseToken("x",(function(e,t,a){a._d=new Date(toInt(e))})),
//! moment.js
hooks.version="2.29.4",setHookCallback(createLocal),hooks.fn=proto,hooks.min=min,hooks.max=max,hooks.now=now,hooks.utc=createUTC,hooks.unix=createUnix,hooks.months=listMonths,hooks.isDate=isDate,hooks.locale=getSetGlobalLocale,hooks.invalid=createInvalid,hooks.duration=createDuration,hooks.isMoment=isMoment,hooks.weekdays=listWeekdays,hooks.parseZone=createInZone,hooks.localeData=getLocale,hooks.isDuration=isDuration,hooks.monthsShort=listMonthsShort,hooks.weekdaysMin=listWeekdaysMin,hooks.defineLocale=defineLocale,hooks.updateLocale=updateLocale,hooks.locales=listLocales,hooks.weekdaysShort=listWeekdaysShort,hooks.normalizeUnits=normalizeUnits,hooks.relativeTimeRounding=getSetRelativeTimeRounding,hooks.relativeTimeThreshold=getSetRelativeTimeThreshold,hooks.calendarFormat=getCalendarFormat,hooks.prototype=proto,hooks.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"};const _sfc_main$g={__name:"comment",setup(e){const t=wx.cloud.database(),a=vue.ref(!0);vue.watch(comment_show,(e=>{e.show&&2==e.num&&(i.goods_id=e.goods_id,o(e.goods_id))}));const o=async(e,o=0)=>{const n=await t.collection("video_comment").where({goods_id:e}).limit(10).skip(o).get();s.commentData=0==o?n.data:[...s.commentData,...n.data],a.value=!1},s=vue.reactive({content:"",commentData:[]}),{content:n,commentData:r}=vue.toRefs(s),i=vue.reactive({goods_id:""}),l=async()=>{if(!s.content.trim())return;const e=wx.getStorageSync("user_info");if(!e)return void(login_user.show=!0);let a=hooks().utcOffset(8).format("YYYY-MM-DD");const o={avatarurl:e.avatarUrl,nickname:e.nickName,time:a,content:s.content,goods_id:i.goods_id};try{await t.collection("video_comment").add({data:o}),s.content="",s.commentData.unshift(o),(new Public).toast("评论成功")}catch(n){(new Public).toast("评论失败")}},c=vue.ref(!1);let u=vue.ref(0);const d=async e=>{if(s.commentData.length<10)return!1;c.value=!0,u.value++;let t=10*u.value;await o(i.goods_id,t),c.value=!1};return(e,t)=>{const o=vue.resolveComponent("page-container");return vue.openBlock(),vue.createBlock(o,{show:vue.unref(comment_show).show,bindenter:"onEnter"},{default:vue.withCtx((()=>[vue.createElementVNode("view",{class:"space-view"},[vue.createElementVNode("view",{class:"chacha",onClick:t[0]||(t[0]=e=>vue.unref(comment_show).show=!1)},[vue.createElementVNode("image",{src:"/static/detail/guanbi.svg",mode:"aspectFit"})]),vue.createElementVNode("scroll-view",{onScrolltolower:d,"scroll-y":"true","show-scrollbar":!1,enhanced:!0,class:"scroll-hi"},[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(vue.unref(r),((e,t)=>(vue.openBlock(),vue.createElementBlock("view",{class:"messages-views",key:t},[vue.createElementVNode("view",{class:"messages-name"},[vue.createElementVNode("image",{src:e.avatarurl,mode:""},null,8,["src"]),vue.createElementVNode("view",{class:"nickname"},vue.toDisplayString(e.nickname),1),vue.createElementVNode("view",{class:"times"},vue.toDisplayString(e.time),1)]),vue.createElementVNode("view",{class:"messages-title"},vue.toDisplayString(e.content),1)])))),128)),0==vue.unref(r).length?(vue.openBlock(),vue.createElementBlock("view",{key:0,class:"Tips"},[a.value?(vue.openBlock(),vue.createElementBlock("text",{key:0},"加载中...")):(vue.openBlock(),vue.createElementBlock("text",{key:1},"暂无评论"))])):vue.createCommentVNode("",!0),vue.createElementVNode("view",{class:"loading-hei"},[vue.withDirectives(vue.createVNode(Loading,null,null,512),[[vue.vShow,c.value]])]),vue.createElementVNode("view",{class:"",style:{height:"150rpx"}})],32),vue.createElementVNode("view",{class:"Comment-box"},[vue.createElementVNode("view",{class:"Comment-box-input"},[vue.withDirectives(vue.createElementVNode("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>vue.isRef(n)?n.value=e:null),type:"text",placeholder:"留下你的评论","confirm-type":"send","cursor-spacing":"50"},null,512),[[vue.vModelText,vue.unref(n)]])]),vue.createElementVNode("view",{class:"send-out",onClick:l}," 发送 ")])])])),_:1},8,["show"])}}};var Comment=_export_sfc(_sfc_main$g,[["__scopeId","data-v-77ed886a"]]);const _sfc_main$f={__name:"video",setup(e){const t=wx.cloud.database(),a=vue.reactive({v_height:0,v_top:0,winHeight:0,videoPlay:{},showbtn:!1}),{v_height:o,v_top:s,winHeight:n,showbtn:r}=vue.toRefs(a);vue.onMounted((()=>{const e=wx.getMenuButtonBoundingClientRect();a.v_height=e.height,a.v_top=e.top,a.winHeight=wx.getSystemInfoSync().screenHeight,a.videoPlay=wx.createVideoContext("myVideo")}));const i=()=>{a.showbtn=!1,a.videoPlay.play()},l=()=>{a.showbtn=!a.showbtn,a.showbtn?a.videoPlay.pause():a.videoPlay.play()},c=vue.reactive({goods_id:"",videoData:{},total:0,collection:0,logCollection:0}),{videoData:u,total:d,collection:m}=vue.toRefs(c);onLoad((async e=>{comment_show.num=1;const a=wx.getStorageSync("user_info");c.goods_id=e.goods_id;const o=await t.collection("goodsInfo").doc(e.goods_id).field({video_url:!0,goods_cover:!0,goods_title:!0,goods_price:!0,seckill:!0}).get(),s=await t.collection("video_comment").where({goods_id:e.goods_id}).count(),n=await t.collection("collect_goods").where({goods_id:e.goods_id}).get();Promise.all([o,s,n]).then((async o=>{if(c.videoData=o[0].data,c.total=o[1].total,c.collection=a?o[2].data.length:0,c.logCollection=o[2].data.length,o[0].data.seckill){const a=await t.collection("seckill").where({goods_id:e.goods_id}).field({price_spike:!0}).get();c.videoData.goods_price=a.data[0].price_spike}})).catch((e=>{formatAppLog("log","at pages/short-video/video.vue:148",e)}))})),vue.watch((()=>login_user.response),(e=>{c.collection=c.logCollection}));const v=async()=>{if(wx.getStorageSync("user_info"))try{await t.collection("collect_goods").add({data:{goods_id:c.goods_id}}),c.collection++}catch(e){(new Public).toast("收藏失败")}else login_user.show=!0},h=async()=>{if(wx.getStorageSync("user_info"))try{await t.collection("collect_goods").where({goods_id:c.goods_id}).remove(),c.collection=0}catch(e){(new Public).toast("取消收藏失败")}else login_user.show=!0},g=()=>{comment_show.show=!0,comment_show.num++,comment_show.goods_id=c.goods_id};onShareAppMessage((()=>({title:c.videoData.goods_title,path:`/pages/short-video/video?goods_id=${c.goods_id}`,imageUrl:c.videoData.goods_cover})));const f=()=>{wx.navigateBack({delta:1})},p=()=>{wx.navigateTo({url:"/pages/product-details/detail?goods_id="+c.goods_id})};return(e,t)=>(vue.openBlock(),vue.createElementBlock(vue.Fragment,null,[vue.createElementVNode("view",{class:"video-return"},[vue.createElementVNode("view",{class:"",style:vue.normalizeStyle({height:vue.unref(s)+"px"})},null,4),vue.createElementVNode("view",{class:"video-return-img",style:vue.normalizeStyle({height:vue.unref(o)+"px"})},[vue.createElementVNode("view",{class:""},[vue.createElementVNode("image",{onClick:f,src:"/static/detail/video-fanhui.svg",mode:"aspectFit"})])],4)]),vue.createElementVNode("view",{class:"trim-video",style:vue.normalizeStyle({height:vue.unref(n)+"px"})},[vue.createElementVNode("video",{onPlay:t[0]||(t[0]=(...t)=>e.plays&&e.plays(...t)),id:"myVideo",style:vue.normalizeStyle({height:vue.unref(n)+"px"}),"picture-in-picture-mode":"{{['push', 'pop']}}",objectFit:"cover",autoplay:!0,"show-center-play-btn":!1,controls:!1,loop:"true",src:vue.unref(u).video_url},null,44,["src"]),vue.createElementVNode("view",{class:"all-round",onClick:l}),vue.withDirectives(vue.createElementVNode("view",{class:"video-img",onClick:i},[vue.createElementVNode("image",{src:"/static/detail/video-bofang.svg",mode:"aspectFit"})],512),[[vue.vShow,vue.unref(r)]]),vue.createElementVNode("view",{class:"advert-left"},[vue.createElementVNode("view",{class:"goods-det",onClick:p},[vue.createElementVNode("image",{src:vue.unref(u).goods_cover,mode:"aspectFill"},null,8,["src"]),vue.createElementVNode("view",{class:"goods-price"},[vue.createElementVNode("text",null,"￥"+vue.toDisplayString(vue.unref(u).goods_price),1),vue.createElementVNode("text",null,"抢")])]),vue.createElementVNode("view",{class:"goods-title overflow"},vue.toDisplayString(vue.unref(u).goods_title),1)]),vue.createElementVNode("view",{class:"user-right"},[vue.createElementVNode("view",{class:"give-thethu",onClick:g},[vue.createElementVNode("view",{class:""},[vue.createElementVNode("image",{src:"/static/detail/video-pinglun.svg",mode:"aspectFit"})]),vue.createElementVNode("view",{class:""},vue.toDisplayString(0==vue.unref(d)?"评论":vue.unref(d)),1)]),vue.createElementVNode("view",{class:"give-thethu comment"},[vue.unref(m)<=0?(vue.openBlock(),vue.createElementBlock("view",{key:0,class:"",onClick:v},[vue.createElementVNode("image",{src:"/static/detail/video-shoucang.svg",mode:"aspectFit"})])):(vue.openBlock(),vue.createElementBlock("view",{key:1,class:"",onClick:h},[vue.createElementVNode("image",{src:"/static/detail/video-yishoucang.svg",mode:"aspe          ctFit"})])),vue.createElementVNode("view",{class:""},vue.toDisplayString(vue.unref(m)<=0?"收藏":"已收藏"),1)]),vue.createElementVNode("view",{class:"give-thethu"},[vue.createElementVNode("button",{"open-type":"share",plain:""},[vue.createElementVNode("view",{class:""},[vue.createElementVNode("image",{src:"/static/detail/video-fenxiang.svg",mode:""})]),vue.createElementVNode("view",{class:""}," 分享 ")])])])],4),vue.createVNode(Comment),vue.createVNode(Login)],64))}};var PagesShortVideoVideo=_export_sfc(_sfc_main$f,[["__scopeId","data-v-2891ee65"]]);const goodsInfo=vue.reactive({order:{goods_id:"",goods_image:"",goods_title:"",goods_price:0,buy_amount:0,specs:[],subtotal:0,select:!1,specsStr:"",order_number:""},exist:!1,num_shopcart:0}),db$1=wx.cloud.database(),shopcart=()=>{goodsInfo.order.subtotal=parseFloat((goodsInfo.order.goods_price*goodsInfo.order.buy_amount).toFixed(1));let e="";return goodsInfo.order.specs.length>0&&goodsInfo.order.specs.forEach((t=>e+=t.att_val)),goodsInfo.order.specsStr=e,new Promise((async(e,t)=>{try{(await db$1.collection("shop_cart").where({goods_id:goodsInfo.order.goods_id,specsStr:goodsInfo.order.specsStr}).get()).data.length>0?e("已添加至购物车"):(await db$1.collection("shop_cart").add({data:goodsInfo.order}),goodsInfo.num_shopcart++,e("加入购物车成功"))}catch(a){t("加入购物车失败")}}))},_sfc_main$e={__name:"swiper",props:{goods:Object,seckill:Array},setup(e){const t=e,{goods:a,seckill:o}=vue.toRefs(t),s=vue.ref(!1),n=vue.ref(0),r=vue.ref(1);function i(){return Math.round(Date.now()/1e3)}vue.watch(t,(e=>{if(n.value=e.goods.goods_banner.length,0==e.seckill.length)s.value=!1,goodsInfo.order.goods_price=e.goods.goods_price,goodsInfo.exist=!1;else{let t=e.seckill[0].seckill_time.start_time,a=e.seckill[0].seckill_time.end_time;t>i()?(s.value=!1,goodsInfo.order.goods_price=e.goods.goods_price,goodsInfo.exist=!1):function(e,t){function a(e){return e<10?"0"+e:e}v=setInterval((()=>{let o=t-i(),n=parseInt(o/60/60/24,10),r=parseInt(o/60/60%24,10),c=parseInt(o/60%60,10),u=parseInt(o%60,10);n=a(n),r=a(r),c=a(c),u=a(u),o>0?(s.value=!0,goodsInfo.order.goods_price=e.price_spike,goodsInfo.exist=!0,l.day=n,l.hour=r,l.minute=c,l.second=u):(s.value=!1,goodsInfo.order.goods_price=e.ori_price,goodsInfo.exist=!1,clearInterval(v))}),1e3)}(e.seckill[0],a)}}));const l=vue.reactive({day:"00",hour:"00",minute:"00",second:"00"}),{day:c,hour:u,minute:d,second:m}=vue.toRefs(l);let v=null;const h=e=>{r.value=e.detail.current+1};return vue.onBeforeUnmount((()=>{clearInterval(v)})),(e,t)=>(vue.openBlock(),vue.createElementBlock(vue.Fragment,null,[vue.createElementVNode("view",{class:"swiper-view"},[vue.createElementVNode("swiper",{duration:1e3,circular:!0,autoplay:"",onChange:h},[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(vue.unref(a).goods_banner,((e,t)=>(vue.openBlock(),vue.createElementBlock("swiper-item",{key:t},[vue.createElementVNode("view",{class:"swiper-item"},[vue.createElementVNode("image",{class:"imageurl",src:e.image,mode:"aspectFill"},null,8,["src"])])])))),128))],32),vue.createElementVNode("view",{class:"point"},vue.toDisplayString(r.value)+"/"+vue.toDisplayString(n.value),1)]),s.value?(vue.openBlock(),vue.createElementBlock("view",{key:0,class:"seckill"},[vue.createElementVNode("view",{class:"seckill-top seckill-flex"},[vue.createElementVNode("text",null,"秒杀中"),vue.createElementVNode("text",{class:"seckill-Center"},"已售 4"),vue.createElementVNode("text",null,"距离结束还有：")]),vue.createElementVNode("view",{class:"seckill-flex"},[vue.createElementVNode("text",{class:"price-spike"},"￥"+vue.toDisplayString(vue.unref(o)[0].price_spike),1),vue.createElementVNode("text",{class:"seckill-Center ori-price"},"￥"+vue.toDisplayString(vue.unref(o)[0].ori_price),1),vue.createElementVNode("view",{class:"se-time"},["00"!=vue.unref(c)?(vue.openBlock(),vue.createElementBlock("text",{key:0},vue.toDisplayString(vue.unref(c)),1)):vue.createCommentVNode("",!0),"00"!=vue.unref(c)?(vue.openBlock(),vue.createElementBlock("text",{key:1},"天")):vue.createCommentVNode("",!0),vue.createElementVNode("text",null,vue.toDisplayString(vue.unref(u)),1),vue.createElementVNode("text",null,":"),vue.createElementVNode("text",null,vue.toDisplayString(vue.unref(d)),1),vue.createElementVNode("text",null,":"),vue.createElementVNode("text",null,vue.toDisplayString(vue.unref(m)),1)])])])):(vue.openBlock(),vue.createElementBlock("view",{key:1,class:"price-view"},[vue.createElementVNode("view",{class:""}," ￥"+vue.toDisplayString(vue.unref(a).goods_price),1),vue.createElementVNode("view",{class:""}," 已售"+vue.toDisplayString(vue.unref(a).sold),1)])),vue.createElementVNode("view",{class:"detail-title"},vue.toDisplayString(vue.unref(a).goods_title),1)],64))}};var Swipers=_export_sfc(_sfc_main$e,[["__scopeId","data-v-3022c54e"]]);const _sfc_main$d={__name:"evaluate",props:{AllComment:Number,comments:Array},setup:e=>(t,a)=>(vue.openBlock(),vue.createElementBlock("view",{class:"evaluate-view",onClick:a[0]||(a[0]=t=>{var a;(a=e.comments).length>0&&wx.navigateTo({url:"/pages/eva-details/details?goods_id="+a[0].goods_id})})},[vue.createElementVNode("view",{class:"evaluate-title"},[vue.createElementVNode("view",{class:""},"评论("+vue.toDisplayString(e.AllComment)+")",1),vue.createElementVNode("view",{class:""},[vue.createElementVNode("image",{src:"/static/detail/xiangyou-jiantou.svg",mode:"aspectFit"})])]),0!=e.AllComment?(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,{key:0},vue.renderList(e.comments,((e,t)=>(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:t},[vue.createElementVNode("view",{class:"evaluate-user"},[vue.createElementVNode("view",{class:""},[vue.createElementVNode("image",{src:e.avatarurl,mode:"aspectFill"},null,8,["src"])]),vue.createElementVNode("view",{class:""},vue.toDisplayString(e.nickname),1)]),vue.createElementVNode("view",{class:"evaluate-content"},[vue.createElementVNode("text",null,vue.toDisplayString(e.eav_text),1),vue.createElementVNode("view",{class:"eva-image"},[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(e.eav_image,((e,t)=>(vue.openBlock(),vue.createElementBlock("view",{class:"",key:t},[vue.createElementVNode("image",{src:e.image,mode:""},null,8,["src"])])))),128))])])],64)))),128)):vue.createCommentVNode("",!0)]))};var Eva=_export_sfc(_sfc_main$d,[["__scopeId","data-v-098e17bc"]]);const _sfc_main$c={__name:"image",props:{goods_details:Array},setup:e=>(t,a)=>(vue.openBlock(),vue.createElementBlock(vue.Fragment,null,[vue.createElementVNode("view",{class:"details-img"},[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(e.goods_details,((e,t)=>(vue.openBlock(),vue.createElementBlock("image",{key:t,src:e.image,mode:"widthFix"},null,8,["src"])))),128))]),vue.createElementVNode("view",{class:"",style:{height:"180rpx"}})],64))};var Img=_export_sfc(_sfc_main$c,[["__scopeId","data-v-66cc67a2"]]);const _sfc_main$b={__name:"purchase",props:{goods_id:String,collection:Number,sku_data:Array,Goods:Object},setup(e){const t=e,a=wx.cloud.database(),o=vue.reactive({collection:0,goods_id:"",whether:!0,tips:"",goods:{}}),{collection:s,whether:n,tips:r}=vue.toRefs(o);vue.watch(t,(e=>{let{collection:t,goods_id:a,Goods:s}=e;o.collection=t,o.goods_id=a,o.goods=s,0==o.goods.shelves?(o.goods.stock,o.whether=!1,o.tips="该商品已下架"):o.goods.stock<=0&&(o.goods.shelves?(o.whether=!1,o.tips="该商品已售空"):(o.whether=!1,o.tips="该商品已下架"))}));const i=async(e,t)=>{if(wx.getStorageSync("user_info"))if(t.length>0)sku_popup.show=!0,sku_popup.judge=e;else if(goodsInfo.order.buy_amount=1,"shopcart"==e)try{let e=await shopcart();(new Public).toast(e)}catch(a){(new Public).toast(err)}else{goodsInfo.order.subtotal=parseFloat((goodsInfo.order.goods_price*goodsInfo.order.buy_amount).toFixed(1)),sku_popup.show=!1;const e=JSON.stringify([goodsInfo.order]);wx.navigateTo({url:`/pages/pay-view/pay?type=direct&order=${e}`})}else login_user.show=!0},l=()=>{wx.switchTab({url:"/pages/shopping-cart/shopping-cart"})};return(t,c)=>(vue.openBlock(),vue.createElementBlock("view",{class:"purchase"},[vue.createElementVNode("view",{class:"flex-left"},[vue.createElementVNode("button",{plain:"true","open-type":"share"},[vue.createElementVNode("image",{src:"/static/detail/fenxiang.svg",mode:"aspectFit"}),vue.createElementVNode("text",null,"分享")])]),vue.createElementVNode("view",{class:"flex-left shopping-amount",onClick:l},[vue.createElementVNode("image",{src:"/static/detail/gouwuche.svg",mode:"aspectFit"}),vue.createElementVNode("text",null,"购物车"),vue.unref(goodsInfo).num_shopcart>0?(vue.openBlock(),vue.createElementBlock("text",{key:0,class:"amount"},vue.toDisplayString(vue.unref(goodsInfo).num_shopcart),1)):vue.createCommentVNode("",!0)]),vue.createElementVNode("view",{class:"flex-left",onClick:c[0]||(c[0]=e=>(async e=>{if(wx.getStorageSync("user_info"))if(0===e)try{await a.collection("collect_goods").add({data:{goods_id:o.goods_id}}),o.collection++}catch(t){(new Public).toast("收藏失败")}else try{await a.collection("collect_goods").where({goods_id:o.goods_id}).remove(),o.collection=0}catch(t){(new Public).toast("取消收藏失败")}else login_user.show=!0})(vue.unref(s)))},[0==vue.unref(s)?(vue.openBlock(),vue.createElementBlock("image",{key:0,src:"/static/detail/shoucang.svg",mode:"aspectFit"})):(vue.openBlock(),vue.createElementBlock("image",{key:1,src:"/static/detail/yishoucang.svg",mode:"aspectFit"})),vue.createElementVNode("text",null,vue.toDisplayString(vue.unref(s)>0?"已收藏":"收藏"),1)]),vue.unref(n)?(vue.openBlock(),vue.createElementBlock("view",{key:0,onClick:c[1]||(c[1]=t=>i("shopcart",e.sku_data)),class:"flex-right shopping-cart"}," 加入购物车 ")):vue.createCommentVNode("",!0),vue.unref(n)?(vue.openBlock(),vue.createElementBlock("view",{key:1,onClick:c[2]||(c[2]=t=>i("imbuy",e.sku_data)),class:"flex-right buy"}," 立即购买 ")):(vue.openBlock(),vue.createElementBlock("view",{key:2,class:"flex-right buy"},vue.toDisplayString(vue.unref(r)),1))]))}};var Purchase=_export_sfc(_sfc_main$b,[["__scopeId","data-v-7fafd1a0"]]);const _sfc_main$a={__name:"specs-view",props:{sku_data:Array,goods:Object},setup(e){const t=e,a=vue.reactive({goods:{},new_sku:[],all_sku:[],sku_length:0,sku_sort:{},tips:!0}),{goods:o,new_sku:s,tips:n}=vue.toRefs(a);vue.watch(t,(e=>{if(a.goods=JSON.parse(JSON.stringify(e.goods)),0==e.sku_data.length)return;const t=e.sku_data[0].sku[0];a.all_sku=e.sku_data[0].sku,a.sku_length=e.sku_data[0].sku[0].att_data.length,t.att_data.forEach(((e,t)=>{a.sku_sort=__spreadValues(__spreadValues({},a.sku_sort),{[e.att_name]:t})}));const o=t.att_data.map((e=>e.att_name));
//!重要
let s=[];for(let a=0;a<o.length;a++){const t=e.sku_data[0].sku.map((e=>1==o.length?{att_val:e.att_data[a].att_val,stock:e.stock}:{att_val:e.att_data[a].att_val,act:!1}));let n={},r=t.reduce(((e,t)=>(n[t.att_val]||(e.push(t),n[t.att_val]=1),e)),[]);s.push({att_name:o[a],sku:r})}a.new_sku=s}));const r=vue.reactive({selects:[],selectCss:[]}),{selects:i,selectCss:l}=vue.toRefs(r),c=(e,t,o,s)=>{const n=r.selects.findIndex((e=>e.att_name==t));n>-1?r.selects[n].att_val==e?(r.selects.splice(n,1),r.selectCss[o]=-1):(r.selects[n]={att_name:t,att_val:e},r.selectCss[o]=s):(r.selects.push({att_name:t,att_val:e}),r.selectCss[o]=s);let i=vue.toRaw(a);i.all_sku.forEach((e=>e.custom="")),r.selects.forEach(((e,t)=>{i.all_sku.forEach(((t,a)=>{t.att_data.forEach(((t,o)=>{t.att_name==e.att_name&&t.att_val==e.att_val&&(i.all_sku[a].custom+=t.att_val)}))}))})),i.new_sku.forEach((e=>{e.sku.forEach((e=>{e.flag=!0}))}));let l="";if(r.selects.forEach((e=>l+=e.att_val)),""==l)var c=[];else c=i.all_sku.filter((e=>e.custom==l));let u=[],d=r.selects.map((e=>JSON.stringify(e)));for(let a=0;a<c.length;a++){let e=c[a].att_data.map((e=>JSON.stringify(e))).filter((e=>!new Set(d).has(e)));u.push(...e)}if(u=[...new Set(u)],u=u.map((e=>JSON.parse(e))),u.length>0||r.selects.length>0)for(let a=0;a<u.length;a++)i.new_sku.forEach(((e,t)=>{e.att_name==u[a].att_name&&e.sku.forEach((e=>{e.att_val!=u[a].att_val&&1==e.flag&&(e.act=!0),e.att_val==u[a].att_val&&(e.act=!1,e.flag=!1)}))}));else i.new_sku.forEach(((e,t)=>{e.sku.forEach(((e,t)=>{e.act&&(e.flag=!0,e.act=!1)}))}));if(r.selects.length==a.sku_length){a.tips=!0,r.selects.sort(((e,t)=>a.sku_sort[e.att_name]-a.sku_sort[t.att_name]));let e=a.all_sku.filter((e=>JSON.stringify(e.att_data)==JSON.stringify(r.selects)));e.length>0?(a.goods.goods_price=e[0].price,a.goods.stock=e[0].stock,a.goods.goods_cover=e[0].image,0==e[0].stock&&(a.tips=!1)):a.tips=!1}},u=vue.ref(1),d=()=>{u.value--},m=()=>{u.value++};return(e,t)=>{const v=vue.resolveComponent("page-container");return vue.openBlock(),vue.createBlock(v,{show:vue.unref(sku_popup).show,position:"bottom",bindenter:"onEnter"},{default:vue.withCtx((()=>[vue.createElementVNode("view",{class:"space-view"},[vue.createElementVNode("view",{class:"space-price"},[vue.createElementVNode("view",{class:"space-goods-img"},[vue.createElementVNode("image",{src:vue.unref(o).goods_cover,mode:"aspectFill"},null,8,["src"])]),vue.createElementVNode("view",{class:"space-text"},[vue.createElementVNode("view",{class:"space-text-price"},[vue.createElementVNode("text",{class:vue.normalizeClass({line:vue.unref(goodsInfo).exist})},"￥"+vue.toDisplayString(vue.unref(o).goods_price),3),vue.unref(goodsInfo).exist?(vue.openBlock(),vue.createElementBlock("text",{key:0},"秒杀价:￥"+vue.toDisplayString(vue.unref(goodsInfo).order.goods_price),1)):vue.createCommentVNode("",!0)]),vue.createElementVNode("text",{class:"space-text-stock"},"库存"+vue.toDisplayString(vue.unref(o).stock),1),vue.createElementVNode("view",{class:"choice"},[vue.createElementVNode("text",null,vue.toDisplayString(vue.unref(i).length>0?"已选择":"请选择"),1),0==vue.unref(i).length?(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,{key:0},vue.renderList(vue.unref(s),((e,t)=>(vue.openBlock(),vue.createElementBlock("text",{key:t},vue.toDisplayString(e.att_name),1)))),128)):(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,{key:1},vue.renderList(vue.unref(i),((e,t)=>(vue.openBlock(),vue.createElementBlock("text",{key:t},vue.toDisplayString(e.att_val),1)))),128))])]),vue.createElementVNode("view",{class:"space-xx",onClick:t[0]||(t[0]=e=>vue.unref(sku_popup).show=!1)},[vue.createElementVNode("image",{src:"/static/detail/guanbi.svg",mode:"aspectFit"})])]),1==vue.unref(s).length?(vue.openBlock(),vue.createElementBlock("view",{key:0,class:"space-mar"},[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(vue.unref(s),((e,t)=>(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:t},[vue.createElementVNode("text",{class:"space-title"},vue.toDisplayString(e.att_name),1),vue.createElementVNode("view",{class:"space-sku"},[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(e.sku,((a,o)=>(vue.openBlock(),vue.createElementBlock("text",{key:o,class:vue.normalizeClass({prevent_style:0==a.stock,new_style:vue.unref(l)[t]==o}),onClick:s=>c(a.att_val,e.att_name,t,o)},vue.toDisplayString(a.att_val),11,["onClick"])))),128))])],64)))),128))])):(vue.openBlock(),vue.createElementBlock("view",{key:1,class:"space-mar"},[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(vue.unref(s),((e,t)=>(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:t},[vue.createElementVNode("text",{class:"space-title"},vue.toDisplayString(e.att_name),1),vue.createElementVNode("view",{class:"space-sku"},[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(e.sku,((a,o)=>(vue.openBlock(),vue.createElementBlock("text",{onClick:s=>c(a.att_val,e.att_name,t,o),key:o,class:vue.normalizeClass({prevent_style:a.act,new_style:vue.unref(l)[t]==o})},vue.toDisplayString(a.att_val),11,["onClick"])))),128))])],64)))),128))])),vue.createElementVNode("view",{class:"Pur-quantity"},[vue.createElementVNode("view",{class:"Pur-title"}," 购买数量 "),vue.createElementVNode("view",{class:"Pur-image"},[vue.createElementVNode("image",{src:"/static/detail/jianshao.png",mode:"aspectFit",onClick:d,class:vue.normalizeClass({prevent_style:1==u.value})},null,2),vue.createElementVNode("text",null,vue.toDisplayString(u.value),1),vue.createElementVNode("image",{src:"/static/detail/tianjia.png",mode:"aspectFit",onClick:m})])]),vue.createElementVNode("view",{class:"",style:{height:"200rpx"}}),vue.unref(n)?(vue.openBlock(),vue.createElementBlock("view",{key:2,class:"space-botton"},[vue.createElementVNode("view",{class:"",onClick:t[1]||(t[1]=e=>(async e=>{if(r.selects.length!=a.new_sku.length)(new Public).toast("请选择商品规格");else if(goodsInfo.order.buy_amount=u.value,goodsInfo.order.specs=r.selects,goodsInfo.order.goods_image=a.goods.goods_cover,goodsInfo.order.goods_price=goodsInfo.exist?goodsInfo.order.goods_price:a.goods.goods_price,"shopcart"==e)try{let e=await shopcart();(new Public).toast(e),sku_popup.show=!1}catch(t){(new Public).toast(err)}else{goodsInfo.order.subtotal=(goodsInfo.order.goods_price*goodsInfo.order.buy_amount).toFixed(1),sku_popup.show=!1;const e=JSON.stringify([goodsInfo.order]);wx.navigateTo({url:"/pages/pay-view/pay?type=direct&order="+e})}})(vue.unref(sku_popup).judge))},vue.toDisplayString("shopcart"==vue.unref(sku_popup).judge?"加入购物车":"立即购买"),1)])):(vue.openBlock(),vue.createElementBlock("view",{key:3,class:"space-botton",style:{opacity:"0.4"}},[vue.createElementVNode("view",{class:""}," 暂无库存 ")]))])])),_:1},8,["show"])}}};var Specs=_export_sfc(_sfc_main$a,[["__scopeId","data-v-33f7a7b8"]]);const _sfc_main$9={__name:"detail",setup(e){const t=wx.cloud.database(),a=vue.reactive({tab_name:["商品","评价","详情"],t_height:0,t_top:0,t_width:0,all_height:0,show:!0,opacity:0,trigger:0}),{tab_name:o,t_height:s,t_top:n,t_width:r,all_height:i,show:l,opacity:c,trigger:u}=vue.toRefs(a);vue.onMounted((()=>{const e=wx.getMenuButtonBoundingClientRect();a.t_height=e.height+5,a.t_top=e.top,a.t_width=e.width,a.all_height=e.height+e.top+5}));let d=vue.reactive({hei:[]});const m=vue.reactive({goods_id:"",goods:{},collection:0,logCollection:0,sku_data:[],seckill:[],logshopCartNum:0,AllComment:0,comments:[]}),{goods:v,goods_id:h,collection:g,logCollection:f,sku_data:p,seckill:_,shopCartNum:k,logshopCartNum:y,AllComment:w,comments:E}=vue.toRefs(m);onLoad((e=>{m.goods_id=e.goods_id;const o=t.collection("goodsInfo").doc(e.goods_id).get(),s=t.collection("collect_goods").where({goods_id:e.goods_id}).get(),n=t.collection("skuInfo").where({sku_id:e.goods_id}).field({sku:!0}).get(),r=t.collection("seckill").where({goods_id:e.goods_id}).field({ori_price:!0,price_spike:!0,seckill_time:!0}).get(),i=t.collection("shop_cart").count(),l=t.collection("goods_eva").where({goods_id:e.goods_id}).limit(3).get(),c=t.collection("goods_eva").where({goods_id:e.goods_id}).count(),u=wx.getStorageSync("user_info");Promise.all([o,s,n,r,i,c,l]).then((e=>{m.goods=e[0].data,m.collection=u?e[1].data.length:0,m.logCollection=e[1].data.length,m.sku_data=e[2].data,m.seckill=e[3].data,goodsInfo.num_shopcart=u?e[4].total:0,m.logshopCartNum=e[4].total,m.AllComment=e[5].total,m.comments=e[6].data,goodsInfo.order.goods_id=e[0].data._id,goodsInfo.order.goods_image=e[0].data.goods_cover,goodsInfo.order.goods_title=e[0].data.goods_title,goodsInfo.order.specs=[],0===m.sku_data.length&&0===m.seckill.length&&(goodsInfo.order.goods_price=e[0].data.goods_price),vue.nextTick((()=>{!function(){const e=wx.createSelectorQuery();e.selectAll("#select").boundingClientRect(),e.exec((e=>{d.hei.push(e[0][0].height-a.all_height+10),d.hei.push(e[0][1].height+d.hei[0])}))}()}))})).catch((e=>{formatAppLog("log","at pages/product-details/detail.vue:150",e)}))}));let S=vue.ref(!1);onPageScroll((e=>{a.opacity=e.scrollTop/150,a.show=0!=e.scrollTop,S.value||(e.scrollTop>=d.hei[a.trigger]?a.trigger++:e.scrollTop<d.hei[a.trigger-1]&&(a.trigger-=1))}));vue.watch((()=>login_user.response),(e=>{m.collection=m.logCollection,goodsInfo.num_shopcart=m.logshopCartNum})),onShareAppMessage((()=>({title:m.goods.goods_title,path:`/pages/product-details/detail?goods_id=${m.goods_id}`,imageUrl:m.goods.goods_cover})));const x=()=>{wx.navigateBack({delta:1})};return(e,t)=>(vue.openBlock(),vue.createElementBlock(vue.Fragment,null,[vue.withDirectives(vue.createElementVNode("view",{class:"search-back",style:vue.normalizeStyle({opacity:vue.unref(c)})},[vue.createElementVNode("view",{class:"",style:vue.normalizeStyle({height:vue.unref(n)+"px"})},null,4),vue.createElementVNode("view",{class:"search-input",style:vue.normalizeStyle({height:vue.unref(s)+"px",paddingRight:vue.unref(r)+"px"})},[vue.createElementVNode("view",{class:"tab-jiantou",onClick:x},[vue.createElementVNode("image",{src:"/static/detail/video-fanhui.svg",mode:"aspectFit"})]),(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(vue.unref(o),((e,t)=>(vue.openBlock(),vue.createElementBlock("view",{class:"tab-view",key:t,style:vue.normalizeStyle({height:vue.unref(s)+"px"}),onClick:e=>(e=>{S.value=!0;const t=0==e?".swipers":1==e?".eva":2==e?".img":"",o=wx.createSelectorQuery();o.select(t).boundingClientRect(),o.selectViewport().scrollOffset(),o.exec((function(t){wx.pageScrollTo({scrollTop:t[0].top+t[1].scrollTop-a.all_height,duration:200}),setTimeout((()=>{a.trigger=e,S.value=!1}),300)}))})(t)},[vue.createElementVNode("text",null,vue.toDisplayString(e),1),vue.createElementVNode("text",{class:vue.normalizeClass({active:t==vue.unref(u)})},null,2)],12,["onClick"])))),128))],4)],4),[[vue.vShow,vue.unref(l)]]),vue.createVNode(Swipers,{id:"select",class:"swipers",goods:vue.unref(v),seckill:vue.unref(_)},null,8,["goods","seckill"]),vue.createVNode(Eva,{id:"select",class:"eva",AllComment:vue.unref(w),comments:vue.unref(E)},null,8,["AllComment","comments"]),vue.createVNode(Img,{id:"select",class:"img",goods_details:vue.unref(v).goods_details},null,8,["goods_details"]),vue.createVNode(Purchase,{goods_id:vue.unref(h),collection:vue.unref(g),sku_data:vue.unref(p),Goods:vue.unref(v)},null,8,["goods_id","collection","sku_data","Goods"]),vue.createVNode(Login),vue.createVNode(Specs,{sku_data:vue.unref(p),goods:vue.unref(v)},null,8,["sku_data","goods"])],64))}};let outTradeNo=function(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZAabcdefghijklmn1234567890",t=e.length,a=[];for(let o=0;o<32;o++)a.push(e.charAt(Math.floor(Math.random()*t)));return a.join("")},codes=function(){let e="";for(let t=0;t<6;t++)e+=Math.floor(10*Math.random());return e=Date.now()+e,e},order_data=vue.reactive({address:[],order_time:"",query_time:"",pay_success:"not_pay",deliver:"stay",evaluate:!1,waybill_No:"",payment:{},Re_reason:"",out_trade_no:"",out_refund_no:""});const db=wx.cloud.database(),_=db.command;class Wxpay{constructor(){}async place(e,t){try{return(await wx.cloud.callFunction({name:"wx-pay",data:{price:e,outTradeNo:t}})).payment}catch(a){return{msg:"请求统一下单云函数出差",err:err}}}subMit(e,t,a,o,s,n){order_data.payment=t,order_data.address=a,order_data.order_time=o,order_data.query_time=s,order_data.out_trade_no=n;var r=e.map((e=>__spreadValues(__spreadValues({},e),order_data)));return new Promise(((e,t)=>{r.forEach(((a,o)=>{try{db.collection("order_data").add({data:a}),o==r.length-1&&e("success")}catch(s){t(s)}}))}))}payMent(e){return new Promise(((t,a)=>{wx.requestPayment(__spreadProps(__spreadValues({},e),{success:e=>{t(e)},fail:e=>{a(e)}}))}))}async state(e,t){const a=wx.getStorageSync("user_info");return"success"==e?(await db.collection("order_data").where({_openid:a.openid,out_trade_no:t}).update({data:{pay_success:"success"}}),"success"):(await db.collection("order_data").where({_openid:a.openid,out_trade_no:t}).update({data:{pay_success:"not_pay"}}),"success")}stock(e){return new Promise(((t,a)=>{e.forEach((async(o,s)=>{try{await db.collection("goodsInfo").doc(o.goods_id).update({data:{stock:_.inc(-o.buy_amount),sold:_.inc(o.buy_amount)}}),await db.collection("skuInfo").where({sku_id:o.goods_id,"sku.att_data":_.eq(o.specs)}).update({data:{"sku.$.stock":_.inc(-o.buy_amount)}}),s==e.length-1&&t("success")}catch(n){a(n)}}))}))}deleteCart(e){return new Promise(((t,a)=>{e.forEach((async(o,s)=>{try{await db.collection("shop_cart").doc(o._id).remove(),s==e.length-1&&t("success")}catch(n){a(err)}}))}))}}const _sfc_main$8={__name:"pay",setup(e){const t=wx.cloud.database(),a=vue.reactive({address:[]}),{address:o}=vue.toRefs(a);vue.onMounted((async()=>{const e=await t.collection("re_address").where({tacitly:!0}).get();a.address=e.data}));const s=()=>{wx.navigateTo({url:"/pages/re-address/address"})};vue.watch(newAddress,(e=>{a.address=e.data}));const n=vue.reactive({order:[],type:"",total_price:0}),{order:r,type:i,total_price:l}=vue.toRefs(n);onLoad((e=>{const t=JSON.parse(e.order);n.order=t,n.type=e.type})),vue.watch((()=>n.order),(e=>{n.total_price=e.reduce(((e,t)=>(parseFloat((e+=t.goods_price*t.buy_amount).toFixed(1)),e)),0)}),{deep:!0,immediate:!0});const c=async()=>{wx.showLoading({title:"正在下单",mask:!0});let e=hooks().utcOffset(8).format("YYYY-MM-DD HH:mm:ss"),o=hooks().utcOffset(8).format("YYYY-MM-DD");n.order.forEach((e=>e.order_number=codes()));let s=outTradeNo();try{await(new Wxpay).place(n.total_price,s);await(new Wxpay).subMit(n.order,"payment.result",a.address,e,o,s);u.out_trade_no=s;await(new Wxpay).payMent("payment.result")}catch(r){r&&"requestPayment:fail cancel"==r.errMsg?("cart"==n.type&&await(new Wxpay).deleteCart(n.order),wx.hideLoading(),wx.redirectTo({url:"/pages/all-orders/order"})):((new Public).toast("支付发生错误"),await t.collection("order_data").where({out_trade_no:s}).remove())}};vue.onBeforeUnmount((()=>{d.close()}));let u=vue.reactive({out_trade_no:""});const d=t.collection("user_info").watch({onChange:e=>{"update"==e.docChanges[0].dataType&&((new Wxpay).state("success",u.out_trade_no),(new Wxpay).stock(n.order),"cart"==n.type&&(new Wxpay).deleteCart(n.order),wx.hideLoading(),wx.redirectTo({url:"/pages/all-orders/order"}))},onError:function(e){}});return(e,t)=>(vue.openBlock(),vue.createElementBlock(vue.Fragment,null,[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(vue.unref(o),((e,t)=>(vue.openBlock(),vue.createElementBlock("view",{class:"pay-address",key:t,onClick:s},[vue.createElementVNode("view",{class:"pay-address-left"},[vue.createElementVNode("image",{src:"/static/detail/dingdan-dizhi.svg",mode:"aspectFit"})]),vue.createElementVNode("view",{class:"pay-address-name"},[vue.createElementVNode("view",{class:""},[vue.createElementVNode("text",null,vue.toDisplayString(e.name),1),vue.createElementVNode("text",null,vue.toDisplayString(e.mobile),1)]),vue.createElementVNode("text",null,vue.toDisplayString(e.district+e.address),1)]),vue.createElementVNode("view",{class:"pay-address-right"},[vue.createElementVNode("image",{src:"/static/detail/xiangyou-jiantou.svg",mode:"aspectFit"})])])))),128)),(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(vue.unref(r),((e,t)=>(vue.openBlock(),vue.createElementBlock("view",{class:"pay-goods",key:t},[vue.createElementVNode("view",{class:""},[vue.createElementVNode("image",{src:e.goods_image,mode:"aspectFill"},null,8,["src"])]),vue.createElementVNode("view",{class:"aa"},[vue.createElementVNode("text",{class:"pay-goods-title"},vue.toDisplayString(e.goods_title),1),e.specs.length>0?(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,{key:0},vue.renderList(e.specs,((e,t)=>(vue.openBlock(),vue.createElementBlock("text",{class:"pay-goods-specs",key:t},vue.toDisplayString(e.att_val),1)))),128)):vue.createCommentVNode("",!0),vue.createElementVNode("view",{class:"pay-goods-price"},[vue.createElementVNode("text",null,"￥"+vue.toDisplayString(e.goods_price),1),"direct"!=vue.unref(i)?(vue.openBlock(),vue.createElementBlock("text",{key:0},"x"+vue.toDisplayString(e.buy_amount),1)):(vue.openBlock(),vue.createElementBlock("view",{key:1,class:""},[vue.createElementVNode("image",{onClick:t=>(e=>{e.buy_amount--,e.subtotal=parseFloat((e.buy_amount*e.goods_price).toFixed(1))})(e),class:vue.normalizeClass({prevent_style:1==e.buy_amount}),src:"/static/detail/jianshao.png",mode:"aspectFit"},null,10,["onClick"]),vue.createElementVNode("text",null,vue.toDisplayString(e.buy_amount),1),vue.createElementVNode("image",{onClick:t=>(e=>{e.buy_amount++,e.subtotal=parseFloat((e.buy_amount*e.goods_price).toFixed(1))})(e),src:"/static/detail/tianjia.png",mode:"aspectFit"},null,8,["onClick"])]))])])])))),128)),vue.createElementVNode("view",{style:{height:"200rpx"}}),vue.createElementVNode("view",{class:"set-accounts"},[vue.createElementVNode("view",{class:""}," ￥"+vue.toDisplayString(vue.unref(l)),1),vue.createElementVNode("view",{class:"",onClick:c}," 提交订单 ")])],64))}},_sfc_main$7={__name:"new-address",emits:["upLoad"],setup(e,{emit:t}){const a=wx.cloud.database(),o=vue.reactive({result:{name:"",mobile:"",district:"",address:"",tacitly:!1},_id:""}),{result:s,_id:n}=vue.toRefs(o);let r="";const i=e=>{r="",e.detail.value.forEach((e=>r+=e)),o.result.district=r},l=()=>{show.value=!1,u()},c=async e=>{try{""==e?await a.collection("re_address").add({data:o.result}):await a.collection("re_address").doc(e).update({data:o.result}),show.value=!1,u(),t("upLoad")}catch(s){(new Public).toast("提交失败")}};function u(){o.result.name="",o.result.mobile="",o.result.district="",o.result.address="",o.result.tacitly=!1,o._id=""}return vue.watch(modify,(e=>{Object.assign(o.result,e.data),o._id=e.id})),(e,t)=>{const a=vue.resolveComponent("page-container");return vue.openBlock(),vue.createBlock(a,{show:vue.unref(show),positon:"bottom",bindenter:"onEnter"},{default:vue.withCtx((()=>[vue.createElementVNode("view",{class:"space-view"},[vue.createElementVNode("view",{class:"address-title"},[vue.createElementVNode("text",null,"新建收货地址"),vue.createElementVNode("icon",{type:"cancel",size:"23",class:"icon-small",onClick:l})]),vue.createElementVNode("view",{class:"address-input"},[vue.createElementVNode("text",null,"收货人 :"),vue.withDirectives(vue.createElementVNode("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>vue.unref(s).name=e)},null,512),[[vue.vModelText,vue.unref(s).name]])]),vue.createElementVNode("view",{class:"address-input"},[vue.createElementVNode("text",null,"手机号码 :"),vue.withDirectives(vue.createElementVNode("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=e=>vue.unref(s).mobile=e)},null,512),[[vue.vModelText,vue.unref(s).mobile]])]),vue.createElementVNode("view",{class:"address-input"},[vue.createElementVNode("text",null,"选择地址 :"),vue.createElementVNode("picker",{class:"flex-left",mode:"region",onChange:i},[vue.createElementVNode("view",null,[vue.createElementVNode("text",null,vue.toDisplayString(vue.unref(s).district),1),vue.createElementVNode("image",{src:"/static/detail/xiangyou-jiantou.svg",mode:"aspectFit"})])],32)]),vue.createElementVNode("view",{class:"address-input"},[vue.createElementVNode("text",null,"详细地址 :"),vue.withDirectives(vue.createElementVNode("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=e=>vue.unref(s).address=e)},null,512),[[vue.vModelText,vue.unref(s).address]])]),vue.createElementVNode("view",{class:"New-address",onClick:t[3]||(t[3]=e=>(e=>{let t=/^[1][3,4,5,7,8,9][0-9]{9}$/;switch(!0){case""==o.result.name:(new Public).toast("请输入姓名");break;case""==o.result.mobile:(new Public).toast("请输入手机号");break;case!t.test(o.result.mobile):(new Public).toast("手机号码格式不正确");break;case""==o.result.district:(new Public).toast("请选择地址");break;case""==o.result.address:(new Public).toast("请填写详细地址");break;default:c(e)}})(vue.unref(n)))},vue.toDisplayString(""==vue.unref(n)?"保存":"修改地址"),1)])])),_:1},8,["show"])}}};var AddAddress=_export_sfc(_sfc_main$7,[["__scopeId","data-v-21268940"]]);const _sfc_main$6={__name:"address",setup(e){const t=wx.cloud.database(),a=()=>{show.value=!0};vue.onMounted((()=>{n()}));const o=vue.reactive({address:[]}),{address:s}=vue.toRefs(o),n=async()=>{const e=await t.collection("re_address").get();o.address=e.data},r=()=>{n()};return(e,n)=>(vue.openBlock(),vue.createElementBlock(vue.Fragment,null,[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(vue.unref(s),((e,a)=>(vue.openBlock(),vue.createElementBlock("view",{class:"Re-view",key:a},[vue.createElementVNode("view",{class:"Re-address Re-flex",onClick:t=>(e=>{newAddress.data=[e],wx.navigateBack({delta:1})})(e)},[vue.createElementVNode("view",{class:""},[vue.createElementVNode("view",{class:"Re-name Re-flex"},[vue.createElementVNode("text",null,vue.toDisplayString(e.name),1),vue.createElementVNode("text",null,vue.toDisplayString(e.mobile),1)]),vue.createElementVNode("text",null,vue.toDisplayString(e.district+e.address),1)]),e.tacitly?(vue.openBlock(),vue.createElementBlock("view",{key:0},[vue.createElementVNode("icon",{type:"success_no_circle",class:"icon-small",size:"23"})])):vue.createCommentVNode("",!0)],8,["onClick"]),vue.createElementVNode("view",{class:"Defa-address Re-flex"},[vue.createElementVNode("view",{class:vue.normalizeClass(["Re-flex",{Disable:e.tacitly}]),onClick:s=>(async(e,a)=>{let s=[];o.address.forEach(((e,t)=>{e.tacitly&&s.push({index:t,id:e._id})}));try{await t.collection("re_address").doc(e).update({data:{tacitly:!0}}),o.address[a].tacitly=!0,s.length>0&&(o.address[s[0].index].tacitly=!1,await t.collection("re_address").doc(s[0].id).update({data:{tacitly:!1}}))}catch(n){(new Public).toast("设置失败")}})(e._id,a)},[e.tacitly?(vue.openBlock(),vue.createElementBlock("icon",{key:0,type:"success",class:"icon-small",size:"23"})):vue.createCommentVNode("",!0),vue.createElementVNode("text",{class:"Defa-padd"},vue.toDisplayString(e.tacitly?"已设为默认":"设为默认"),1)],10,["onClick"]),vue.createElementVNode("view",{class:"Re-flex"},[vue.createElementVNode("text",{onClick:s=>((e,a)=>{wx.showModal({content:"确认删除吗?"}).then((async s=>{if(s.confirm)try{await t.collection("re_address").doc(e).remove(),o.address.splice(a,1)}catch(n){(new Public).toast("删除失败")}}))})(e._id,a)},"删除",8,["onClick"]),vue.createElementVNode("text",{class:"Defa-padd",onClick:t=>(e=>{modify.id=e._id;const t=e,{_id:a,_openid:o}=t,s=__objRest(t,["_id","_openid"]);modify.data=s,show.value=!0})(e)},"修改",8,["onClick"])])])])))),128)),0==vue.unref(s).length?(vue.openBlock(),vue.createElementBlock("view",{key:0,class:"Tips"}," 你还没有添加收获地址 ")):vue.createCommentVNode("",!0),vue.createElementVNode("view",{style:{height:"200rpx"}}),vue.createElementVNode("view",{class:"New-address",onClick:a}," ＋ 新建收货地址 "),vue.createVNode(AddAddress,{onUpLoad:r})],64))}},_sfc_main$5={__name:"order",setup(e){const t=wx.cloud.database(),a=vue.ref(0),o=vue.ref(!1),s=vue.reactive({tab:[{name:"全部",query:{}},{name:"待支付",query:{pay_success:"not_pay"}},{name:"待发货",query:{pay_success:"success",deliver:"stay"}},{name:"待收货",query:{pay_success:"success",deliver:"already"}},{name:"待评价",query:{pay_success:"success",deliver:"rece_goods",evaluate:!1}}]}),{tab:n}=vue.toRefs(s);onLoad((e=>{let t=JSON.parse(e.obj);t!={}?r(t.index,t.query):c(0,{})}));const r=(e,t)=>{u.value=0,i.order_data=[],a.value=e,c(0,t)},i=vue.reactive({order_data:[]}),{order_data:l}=vue.toRefs(i);async function c(e,a){const o=wx.getStorageSync("user_info");a._openid=o.openid;const s=await t.collection("order_data").where(a).limit(10).skip(e).orderBy("order_time","desc").get();i.order_data=[...i.order_data,...s.data]}let u=vue.ref(0);onReachBottom((async()=>{o.value=!0,u.value++;let e=10*u.value;await c(e,s.tab[a.value].query),o.value=!1}));vue.onBeforeUnmount((()=>{m.close()}));let d=vue.reactive({_id:"",payment:{},order_item:[],index:-1,out_trade_no:""});const m=t.collection("user_info").watch({onChange:e=>{const o=wx.getStorageSync("user_info");"update"==e.docChanges[0].dataType&&(t.collection("order_data").where({_openid:o.openid,_id:d._id}).update({data:{pay_success:"success",payment:d.payment,out_trade_no:d.out_trade_no}}),(new Wxpay).stock([d.order_item]),0==a.value?i.order_data[d.index].pay_success="success":i.order_data.splice(d.index,1))},onError:function(e){}}),v=["七天无理由退款","商品信息描述不符","质量问题","包装/商品破损/污渍"],h=(e,o)=>{wx.showActionSheet({alertText:"退款原因",itemList:v,success:async s=>{const n=wx.getStorageSync("user_info");await t.collection("order_data").where({_openid:n.openid,_id:o}).update({data:{deliver:"ref_pro",Re_reason:v[s.tapIndex]}}),0==a.value?i.order_data[e].deliver="ref_pro":i.order_data.splice(e,1)},fail(e){formatAppLog("log","at pages/all-orders/order.vue:229",e.errMsg)}})};let g=vue.ref("");vue.watch(eav_index,(e=>{0==a.value?i.order_data[e].evaluate=!0:i.order_data.splice(e,1);const o=wx.getStorageSync("user_info");t.collection("order_data").where({_openid:o.openid,_id:g.value}).update({data:{evaluate:!0}})}));return(e,s)=>(vue.openBlock(),vue.createElementBlock(vue.Fragment,null,[vue.createElementVNode("view",{class:"order-tab"},[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(vue.unref(n),((e,t)=>(vue.openBlock(),vue.createElementBlock("view",{class:"",key:t,onClick:a=>r(t,e.query)},[vue.createElementVNode("text",null,vue.toDisplayString(e.name),1),vue.createElementVNode("text",{class:vue.normalizeClass({order_Select:t==a.value})},null,2)],8,["onClick"])))),128))]),vue.createElementVNode("view",{class:"",style:{height:"60rpx"}}),(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(vue.unref(l),((e,o)=>(vue.openBlock(),vue.createElementBlock("view",{class:"order-back",key:o},[vue.createElementVNode("view",{class:"order-card"},[vue.createElementVNode("view",{class:""},[vue.createElementVNode("image",{src:e.goods_image,mode:"aspectFill"},null,8,["src"])]),vue.createElementVNode("view",{class:""},[vue.createElementVNode("text",{class:"order-title-padd"},vue.toDisplayString(e.goods_title),1),e.specs.length>0?(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,{key:0},vue.renderList(e.specs,((e,t)=>(vue.openBlock(),vue.createElementBlock("text",{class:"order-specs",key:t},vue.toDisplayString(e.att_val),1)))),128)):vue.createCommentVNode("",!0)]),vue.createElementVNode("view",{class:""},[vue.createElementVNode("text",{class:"order-title-padd order-num"},"￥"+vue.toDisplayString(e.goods_price),1),vue.createElementVNode("text",{class:"order-num"},"x"+vue.toDisplayString(e.buy_amount),1)])]),vue.createElementVNode("view",{class:"order-total"},[vue.createElementVNode("text",null,"合计:"),vue.createElementVNode("text",null,vue.toDisplayString(e.subtotal),1)]),"success"==e.pay_success?(vue.openBlock(),vue.createElementBlock("view",{key:0,class:"order-button"},["stay"==e.deliver?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:0},[vue.createElementVNode("text",{class:"order-button-a"},"待发货"),vue.createElementVNode("text",{class:"order-button-b",onClick:t=>h(o,e._id)},"申请退款",8,["onClick"])],64)):vue.createCommentVNode("",!0),"already"==e.deliver?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:1},[vue.createElementVNode("text",{class:"order-button-b",onClick:s=>(async(e,o)=>{const s=wx.getStorageSync("user_info");await t.collection("order_data").where({_openid:s.openid,_id:o}).update({data:{deliver:"rece_goods"}}),0==a.value?i.order_data[e].deliver="rece_goods":i.order_data.splice(e,1)})(o,e._id)},"确认收获",8,["onClick"]),vue.createElementVNode("text",{class:"order-button-b",onClick:t=>((e,t,a,o)=>{let s=JSON.stringify({waybill_No:e,goods_image:t,goods_title:a,buy_amount:o});wx.navigateTo({url:"/pages/order-tracking/track?value="+s})})(e.waybill_No,e.goods_image,e.goods_title,e.buy_amount)},"查看物流",8,["onClick"]),vue.createElementVNode("text",{class:"order-button-b",onClick:t=>h(o,e._id)},"申请退款",8,["onClick"])],64)):vue.createCommentVNode("",!0),"rece_goods"==e.deliver?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:2},[vue.createElementVNode("text",{class:"order-button-a"},"已收货"),vue.createElementVNode("text",{class:vue.normalizeClass(e.evaluate?"order-button-a":"order-button-b"),onClick:t=>((e,t,a,o,s)=>{if(o)return;g.value=e;let n=JSON.stringify({goods_id:t,index:a,specs:s});wx.navigateTo({url:"/pages/eav-goods/eavgoods?query="+n})})(e._id,e.goods_id,o,e.evaluate,e.specs)},vue.toDisplayString(e.evaluate?"已评价":"评价"),11,["onClick"]),vue.createElementVNode("text",{class:"order-button-b",onClick:t=>h(o,e._id)},"申请退款",8,["onClick"])],64)):vue.createCommentVNode("",!0),"ref_pro"==e.deliver?(vue.openBlock(),vue.createElementBlock("text",{key:3,class:"order-button-a"},"申请退款中")):vue.createCommentVNode("",!0),"ref_succ"==e.deliver?(vue.openBlock(),vue.createElementBlock("text",{key:4,class:"order-button-a"},"退款成功")):vue.createCommentVNode("",!0)])):"not_pay"==e.pay_success?(vue.openBlock(),vue.createElementBlock("view",{key:1,class:"order-button"},[vue.createElementVNode("text",{class:"order-button-a",onClick:s=>(async(e,o)=>{const s=wx.getStorageSync("user_info");await t.collection("order_data").where({_openid:s.openid,_id:e}).update({data:{pay_success:"can_order"}}),0==a.value?i.order_data[o].pay_success="can_order":i.order_data.splice(o,1)})(e._id,o)},"取消订单",8,["onClick"]),vue.createElementVNode("text",{class:"order-button-b",onClick:t=>(async(e,t,a,o)=>{try{let s=outTradeNo();await(new Wxpay).place(a,s),d._id=t,d.payment="payment.result",d.order_item=o,d.index=e,d.out_trade_no=s,await(new Wxpay).payMent("payment.result")}catch(s){s&&"requestPayment:fail cancel"==s.errMsg?(new Public).toast("取消支付"):(new Public).toast("支付发生错误")}})(o,e._id,e.subtotal,e)},"继续支付",8,["onClick"])])):"can_order"==e.pay_success?(vue.openBlock(),vue.createElementBlock("view",{key:2,class:"order-button"},[vue.createElementVNode("text",{class:"order-button-a"},"订单已取消")])):vue.createCommentVNode("",!0)])))),128)),0==vue.unref(l).length?(vue.openBlock(),vue.createElementBlock("view",{key:0,class:"Tips"}," 没有订单数据 ")):vue.createCommentVNode("",!0),vue.createElementVNode("view",{class:"loading-hei"},[o.value?(vue.openBlock(),vue.createBlock(Loading,{key:0})):vue.createCommentVNode("",!0)])],64))}},_sfc_main$4={__name:"eavgoods",setup(e){const t=wx.cloud.database(),a=vue.reactive({goods_id:"",goods_index:0,specs:[],cloudimage:[]});onLoad((e=>{const t=JSON.parse(e.query);a.goods_id=t.goods_id,a.goods_index=t.index,a.specs=t.specs}));const o=vue.reactive({eav_text:"",sto_image:[]}),{eav_text:s,sto_image:n}=vue.toRefs(o),r=async()=>{(await(new Public).upLoadImgorVideo(9)).forEach((e=>{o.sto_image.push({image:e.tempFilePath})}))},i=async()=>{if(""==o.eav_text)return void(new Public).toast("请输入评价内容");if(wx.showLoading({title:"提交中",mask:!0}),o.sto_image.length>0){let e=await(new Public).allUpload(o.sto_image,"image");a.cloudimage=e}const e=wx.getStorageSync("user_info");let s=hooks().utcOffset(8).format("YYYY-MM-DD"),n={avatarurl:e.avatarUrl,nickname:e.nickName,eav_text:o.eav_text,goods_id:a.goods_id,eav_image:a.cloudimage,time:s,specs:a.specs};try{await t.collection("goods_eva").add({data:n}),eav_index.value=a.goods_index,(new Public).toast("提交成功"),wx.navigateBack({delta:1})}catch(r){(new Public).toast("提交失败")}};return(e,t)=>(vue.openBlock(),vue.createElementBlock(vue.Fragment,null,[vue.withDirectives(vue.createElementVNode("textarea",{"onUpdate:modelValue":t[0]||(t[0]=e=>vue.isRef(s)?s.value=e:null),placeholder:"请输入评价内容","auto-focus":!0,maxlength:"200","cursor-spacing":"50"},"\r\n  ",512),[[vue.vModelText,vue.unref(s)]]),vue.createElementVNode("view",{class:"goods-image"},[vue.unref(n).length>0?(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,{key:0},vue.renderList(vue.unref(n),((e,t)=>(vue.openBlock(),vue.createElementBlock("view",{class:"upload-Image",key:t},[vue.createElementVNode("image",{src:e.image,mode:"aspectFill",onClick:t=>(e=>{let t=[];o.sto_image.forEach((e=>{t.push(e.image)})),(new Public).previewImg(e,t)})(e.image)},null,8,["src","onClick"]),vue.createElementVNode("image",{src:"/static/detail/shanchu-goods.svg",onClick:e=>(e=>{o.sto_image.splice(e,1)})(t),mode:"aspectFit"},null,8,["onClick"])])))),128)):vue.createCommentVNode("",!0),vue.createElementVNode("view",{class:"",onClick:r},[vue.createElementVNode("image",{src:"/static/detail/shuxing-img.png",mode:"aspectFill"})])]),vue.createElementVNode("view",{class:"newly-added-view back"},[vue.createElementVNode("view",{class:"newly-added",onClick:i}," 提交 ")])],64))}},URLs="https://poll.kuaidi100.com/poll/query.do",KEY="btJdSrMY3947",CUSTOMER="179F168D1D0AECE37B73974BADDCED9A",KUAIDI=[{name:"圆通速递",com:"yuantong",logo:"https://qita-1252107261.cos.ap-chengdu.myqcloud.com/kuaidi/yuantong.jpg"},{name:"韵达快递",com:"yunda",logo:"https://qita-1252107261.cos.ap-chengdu.myqcloud.com/kuaidi/yunda.jpg"},{name:"中通快递",com:"zhongtong",logo:"https://qita-1252107261.cos.ap-chengdu.myqcloud.com/kuaidi/zhongtong.jpg"},{name:"邮政快递",com:"youzhengguonei",logo:"https://qita-1252107261.cos.ap-chengdu.myqcloud.com/kuaidi/youzheng.jpg"},{name:"申通快递",com:"shentong",logo:"https://qita-1252107261.cos.ap-chengdu.myqcloud.com/kuaidi/shentong.png"},{name:"顺丰速运",com:"shunfeng",logo:"https://qita-1252107261.cos.ap-chengdu.myqcloud.com/kuaidi/shunfeng.jpg"},{name:"EMS",com:"ems",logo:"https://qita-1252107261.cos.ap-chengdu.myqcloud.com/kuaidi/ems.png"},{name:"京东物流",com:"jd",logo:"https://qita-1252107261.cos.ap-chengdu.myqcloud.com/kuaidi/jd.jpg"},{name:"极兔速递",com:"jtexpress",logo:"https://qita-1252107261.cos.ap-chengdu.myqcloud.com/kuaidi/jitu.png"},{name:"百世快递",com:"huitongkuaidi",logo:"https://qita-1252107261.cos.ap-chengdu.myqcloud.com/kuaidi/baishi.jpg"}];var commonjsGlobal="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},md5$1={exports:{}};
/**
   * [js-md5]{@link https://github.com/emn178/js-md5}
   *
   * @namespace md5
   * @version 0.7.3
   * @author Chen, Yi-Cyuan [emn178@gmail.com]
   * @copyright Chen, Yi-Cyuan 2014-2017
   * @license MIT
   */
(function(module){(function(){var ERROR="input is invalid type",WINDOW="object"==typeof window,root=WINDOW?window:{};root.JS_MD5_NO_WINDOW&&(WINDOW=!1);var WEB_WORKER=!WINDOW&&"object"==typeof self,NODE_JS=!root.JS_MD5_NO_NODE_JS&&"object"==typeof process&&process.versions&&process.versions.node;NODE_JS?root=commonjsGlobal:WEB_WORKER&&(root=self);var COMMON_JS=!root.JS_MD5_NO_COMMON_JS&&module.exports,ARRAY_BUFFER=!root.JS_MD5_NO_ARRAY_BUFFER&&"undefined"!=typeof ArrayBuffer,HEX_CHARS="0123456789abcdef".split(""),EXTRA=[128,32768,8388608,-2147483648],SHIFT=[0,8,16,24],OUTPUT_TYPES=["hex","array","digest","buffer","arrayBuffer","base64"],BASE64_ENCODE_CHAR="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),blocks=[],buffer8;if(ARRAY_BUFFER){var buffer=new ArrayBuffer(68);buffer8=new Uint8Array(buffer),blocks=new Uint32Array(buffer)}!root.JS_MD5_NO_NODE_JS&&Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),!ARRAY_BUFFER||!root.JS_MD5_NO_ARRAY_BUFFER_IS_VIEW&&ArrayBuffer.isView||(ArrayBuffer.isView=function(e){return"object"==typeof e&&e.buffer&&e.buffer.constructor===ArrayBuffer});var createOutputMethod=function(e){return function(t){return new Md5(!0).update(t)[e]()}},createMethod=function(){var e=createOutputMethod("hex");NODE_JS&&(e=nodeWrap(e)),e.create=function(){return new Md5},e.update=function(t){return e.create().update(t)};for(var t=0;t<OUTPUT_TYPES.length;++t){var a=OUTPUT_TYPES[t];e[a]=createOutputMethod(a)}return e},nodeWrap=function(method){var crypto=eval("require('crypto')"),Buffer=eval("require('buffer').Buffer"),nodeMethod=function(e){if("string"==typeof e)return crypto.createHash("md5").update(e,"utf8").digest("hex");if(null==e)throw ERROR;return e.constructor===ArrayBuffer&&(e=new Uint8Array(e)),Array.isArray(e)||ArrayBuffer.isView(e)||e.constructor===Buffer?crypto.createHash("md5").update(new Buffer(e)).digest("hex"):method(e)};return nodeMethod};function Md5(e){if(e)blocks[0]=blocks[16]=blocks[1]=blocks[2]=blocks[3]=blocks[4]=blocks[5]=blocks[6]=blocks[7]=blocks[8]=blocks[9]=blocks[10]=blocks[11]=blocks[12]=blocks[13]=blocks[14]=blocks[15]=0,this.blocks=blocks,this.buffer8=buffer8;else if(ARRAY_BUFFER){var t=new ArrayBuffer(68);this.buffer8=new Uint8Array(t),this.blocks=new Uint32Array(t)}else this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.h0=this.h1=this.h2=this.h3=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0}Md5.prototype.update=function(e){if(!this.finalized){var t,a=typeof e;if("string"!==a){if("object"!==a)throw ERROR;if(null===e)throw ERROR;if(ARRAY_BUFFER&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!(Array.isArray(e)||ARRAY_BUFFER&&ArrayBuffer.isView(e)))throw ERROR;t=!0}for(var o,s,n=0,r=e.length,i=this.blocks,l=this.buffer8;n<r;){if(this.hashed&&(this.hashed=!1,i[0]=i[16],i[16]=i[1]=i[2]=i[3]=i[4]=i[5]=i[6]=i[7]=i[8]=i[9]=i[10]=i[11]=i[12]=i[13]=i[14]=i[15]=0),t)if(ARRAY_BUFFER)for(s=this.start;n<r&&s<64;++n)l[s++]=e[n];else for(s=this.start;n<r&&s<64;++n)i[s>>2]|=e[n]<<SHIFT[3&s++];else if(ARRAY_BUFFER)for(s=this.start;n<r&&s<64;++n)(o=e.charCodeAt(n))<128?l[s++]=o:o<2048?(l[s++]=192|o>>6,l[s++]=128|63&o):o<55296||o>=57344?(l[s++]=224|o>>12,l[s++]=128|o>>6&63,l[s++]=128|63&o):(o=65536+((1023&o)<<10|1023&e.charCodeAt(++n)),l[s++]=240|o>>18,l[s++]=128|o>>12&63,l[s++]=128|o>>6&63,l[s++]=128|63&o);else for(s=this.start;n<r&&s<64;++n)(o=e.charCodeAt(n))<128?i[s>>2]|=o<<SHIFT[3&s++]:o<2048?(i[s>>2]|=(192|o>>6)<<SHIFT[3&s++],i[s>>2]|=(128|63&o)<<SHIFT[3&s++]):o<55296||o>=57344?(i[s>>2]|=(224|o>>12)<<SHIFT[3&s++],i[s>>2]|=(128|o>>6&63)<<SHIFT[3&s++],i[s>>2]|=(128|63&o)<<SHIFT[3&s++]):(o=65536+((1023&o)<<10|1023&e.charCodeAt(++n)),i[s>>2]|=(240|o>>18)<<SHIFT[3&s++],i[s>>2]|=(128|o>>12&63)<<SHIFT[3&s++],i[s>>2]|=(128|o>>6&63)<<SHIFT[3&s++],i[s>>2]|=(128|63&o)<<SHIFT[3&s++]);this.lastByteIndex=s,this.bytes+=s-this.start,s>=64?(this.start=s-64,this.hash(),this.hashed=!0):this.start=s}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},Md5.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var e=this.blocks,t=this.lastByteIndex;e[t>>2]|=EXTRA[3&t],t>=56&&(this.hashed||this.hash(),e[0]=e[16],e[16]=e[1]=e[2]=e[3]=e[4]=e[5]=e[6]=e[7]=e[8]=e[9]=e[10]=e[11]=e[12]=e[13]=e[14]=e[15]=0),e[14]=this.bytes<<3,e[15]=this.hBytes<<3|this.bytes>>>29,this.hash()}},Md5.prototype.hash=function(){var e,t,a,o,s,n,r=this.blocks;this.first?t=((t=((e=((e=r[0]-680876937)<<7|e>>>25)-271733879<<0)^(a=((a=(-271733879^(o=((o=(-1732584194^2004318071&e)+r[1]-117830708)<<12|o>>>20)+e<<0)&(-271733879^e))+r[2]-1126478375)<<17|a>>>15)+o<<0)&(o^e))+r[3]-1316259209)<<22|t>>>10)+a<<0:(e=this.h0,t=this.h1,a=this.h2,t=((t+=((e=((e+=((o=this.h3)^t&(a^o))+r[0]-680876936)<<7|e>>>25)+t<<0)^(a=((a+=(t^(o=((o+=(a^e&(t^a))+r[1]-389564586)<<12|o>>>20)+e<<0)&(e^t))+r[2]+606105819)<<17|a>>>15)+o<<0)&(o^e))+r[3]-1044525330)<<22|t>>>10)+a<<0),t=((t+=((e=((e+=(o^t&(a^o))+r[4]-176418897)<<7|e>>>25)+t<<0)^(a=((a+=(t^(o=((o+=(a^e&(t^a))+r[5]+1200080426)<<12|o>>>20)+e<<0)&(e^t))+r[6]-1473231341)<<17|a>>>15)+o<<0)&(o^e))+r[7]-45705983)<<22|t>>>10)+a<<0,t=((t+=((e=((e+=(o^t&(a^o))+r[8]+1770035416)<<7|e>>>25)+t<<0)^(a=((a+=(t^(o=((o+=(a^e&(t^a))+r[9]-1958414417)<<12|o>>>20)+e<<0)&(e^t))+r[10]-42063)<<17|a>>>15)+o<<0)&(o^e))+r[11]-1990404162)<<22|t>>>10)+a<<0,t=((t+=((e=((e+=(o^t&(a^o))+r[12]+1804603682)<<7|e>>>25)+t<<0)^(a=((a+=(t^(o=((o+=(a^e&(t^a))+r[13]-40341101)<<12|o>>>20)+e<<0)&(e^t))+r[14]-1502002290)<<17|a>>>15)+o<<0)&(o^e))+r[15]+1236535329)<<22|t>>>10)+a<<0,t=((t+=((o=((o+=(t^a&((e=((e+=(a^o&(t^a))+r[1]-165796510)<<5|e>>>27)+t<<0)^t))+r[6]-1069501632)<<9|o>>>23)+e<<0)^e&((a=((a+=(e^t&(o^e))+r[11]+643717713)<<14|a>>>18)+o<<0)^o))+r[0]-373897302)<<20|t>>>12)+a<<0,t=((t+=((o=((o+=(t^a&((e=((e+=(a^o&(t^a))+r[5]-701558691)<<5|e>>>27)+t<<0)^t))+r[10]+38016083)<<9|o>>>23)+e<<0)^e&((a=((a+=(e^t&(o^e))+r[15]-660478335)<<14|a>>>18)+o<<0)^o))+r[4]-405537848)<<20|t>>>12)+a<<0,t=((t+=((o=((o+=(t^a&((e=((e+=(a^o&(t^a))+r[9]+568446438)<<5|e>>>27)+t<<0)^t))+r[14]-1019803690)<<9|o>>>23)+e<<0)^e&((a=((a+=(e^t&(o^e))+r[3]-187363961)<<14|a>>>18)+o<<0)^o))+r[8]+1163531501)<<20|t>>>12)+a<<0,t=((t+=((o=((o+=(t^a&((e=((e+=(a^o&(t^a))+r[13]-1444681467)<<5|e>>>27)+t<<0)^t))+r[2]-51403784)<<9|o>>>23)+e<<0)^e&((a=((a+=(e^t&(o^e))+r[7]+1735328473)<<14|a>>>18)+o<<0)^o))+r[12]-1926607734)<<20|t>>>12)+a<<0,t=((t+=((n=(o=((o+=((s=t^a)^(e=((e+=(s^o)+r[5]-378558)<<4|e>>>28)+t<<0))+r[8]-2022574463)<<11|o>>>21)+e<<0)^e)^(a=((a+=(n^t)+r[11]+1839030562)<<16|a>>>16)+o<<0))+r[14]-35309556)<<23|t>>>9)+a<<0,t=((t+=((n=(o=((o+=((s=t^a)^(e=((e+=(s^o)+r[1]-1530992060)<<4|e>>>28)+t<<0))+r[4]+1272893353)<<11|o>>>21)+e<<0)^e)^(a=((a+=(n^t)+r[7]-155497632)<<16|a>>>16)+o<<0))+r[10]-1094730640)<<23|t>>>9)+a<<0,t=((t+=((n=(o=((o+=((s=t^a)^(e=((e+=(s^o)+r[13]+681279174)<<4|e>>>28)+t<<0))+r[0]-358537222)<<11|o>>>21)+e<<0)^e)^(a=((a+=(n^t)+r[3]-722521979)<<16|a>>>16)+o<<0))+r[6]+76029189)<<23|t>>>9)+a<<0,t=((t+=((n=(o=((o+=((s=t^a)^(e=((e+=(s^o)+r[9]-640364487)<<4|e>>>28)+t<<0))+r[12]-421815835)<<11|o>>>21)+e<<0)^e)^(a=((a+=(n^t)+r[15]+530742520)<<16|a>>>16)+o<<0))+r[2]-995338651)<<23|t>>>9)+a<<0,t=((t+=((o=((o+=(t^((e=((e+=(a^(t|~o))+r[0]-198630844)<<6|e>>>26)+t<<0)|~a))+r[7]+1126891415)<<10|o>>>22)+e<<0)^((a=((a+=(e^(o|~t))+r[14]-1416354905)<<15|a>>>17)+o<<0)|~e))+r[5]-57434055)<<21|t>>>11)+a<<0,t=((t+=((o=((o+=(t^((e=((e+=(a^(t|~o))+r[12]+1700485571)<<6|e>>>26)+t<<0)|~a))+r[3]-1894986606)<<10|o>>>22)+e<<0)^((a=((a+=(e^(o|~t))+r[10]-1051523)<<15|a>>>17)+o<<0)|~e))+r[1]-2054922799)<<21|t>>>11)+a<<0,t=((t+=((o=((o+=(t^((e=((e+=(a^(t|~o))+r[8]+1873313359)<<6|e>>>26)+t<<0)|~a))+r[15]-30611744)<<10|o>>>22)+e<<0)^((a=((a+=(e^(o|~t))+r[6]-1560198380)<<15|a>>>17)+o<<0)|~e))+r[13]+1309151649)<<21|t>>>11)+a<<0,t=((t+=((o=((o+=(t^((e=((e+=(a^(t|~o))+r[4]-145523070)<<6|e>>>26)+t<<0)|~a))+r[11]-1120210379)<<10|o>>>22)+e<<0)^((a=((a+=(e^(o|~t))+r[2]+718787259)<<15|a>>>17)+o<<0)|~e))+r[9]-343485551)<<21|t>>>11)+a<<0,this.first?(this.h0=e+1732584193<<0,this.h1=t-271733879<<0,this.h2=a-1732584194<<0,this.h3=o+271733878<<0,this.first=!1):(this.h0=this.h0+e<<0,this.h1=this.h1+t<<0,this.h2=this.h2+a<<0,this.h3=this.h3+o<<0)},Md5.prototype.hex=function(){this.finalize();var e=this.h0,t=this.h1,a=this.h2,o=this.h3;return HEX_CHARS[e>>4&15]+HEX_CHARS[15&e]+HEX_CHARS[e>>12&15]+HEX_CHARS[e>>8&15]+HEX_CHARS[e>>20&15]+HEX_CHARS[e>>16&15]+HEX_CHARS[e>>28&15]+HEX_CHARS[e>>24&15]+HEX_CHARS[t>>4&15]+HEX_CHARS[15&t]+HEX_CHARS[t>>12&15]+HEX_CHARS[t>>8&15]+HEX_CHARS[t>>20&15]+HEX_CHARS[t>>16&15]+HEX_CHARS[t>>28&15]+HEX_CHARS[t>>24&15]+HEX_CHARS[a>>4&15]+HEX_CHARS[15&a]+HEX_CHARS[a>>12&15]+HEX_CHARS[a>>8&15]+HEX_CHARS[a>>20&15]+HEX_CHARS[a>>16&15]+HEX_CHARS[a>>28&15]+HEX_CHARS[a>>24&15]+HEX_CHARS[o>>4&15]+HEX_CHARS[15&o]+HEX_CHARS[o>>12&15]+HEX_CHARS[o>>8&15]+HEX_CHARS[o>>20&15]+HEX_CHARS[o>>16&15]+HEX_CHARS[o>>28&15]+HEX_CHARS[o>>24&15]},Md5.prototype.toString=Md5.prototype.hex,Md5.prototype.digest=function(){this.finalize();var e=this.h0,t=this.h1,a=this.h2,o=this.h3;return[255&e,e>>8&255,e>>16&255,e>>24&255,255&t,t>>8&255,t>>16&255,t>>24&255,255&a,a>>8&255,a>>16&255,a>>24&255,255&o,o>>8&255,o>>16&255,o>>24&255]},Md5.prototype.array=Md5.prototype.digest,Md5.prototype.arrayBuffer=function(){this.finalize();var e=new ArrayBuffer(16),t=new Uint32Array(e);return t[0]=this.h0,t[1]=this.h1,t[2]=this.h2,t[3]=this.h3,e},Md5.prototype.buffer=Md5.prototype.arrayBuffer,Md5.prototype.base64=function(){for(var e,t,a,o="",s=this.array(),n=0;n<15;)e=s[n++],t=s[n++],a=s[n++],o+=BASE64_ENCODE_CHAR[e>>>2]+BASE64_ENCODE_CHAR[63&(e<<4|t>>>4)]+BASE64_ENCODE_CHAR[63&(t<<2|a>>>6)]+BASE64_ENCODE_CHAR[63&a];return e=s[n],o+=BASE64_ENCODE_CHAR[e>>>2]+BASE64_ENCODE_CHAR[e<<4&63]+"=="};var exports=createMethod();COMMON_JS?module.exports=exports:root.md5=exports})()})(md5$1);var md5=md5$1.exports;const _sfc_main$3={__name:"track",setup(e){const t=vue.reactive({waybill_No:"",goods_image:"",goods_title:"",buy_amount:0}),{waybill_No:a,goods_image:o,goods_title:s,buy_amount:n}=vue.toRefs(t);function r(){let e={com:"",num:t.waybill_No},a=md5(JSON.stringify(e)+KEY+CUSTOMER).toUpperCase();return{customer:CUSTOMER,sign:a,param:JSON.stringify(e)}}onLoad((e=>{let a=JSON.parse(e.value);t.waybill_No=a.waybill_No,t.goods_image=a.goods_image,t.goods_title=a.goods_title,t.buy_amount=a.buy_amount,uni.request({url:URLs,method:"POST",header:{"Content-Type":"application/x-www-form-urlencoded"},data:r()}).then((e=>{if("ok"==e.data.message){i.nu=e.data.nu,i.state=e.data.state;const t=KUAIDI.filter((t=>t.com==e.data.com));i.kuaidi=t[0].name,i.logo=t[0].logo,i.progress=e.data.data}else i.message=1})).catch((e=>{formatAppLog("log","at pages/order-tracking/track.vue:91",e)}))}));const i=vue.reactive({nu:"",state:0,kuaidi:"",logo:"",progress:[],message:0}),{nu:l,state:c,kuaidi:u,logo:d,progress:m,message:v}=vue.toRefs(i);return(e,t)=>(vue.openBlock(),vue.createElementBlock("view",{class:"tracking-page"},[vue.createElementVNode("view",{class:"tr-goods"},[vue.createElementVNode("view",{class:""},[vue.createElementVNode("image",{src:vue.unref(o),mode:"aspectFill"},null,8,["src"])]),vue.createElementVNode("view",{class:"tr-text"},[vue.createElementVNode("text",{class:"overflow"},vue.toDisplayString(vue.unref(s)),1),vue.createElementVNode("text",null,vue.toDisplayString(vue.unref(n))+"件",1)])]),vue.createElementVNode("view",{class:"fast-mail"},[vue.createElementVNode("image",{src:vue.unref(d),mode:"aspectFill"},null,8,["src"]),vue.createElementVNode("text",{class:"fast-mail-Zh"},vue.toDisplayString(vue.unref(u)),1),vue.createElementVNode("text",null,vue.toDisplayString(vue.unref(l)),1)]),(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(vue.unref(m),((e,t)=>(vue.openBlock(),vue.createElementBlock("view",{class:"tracking-view",key:t},[vue.createElementVNode("view",{class:"tracking-left"},[0==t&&"3"==vue.unref(c)?(vue.openBlock(),vue.createElementBlock("view",{key:0,class:"active"},"签")):(vue.openBlock(),vue.createElementBlock("view",{key:1})),vue.createElementVNode("view")]),vue.createElementVNode("view",{class:"tracking-right"},[vue.createElementVNode("view",{class:vue.normalizeClass({"active-text":0==t&&"3"==vue.unref(c)})},vue.toDisplayString(e.context),3),vue.createElementVNode("view",{class:""},vue.toDisplayString(e.time),1)])])))),128)),1==vue.unref(v)?(vue.openBlock(),vue.createElementBlock("view",{key:0,class:"Tips"}," 暂无物流动态 ")):vue.createCommentVNode("",!0)]))}};var PagesOrderTrackingTrack=_export_sfc(_sfc_main$3,[["__scopeId","data-v-93082122"]]);const _sfc_main$2={__name:"details",setup(e){const t=wx.cloud.database(),a=vue.ref("");onLoad((e=>{a.value=e.goods_id,n()}));const o=vue.reactive({eva_data:[]}),{eva_data:s}=vue.toRefs(o);async function n(e=0){const s=await t.collection("goods_eva").where({goods_id:a.value}).limit(10).skip(e).get();o.eva_data=[...o.eva_data,...s.data]}let r=vue.ref(!1),i=vue.ref(0);onReachBottom((async()=>{r.value=!0,i.value++;let e=10*i.value;await n(e),r.value=!1}));return(e,t)=>(vue.openBlock(),vue.createElementBlock(vue.Fragment,null,[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(vue.unref(s),((e,t)=>(vue.openBlock(),vue.createElementBlock("view",{class:"eva-content",key:t},[vue.createElementVNode("view",{class:"eva-name"},[vue.createElementVNode("view",null,[vue.createElementVNode("image",{src:e.avatarurl,mode:"aspectFill"},null,8,["src"])]),vue.createElementVNode("view",{class:"eva-com"},[vue.createElementVNode("text",null,vue.toDisplayString(e.nickname),1),vue.createElementVNode("view",{class:""},[e.specs.length>0?(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,{key:0},vue.renderList(e.specs,((e,t)=>(vue.openBlock(),vue.createElementBlock("text",{style:{"padding-right":"10rpx"},key:t},vue.toDisplayString(e.att_val),1)))),128)):vue.createCommentVNode("",!0)])]),vue.createElementVNode("view",{class:"eva-time"},vue.toDisplayString(e.time),1)]),vue.createElementVNode("view",{class:"eva-text"},vue.toDisplayString(e.eav_text),1),vue.createElementVNode("view",{class:"eva-image"},[e.eav_image.length>0?(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,{key:0},vue.renderList(e.eav_image,((e,a)=>(vue.openBlock(),vue.createElementBlock("view",{class:"",key:a},[vue.createElementVNode("image",{src:e.image,mode:"aspectFill",onClick:a=>((e,t)=>{let a=[];o.eva_data[t].eav_image.forEach((e=>{a.push(e.image)})),(new Public).previewImg(e,a)})(e.image,t)},null,8,["src","onClick"])])))),128)):vue.createCommentVNode("",!0)])])))),128)),0==vue.unref(s).length?(vue.openBlock(),vue.createElementBlock("view",{key:0,class:"Tips"}," 该商品还没有评价 ")):vue.createCommentVNode("",!0),vue.createElementVNode("view",{class:"loading-hei"},[vue.unref(r)?(vue.openBlock(),vue.createBlock(Loading,{key:0})):vue.createCommentVNode("",!0)])],64))}};var PagesEvaDetailsDetails=_export_sfc(_sfc_main$2,[["__scopeId","data-v-9bf3ac70"]]);const _sfc_main$1={__name:"collection",setup(e){let t=vue.ref(!1);const a=vue.reactive({card:[]}),{card:o}=vue.toRefs(a);async function s(e=0){const t=await wx.cloud.callFunction({name:"my-collection",data:{skip:e}});formatAppLog("log","at pages/my-collection/collection.vue:26",t),a.card=[...a.card,...t.result]}onShow((()=>{a.card=[],s()}));let n=vue.ref(0);return onReachBottom((async()=>{t.value=!0,n.value++;let e=10*n.value;await s(e),t.value=!1})),(e,a)=>(vue.openBlock(),vue.createElementBlock(vue.Fragment,null,[vue.createVNode(Card,{card:vue.unref(o)},null,8,["card"]),vue.createElementVNode("view",{class:"loading-hei"},[vue.unref(t)?(vue.openBlock(),vue.createBlock(Loading,{key:0})):vue.createCommentVNode("",!0)]),0==vue.unref(o).length?(vue.openBlock(),vue.createElementBlock("view",{key:0,class:"Tips"}," 没有商品收藏 ")):vue.createCommentVNode("",!0)],64))}};__definePage("pages/index/index",_sfc_main$m),__definePage("pages/sort-view/sort-view",PagesSortViewSortView),__definePage("pages/shopping-cart/shopping-cart",_sfc_main$k),__definePage("pages/my-page/my-page",PagesMyPageMyPage),__definePage("pages/search-view/search",PagesSearchViewSearch),__definePage("pages/short-video/video",PagesShortVideoVideo),__definePage("pages/product-details/detail",_sfc_main$9),__definePage("pages/pay-view/pay",_sfc_main$8),__definePage("pages/re-address/address",_sfc_main$6),__definePage("pages/all-orders/order",_sfc_main$5),__definePage("pages/eav-goods/eavgoods",_sfc_main$4),__definePage("pages/order-tracking/track",PagesOrderTrackingTrack),__definePage("pages/eva-details/details",PagesEvaDetailsDetails),__definePage("pages/my-collection/collection",_sfc_main$1);const _sfc_main={onLaunch:function(){wx.cloud.init({env:"lingshi-user-9gqe4ry205449a04",traceUser:!0})},onShow:function(){},onHide:function(){}};function createApp(){return{app:vue.createVueApp(_sfc_main)}}const{app:__app__,Vuex:__Vuex__,Pinia:__Pinia__}=createApp();uni.Vuex=__Vuex__,uni.Pinia=__Pinia__,__app__.provide("__globalStyles",__uniConfig.styles),__app__._component.mpType="app",__app__._component.render=()=>{},__app__.mount("#app")}(uni.VueShared,Vue);
